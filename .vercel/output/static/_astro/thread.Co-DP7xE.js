import{r as l,R as nn,g as wn,a as Vc}from"./index.DWKhlr8t.js";import{j as d}from"./jsx-runtime._qNxob7_.js";import{S as Sn,u as ae,a as Hc,c as qc}from"./index.DrJg9Js7.js";import{r as Yc}from"./index.Cy6fXh2N.js";function Er(e,t){function r(n){const s=l.useContext(e);if(!n?.optional&&!s)throw new Error(`This component must be used within ${t}.`);return s}return r}function ie(e,t){function r(s){const a=e(s);return a?a[t]:null}function n(s){let a=!1,i;typeof s=="function"?i=s:s&&typeof s=="object"&&(a=!!s.optional,i=s.selector);const o=r({optional:a});return o?i?o(i):o():null}return{[t]:n,[`${t}Store`]:r}}var La=l.createContext(null),Cn=Er(La,"AssistantRuntimeProvider");function Jc(e){const t=Cn(e);return t?t.useAssistantRuntime():null}var{useToolUIs:Gc,useToolUIsStore:gy}=ie(Cn,"useToolUIs"),{useThreadList:vy}=ie(Cn,"useThreadList");const qs=e=>{let t;const r=new Set,n=(c,h)=>{const f=typeof c=="function"?c(t):c;if(!Object.is(f,t)){const m=t;t=h??(typeof f!="object"||f===null)?f:Object.assign({},t,f),r.forEach(p=>p(t,m))}},s=()=>t,o={setState:n,getState:s,getInitialState:()=>u,subscribe:c=>(r.add(c),()=>r.delete(c))},u=t=e(n,s,o);return o},Kc=e=>e?qs(e):qs,Xc=e=>e;function Qc(e,t=Xc){const r=nn.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return nn.useDebugValue(r),r}const Ys=e=>{const t=Kc(e),r=n=>Qc(t,n);return Object.assign(r,t),r},X=e=>e?Ys(e):Ys;var eu=()=>X(e=>{const t=new Map;return Object.freeze({getToolUI:r=>{const s=t.get(r)?.at(-1);return s||null},setToolUI:(r,n)=>{let s=t.get(r);return s||(s=[],t.set(r,s)),s.push(n),e({}),()=>{const a=s.indexOf(n);a!==-1&&s.splice(a,1),a===s.length&&e({})}}})}),Ba=l.createContext(null),zt=Er(Ba,"AssistantRuntimeProvider");function Xe(e){const t=zt(e);return t?t.useThreadRuntime():null}var{useThread:oe}=ie(zt,"useThread"),{useComposer:yy}=ie(zt,"useComposer"),{useViewport:$a,useViewportStore:Fa}=ie(zt,"useViewport"),tu=()=>{const e=new Set;return X(()=>({isAtBottom:!0,scrollToBottom:()=>{for(const t of e)t()},onScrollToBottom:t=>(e.add(t),()=>{e.delete(t)})}))},ne=e=>e,ru=e=>{const[t]=l.useState(()=>X(()=>e));return l.useEffect(()=>{ne(t).setState(e,!0)},[e,t]),t},nu=e=>{const[t]=l.useState(()=>X(()=>e.getState()));return l.useEffect(()=>{const r=()=>ne(t).setState(e.getState(),!0);return r(),e.subscribe(r)},[e,t]),t},su=e=>{const[t]=l.useState(()=>X(()=>e.getState()));return l.useEffect(()=>{const r=()=>ne(t).setState(e.getState(),!0);return r(),e.subscribe(r)},[e,t]),t},au=({children:e,runtime:t})=>{const r=ru(t),n=nu(t),s=su(t.composer),a=l.useMemo(()=>{const i=tu();return{useThread:n,useThreadRuntime:r,useComposer:s,useViewport:i}},[n,r,s]);return d.jsx(Ba.Provider,{value:a,children:e})},iu=e=>{const[t]=l.useState(()=>X(()=>e));return l.useEffect(()=>{ne(t).setState(e,!0)},[e,t]),t},ou=()=>l.useMemo(()=>eu(),[]),cu=e=>{const[t]=l.useState(()=>X(()=>e.threadList.getState()));return l.useEffect(()=>{const r=()=>ne(t).setState(e.threadList.getState(),!0);return r(),e.threadList.subscribe(r)},[e,t]),t},uu=({children:e,runtime:t})=>{const r=iu(t),n=ou(),s=cu(t),a=l.useMemo(()=>({useToolUIs:n,useAssistantRuntime:r,useThreadList:s}),[r,n,s]);return d.jsx(La.Provider,{value:a,children:d.jsx(au,{runtime:t.thread,children:e})})},lu=l.memo(uu),Za=l.createContext(null),Ua=Er(Za,"a component passed to <MessagePrimitive.Content components={...}>");function za(e){const t=Ua(e);return t?t.useContentPartRuntime():null}var{useContentPart:Wt}=ie(Ua,"useContentPart"),Js=class{constructor(e,t,r){this.contentBinding=e,this.messageApi=t,this.threadApi=r}get path(){return this.contentBinding.path}getState(){return this.contentBinding.getState()}addToolResult(e){const t=this.messageApi.getState();if(!t)throw new Error("Message is not available");const r=this.contentBinding.getState();if(!r)throw new Error("Content part is not available");if(r.type!=="tool-call")throw new Error("Tried to add tool result to non-tool content part");const n=r.toolName,s=r.toolCallId;this.threadApi.getState().addToolResult({messageId:t.id,toolName:n,toolCallId:s,result:e})}subscribe(e){return this.contentBinding.subscribe(e)}},Wa=l.createContext(null),Vt=Er(Wa,"a component passed to <ThreadPrimitive.Messages components={...} />");function le(e){const t=Vt(e);return t?t.useMessageRuntime():null}var{useMessage:pe}=ie(Vt,"useMessage"),{useMessageUtils:Va,useMessageUtilsStore:Tn}=ie(Vt,"useMessageUtils"),{useEditComposer:Ha}=ie(Vt,"useEditComposer"),du=()=>{const{useComposer:e}=zt(),{useEditComposer:t}=Vt({optional:!0})??{};return l.useMemo(()=>({useComposer:t??e,type:t?"edit":"new"}),[t,e])},{useComposer:kr}=ie(du,"useComposer");function bt(e){const t=le({optional:!0}),r=Xe(e);return t?t.composer:r?.composer??null}var qa=l.createContext(null);function Ht(e){const t=l.useContext(qa);if(!e?.optional&&!t)throw new Error("This component must be used within a ComposerPrimitive.Attachments or MessagePrimitive.Attachments component.");return t}function hu(e){const t=Ht(e);if(!t)return null;if(t.source!=="thread-composer")throw new Error("This component must be used within a thread's ComposerPrimitive.Attachments component.");return t}function fu(e){const t=Ht(e);if(!t)return null;if(t.source!=="edit-composer")throw new Error("This component must be used within a messages's ComposerPrimitive.Attachments component.");return t}function pu(e){const t=Ht(e);if(!t)return null;if(t.source!=="message")throw new Error("This component must be used within a MessagePrimitive.Attachments component.");return t}function mu(e){const t=Ht(e);return t?t.useAttachmentRuntime():null}var{useAttachment:Tt}=ie(Ht,"useAttachment"),{useAttachment:gu}=ie(hu,"useAttachment"),{useAttachment:by}=ie(fu,"useAttachment"),{useAttachment:vu}=ie(pu,"useAttachment"),yu=()=>Wt(t=>{if(t.type!=="ui")throw new Error("This component can only be used inside ui content parts.");return t}),bu=()=>Wt(t=>{if(t.type!=="image")throw new Error("ContentPartImage can only be used inside image content parts.");return t}),xu=()=>Wt(t=>{if(t.type!=="text")throw new Error("ContentPartText can only be used inside text content parts.");return t}),En=Yc();const _u=wn(En);var wu=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],B=wu.reduce((e,t)=>{const r=l.forwardRef((n,s)=>{const{asChild:a,...i}=n,o=a?Sn:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),d.jsx(o,{...i,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Su(e,t){e&&En.flushSync(()=>e.dispatchEvent(t))}var Cu=e=>{const t=r=>{const n=e.map(s=>s.subscribe(r));return()=>{for(const s of n)s()}};return r=>{const n=()=>r(...e.map(s=>s.getState()));return l.useSyncExternalStore(t,n,n)}},Ar=(e,t)=>l.useMemo(()=>Cu(e),e)(t),sn=(e=>(e.Hidden="hidden",e.Floating="floating",e.Normal="normal",e))(sn||{}),Tu=({hideWhenRunning:e,autohide:t,autohideFloat:r})=>{const n=Xe(),s=le(),a=Tn();return Ar([n,s,a],(i,o,u)=>e&&i.isRunning?"hidden":t==="always"||t==="not-last"&&!o.isLast?u.isHovering?r==="always"||r==="single-branch"&&o.branchCount<=1?"floating":"normal":"hidden":"normal")},kn=l.forwardRef(({hideWhenRunning:e,autohide:t,autohideFloat:r,...n},s)=>{const a=Tu({hideWhenRunning:e,autohide:t,autohideFloat:r});return a===sn.Hidden?null:d.jsx(B.div,{...a===sn.Floating?{"data-floating":"true"}:null,...n,ref:s})});kn.displayName="ActionBarPrimitive.Root";var Eu=({copiedDuration:e=3e3}={})=>{const t=le(),r=bt(),n=Va(i=>i.setIsCopied),s=pe(i=>(i.role!=="assistant"||i.status.type!=="running")&&i.content.some(o=>o.type==="text"&&o.text.length>0)),a=l.useCallback(()=>{const{isEditing:i,text:o}=r.getState(),u=i?o:t.unstable_getCopyText();navigator.clipboard.writeText(u).then(()=>{n(!0),setTimeout(()=>n(!1),e)})},[t,n,r,e]);return s?a:null};function z(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e?.(s),r===!1||!s.defaultPrevented)return t?.(s)}}var Ya=l.forwardRef(({copiedDuration:e,onClick:t,disabled:r,...n},s)=>{const a=Va(o=>o.isCopied),i=Eu({copiedDuration:e});return d.jsx(B.button,{type:"button",...a?{"data-copied":"true"}:{},...n,ref:s,disabled:r||!i,onClick:z(t,()=>{i?.()})})});Ya.displayName="ActionBarPrimitive.Copy";var ku=()=>{const e=le(),t=Xe(),r=Ar([t,e],(s,a)=>s.isRunning||s.isDisabled||a.role!=="assistant"),n=l.useCallback(()=>{e.reload()},[e]);return r?null:n},Ee=(e,t,r=[])=>{const n=l.forwardRef((s,a)=>{const i={},o={};Object.keys(s).forEach(c=>{r.includes(c)?i[c]=s[c]:o[c]=s[c]});const u=t(i);return d.jsx(B.button,{type:"button",...o,ref:a,disabled:o.disabled||!u,onClick:z(o.onClick,()=>{u?.()})})});return n.displayName=e,n},Au=Ee("ActionBarPrimitive.Reload",ku),Ru=()=>{const e=le(),t=Ha(n=>n.isEditing),r=l.useCallback(()=>{e.composer.beginEdit()},[e]);return t?null:r},Pu=Ee("ActionBarPrimitive.Edit",Ru),Nu=()=>{const e=le(),t=l.useCallback(async()=>{e.speak()},[e]);return pe(n=>(n.role!=="assistant"||n.status.type!=="running")&&n.content.some(s=>s.type==="text"&&s.text.length>0))?t:null},Mu=Ee("ActionBarPrimitive.Speak",Nu),Iu=()=>{const e=le(),t=pe(n=>n.speech!=null),r=l.useCallback(async()=>{e.stopSpeaking()},[e]);return t?r:null};function ve(e){const t=l.useRef(e);return l.useEffect(()=>{t.current=e}),l.useMemo(()=>(...r)=>t.current?.(...r),[])}function An(e,t=globalThis?.document){const r=ve(e);l.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var Ja=l.forwardRef((e,t)=>{const r=Iu();return An(n=>{r&&(n.preventDefault(),r())}),d.jsx(B.button,{type:"button",disabled:!r,...e,ref:t,onClick:z(e.onClick,()=>{r?.()})})});Ja.displayName="ActionBarPrimitive.StopSpeaking";var Ou=()=>{const e=le();return l.useCallback(()=>{e.submitFeedback({type:"positive"})},[e])},Ga=l.forwardRef(({onClick:e,disabled:t,...r},n)=>{const s=pe(i=>i.submittedFeedback?.type==="positive"),a=Ou();return d.jsx(B.button,{type:"button",...s?{"data-submitted":"true"}:{},...r,ref:n,disabled:t||!a,onClick:z(e,()=>{a?.()})})});Ga.displayName="ActionBarPrimitive.FeedbackPositive";var ju=()=>{const e=le();return l.useCallback(()=>{e.submitFeedback({type:"negative"})},[e])},Ka=l.forwardRef(({onClick:e,disabled:t,...r},n)=>{const s=pe(i=>i.submittedFeedback?.type==="negative"),a=ju();return d.jsx(B.button,{type:"button",...s?{"data-submitted":"true"}:{},...r,ref:n,disabled:t||!a,onClick:z(e,()=>{a?.()})})});Ka.displayName="ActionBarPrimitive.FeedbackNegative";function Du(e,t){const r=l.createContext(t),n=a=>{const{children:i,...o}=a,u=l.useMemo(()=>o,Object.values(o));return d.jsx(r.Provider,{value:u,children:i})};n.displayName=e+"Provider";function s(a){const i=l.useContext(r);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[n,s]}function Rn(e,t=[]){let r=[];function n(a,i){const o=l.createContext(i),u=r.length;r=[...r,i];const c=f=>{const{scope:m,children:p,...v}=f,g=m?.[e]?.[u]||o,y=l.useMemo(()=>v,Object.values(v));return d.jsx(g.Provider,{value:y,children:p})};c.displayName=a+"Provider";function h(f,m){const p=m?.[e]?.[u]||o,v=l.useContext(p);if(v)return v;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${a}\``)}return[c,h]}const s=()=>{const a=r.map(i=>l.createContext(i));return function(o){const u=o?.[e]||a;return l.useMemo(()=>({[`__scope${e}`]:{...o,[e]:u}}),[o,u])}};return s.scopeName=e,[n,Lu(s,...t)]}function Lu(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const i=n.reduce((o,{useScope:u,scopeName:c})=>{const f=u(a)[`__scope${c}`];return{...o,...f}},{});return l.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}var Bu="DismissableLayer",an="dismissableLayer.update",$u="dismissableLayer.pointerDownOutside",Fu="dismissableLayer.focusOutside",Gs,Xa=l.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Pn=l.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:i,onDismiss:o,...u}=e,c=l.useContext(Xa),[h,f]=l.useState(null),m=h?.ownerDocument??globalThis?.document,[,p]=l.useState({}),v=ae(t,P=>f(P)),g=Array.from(c.layers),[y]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),b=g.indexOf(y),T=h?g.indexOf(h):-1,w=c.layersWithOutsidePointerEventsDisabled.size>0,S=T>=b,C=zu(P=>{const Z=P.target,H=[...c.branches].some(W=>W.contains(Z));!S||H||(s?.(P),i?.(P),P.defaultPrevented||o?.())},m),A=Wu(P=>{const Z=P.target;[...c.branches].some(W=>W.contains(Z))||(a?.(P),i?.(P),P.defaultPrevented||o?.())},m);return An(P=>{T===c.layers.size-1&&(n?.(P),!P.defaultPrevented&&o&&(P.preventDefault(),o()))},m),l.useEffect(()=>{if(h)return r&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(Gs=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(h)),c.layers.add(h),Ks(),()=>{r&&c.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=Gs)}},[h,m,r,c]),l.useEffect(()=>()=>{h&&(c.layers.delete(h),c.layersWithOutsidePointerEventsDisabled.delete(h),Ks())},[h,c]),l.useEffect(()=>{const P=()=>p({});return document.addEventListener(an,P),()=>document.removeEventListener(an,P)},[]),d.jsx(B.div,{...u,ref:v,style:{pointerEvents:w?S?"auto":"none":void 0,...e.style},onFocusCapture:z(e.onFocusCapture,A.onFocusCapture),onBlurCapture:z(e.onBlurCapture,A.onBlurCapture),onPointerDownCapture:z(e.onPointerDownCapture,C.onPointerDownCapture)})});Pn.displayName=Bu;var Zu="DismissableLayerBranch",Uu=l.forwardRef((e,t)=>{const r=l.useContext(Xa),n=l.useRef(null),s=ae(t,n);return l.useEffect(()=>{const a=n.current;if(a)return r.branches.add(a),()=>{r.branches.delete(a)}},[r.branches]),d.jsx(B.div,{...e,ref:s})});Uu.displayName=Zu;function zu(e,t=globalThis?.document){const r=ve(e),n=l.useRef(!1),s=l.useRef(()=>{});return l.useEffect(()=>{const a=o=>{if(o.target&&!n.current){let u=function(){Qa($u,r,c,{discrete:!0})};const c={originalEvent:o};o.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=u,t.addEventListener("click",s.current,{once:!0})):u()}else t.removeEventListener("click",s.current);n.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",a),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function Wu(e,t=globalThis?.document){const r=ve(e),n=l.useRef(!1);return l.useEffect(()=>{const s=a=>{a.target&&!n.current&&Qa(Fu,r,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Ks(){const e=new CustomEvent(an);document.dispatchEvent(e)}function Qa(e,t,r,{discrete:n}){const s=r.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?Su(s,a):s.dispatchEvent(a)}var Ur=0;function Vu(){l.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Xs()),document.body.insertAdjacentElement("beforeend",e[1]??Xs()),Ur++,()=>{Ur===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Ur--}},[])}function Xs(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var zr="focusScope.autoFocusOnMount",Wr="focusScope.autoFocusOnUnmount",Qs={bubbles:!1,cancelable:!0},Hu="FocusScope",ei=l.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...i}=e,[o,u]=l.useState(null),c=ve(s),h=ve(a),f=l.useRef(null),m=ae(t,g=>u(g)),p=l.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;l.useEffect(()=>{if(n){let g=function(w){if(p.paused||!o)return;const S=w.target;o.contains(S)?f.current=S:Ue(f.current,{select:!0})},y=function(w){if(p.paused||!o)return;const S=w.relatedTarget;S!==null&&(o.contains(S)||Ue(f.current,{select:!0}))},b=function(w){if(document.activeElement===document.body)for(const C of w)C.removedNodes.length>0&&Ue(o)};document.addEventListener("focusin",g),document.addEventListener("focusout",y);const T=new MutationObserver(b);return o&&T.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",y),T.disconnect()}}},[n,o,p.paused]),l.useEffect(()=>{if(o){ta.add(p);const g=document.activeElement;if(!o.contains(g)){const b=new CustomEvent(zr,Qs);o.addEventListener(zr,c),o.dispatchEvent(b),b.defaultPrevented||(qu(Xu(ti(o)),{select:!0}),document.activeElement===g&&Ue(o))}return()=>{o.removeEventListener(zr,c),setTimeout(()=>{const b=new CustomEvent(Wr,Qs);o.addEventListener(Wr,h),o.dispatchEvent(b),b.defaultPrevented||Ue(g??document.body,{select:!0}),o.removeEventListener(Wr,h),ta.remove(p)},0)}}},[o,c,h,p]);const v=l.useCallback(g=>{if(!r&&!n||p.paused)return;const y=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,b=document.activeElement;if(y&&b){const T=g.currentTarget,[w,S]=Yu(T);w&&S?!g.shiftKey&&b===S?(g.preventDefault(),r&&Ue(w,{select:!0})):g.shiftKey&&b===w&&(g.preventDefault(),r&&Ue(S,{select:!0})):b===T&&g.preventDefault()}},[r,n,p.paused]);return d.jsx(B.div,{tabIndex:-1,...i,ref:m,onKeyDown:v})});ei.displayName=Hu;function qu(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Ue(n,{select:t}),document.activeElement!==r)return}function Yu(e){const t=ti(e),r=ea(t,e),n=ea(t.reverse(),e);return[r,n]}function ti(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function ea(e,t){for(const r of e)if(!Ju(r,{upTo:t}))return r}function Ju(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Gu(e){return e instanceof HTMLInputElement&&"select"in e}function Ue(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&Gu(e)&&t&&e.select()}}var ta=Ku();function Ku(){let e=[];return{add(t){const r=e[0];t!==r&&r?.pause(),e=ra(e,t),e.unshift(t)},remove(t){e=ra(e,t),e[0]?.resume()}}}function ra(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function Xu(e){return e.filter(t=>t.tagName!=="A")}var Be=globalThis?.document?l.useLayoutEffect:()=>{},Qu=Vc.useId||(()=>{}),el=0;function ar(e){const[t,r]=l.useState(Qu());return Be(()=>{r(n=>n??String(el++))},[e]),t?`radix-${t}`:""}const tl=["top","right","bottom","left"],We=Math.min,de=Math.max,lr=Math.round,Kt=Math.floor,Pe=e=>({x:e,y:e}),rl={left:"right",right:"left",bottom:"top",top:"bottom"},nl={start:"end",end:"start"};function on(e,t,r){return de(e,We(t,r))}function $e(e,t){return typeof e=="function"?e(t):e}function Fe(e){return e.split("-")[0]}function xt(e){return e.split("-")[1]}function Nn(e){return e==="x"?"y":"x"}function Mn(e){return e==="y"?"height":"width"}function Ve(e){return["top","bottom"].includes(Fe(e))?"y":"x"}function In(e){return Nn(Ve(e))}function sl(e,t,r){r===void 0&&(r=!1);const n=xt(e),s=In(e),a=Mn(s);let i=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(i=dr(i)),[i,dr(i)]}function al(e){const t=dr(e);return[cn(e),t,cn(t)]}function cn(e){return e.replace(/start|end/g,t=>nl[t])}function il(e,t,r){const n=["left","right"],s=["right","left"],a=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return r?t?s:n:t?n:s;case"left":case"right":return t?a:i;default:return[]}}function ol(e,t,r,n){const s=xt(e);let a=il(Fe(e),r==="start",n);return s&&(a=a.map(i=>i+"-"+s),t&&(a=a.concat(a.map(cn)))),a}function dr(e){return e.replace(/left|right|bottom|top/g,t=>rl[t])}function cl(e){return{top:0,right:0,bottom:0,left:0,...e}}function ri(e){return typeof e!="number"?cl(e):{top:e,right:e,bottom:e,left:e}}function hr(e){const{x:t,y:r,width:n,height:s}=e;return{width:n,height:s,top:r,left:t,right:t+n,bottom:r+s,x:t,y:r}}function na(e,t,r){let{reference:n,floating:s}=e;const a=Ve(t),i=In(t),o=Mn(i),u=Fe(t),c=a==="y",h=n.x+n.width/2-s.width/2,f=n.y+n.height/2-s.height/2,m=n[o]/2-s[o]/2;let p;switch(u){case"top":p={x:h,y:n.y-s.height};break;case"bottom":p={x:h,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:f};break;case"left":p={x:n.x-s.width,y:f};break;default:p={x:n.x,y:n.y}}switch(xt(t)){case"start":p[i]-=m*(r&&c?-1:1);break;case"end":p[i]+=m*(r&&c?-1:1);break}return p}const ul=async(e,t,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:a=[],platform:i}=r,o=a.filter(Boolean),u=await(i.isRTL==null?void 0:i.isRTL(t));let c=await i.getElementRects({reference:e,floating:t,strategy:s}),{x:h,y:f}=na(c,n,u),m=n,p={},v=0;for(let g=0;g<o.length;g++){const{name:y,fn:b}=o[g],{x:T,y:w,data:S,reset:C}=await b({x:h,y:f,initialPlacement:n,placement:m,strategy:s,middlewareData:p,rects:c,platform:i,elements:{reference:e,floating:t}});h=T??h,f=w??f,p={...p,[y]:{...p[y],...S}},C&&v<=50&&(v++,typeof C=="object"&&(C.placement&&(m=C.placement),C.rects&&(c=C.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:s}):C.rects),{x:h,y:f}=na(c,m,u)),g=-1)}return{x:h,y:f,placement:m,strategy:s,middlewareData:p}};async function Et(e,t){var r;t===void 0&&(t={});const{x:n,y:s,platform:a,rects:i,elements:o,strategy:u}=e,{boundary:c="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:m=!1,padding:p=0}=$e(t,e),v=ri(p),y=o[m?f==="floating"?"reference":"floating":f],b=hr(await a.getClippingRect({element:(r=await(a.isElement==null?void 0:a.isElement(y)))==null||r?y:y.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(o.floating)),boundary:c,rootBoundary:h,strategy:u})),T=f==="floating"?{x:n,y:s,width:i.floating.width,height:i.floating.height}:i.reference,w=await(a.getOffsetParent==null?void 0:a.getOffsetParent(o.floating)),S=await(a.isElement==null?void 0:a.isElement(w))?await(a.getScale==null?void 0:a.getScale(w))||{x:1,y:1}:{x:1,y:1},C=hr(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:T,offsetParent:w,strategy:u}):T);return{top:(b.top-C.top+v.top)/S.y,bottom:(C.bottom-b.bottom+v.bottom)/S.y,left:(b.left-C.left+v.left)/S.x,right:(C.right-b.right+v.right)/S.x}}const ll=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:s,rects:a,platform:i,elements:o,middlewareData:u}=t,{element:c,padding:h=0}=$e(e,t)||{};if(c==null)return{};const f=ri(h),m={x:r,y:n},p=In(s),v=Mn(p),g=await i.getDimensions(c),y=p==="y",b=y?"top":"left",T=y?"bottom":"right",w=y?"clientHeight":"clientWidth",S=a.reference[v]+a.reference[p]-m[p]-a.floating[v],C=m[p]-a.reference[p],A=await(i.getOffsetParent==null?void 0:i.getOffsetParent(c));let P=A?A[w]:0;(!P||!await(i.isElement==null?void 0:i.isElement(A)))&&(P=o.floating[w]||a.floating[v]);const Z=S/2-C/2,H=P/2-g[v]/2-1,W=We(f[b],H),Q=We(f[T],H),ee=W,q=P-g[v]-Q,V=P/2-g[v]/2+Z,me=on(ee,V,q),Y=!u.arrow&&xt(s)!=null&&V!==me&&a.reference[v]/2-(V<ee?W:Q)-g[v]/2<0,J=Y?V<ee?V-ee:V-q:0;return{[p]:m[p]+J,data:{[p]:me,centerOffset:V-me-J,...Y&&{alignmentOffset:J}},reset:Y}}}),dl=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:s,middlewareData:a,rects:i,initialPlacement:o,platform:u,elements:c}=t,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:g=!0,...y}=$e(e,t);if((r=a.arrow)!=null&&r.alignmentOffset)return{};const b=Fe(s),T=Ve(o),w=Fe(o)===o,S=await(u.isRTL==null?void 0:u.isRTL(c.floating)),C=m||(w||!g?[dr(o)]:al(o)),A=v!=="none";!m&&A&&C.push(...ol(o,g,v,S));const P=[o,...C],Z=await Et(t,y),H=[];let W=((n=a.flip)==null?void 0:n.overflows)||[];if(h&&H.push(Z[b]),f){const V=sl(s,i,S);H.push(Z[V[0]],Z[V[1]])}if(W=[...W,{placement:s,overflows:H}],!H.every(V=>V<=0)){var Q,ee;const V=(((Q=a.flip)==null?void 0:Q.index)||0)+1,me=P[V];if(me)return{data:{index:V,overflows:W},reset:{placement:me}};let Y=(ee=W.filter(J=>J.overflows[0]<=0).sort((J,L)=>J.overflows[1]-L.overflows[1])[0])==null?void 0:ee.placement;if(!Y)switch(p){case"bestFit":{var q;const J=(q=W.filter(L=>{if(A){const G=Ve(L.placement);return G===T||G==="y"}return!0}).map(L=>[L.placement,L.overflows.filter(G=>G>0).reduce((G,Ae)=>G+Ae,0)]).sort((L,G)=>L[1]-G[1])[0])==null?void 0:q[0];J&&(Y=J);break}case"initialPlacement":Y=o;break}if(s!==Y)return{reset:{placement:Y}}}return{}}}};function sa(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function aa(e){return tl.some(t=>e[t]>=0)}const hl=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...s}=$e(e,t);switch(n){case"referenceHidden":{const a=await Et(t,{...s,elementContext:"reference"}),i=sa(a,r.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:aa(i)}}}case"escaped":{const a=await Et(t,{...s,altBoundary:!0}),i=sa(a,r.floating);return{data:{escapedOffsets:i,escaped:aa(i)}}}default:return{}}}}};async function fl(e,t){const{placement:r,platform:n,elements:s}=e,a=await(n.isRTL==null?void 0:n.isRTL(s.floating)),i=Fe(r),o=xt(r),u=Ve(r)==="y",c=["left","top"].includes(i)?-1:1,h=a&&u?-1:1,f=$e(t,e);let{mainAxis:m,crossAxis:p,alignmentAxis:v}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return o&&typeof v=="number"&&(p=o==="end"?v*-1:v),u?{x:p*h,y:m*c}:{x:m*c,y:p*h}}const pl=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:s,y:a,placement:i,middlewareData:o}=t,u=await fl(t,e);return i===((r=o.offset)==null?void 0:r.placement)&&(n=o.arrow)!=null&&n.alignmentOffset?{}:{x:s+u.x,y:a+u.y,data:{...u,placement:i}}}}},ml=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:s}=t,{mainAxis:a=!0,crossAxis:i=!1,limiter:o={fn:y=>{let{x:b,y:T}=y;return{x:b,y:T}}},...u}=$e(e,t),c={x:r,y:n},h=await Et(t,u),f=Ve(Fe(s)),m=Nn(f);let p=c[m],v=c[f];if(a){const y=m==="y"?"top":"left",b=m==="y"?"bottom":"right",T=p+h[y],w=p-h[b];p=on(T,p,w)}if(i){const y=f==="y"?"top":"left",b=f==="y"?"bottom":"right",T=v+h[y],w=v-h[b];v=on(T,v,w)}const g=o.fn({...t,[m]:p,[f]:v});return{...g,data:{x:g.x-r,y:g.y-n,enabled:{[m]:a,[f]:i}}}}}},gl=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:s,rects:a,middlewareData:i}=t,{offset:o=0,mainAxis:u=!0,crossAxis:c=!0}=$e(e,t),h={x:r,y:n},f=Ve(s),m=Nn(f);let p=h[m],v=h[f];const g=$e(o,t),y=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(u){const w=m==="y"?"height":"width",S=a.reference[m]-a.floating[w]+y.mainAxis,C=a.reference[m]+a.reference[w]-y.mainAxis;p<S?p=S:p>C&&(p=C)}if(c){var b,T;const w=m==="y"?"width":"height",S=["top","left"].includes(Fe(s)),C=a.reference[f]-a.floating[w]+(S&&((b=i.offset)==null?void 0:b[f])||0)+(S?0:y.crossAxis),A=a.reference[f]+a.reference[w]+(S?0:((T=i.offset)==null?void 0:T[f])||0)-(S?y.crossAxis:0);v<C?v=C:v>A&&(v=A)}return{[m]:p,[f]:v}}}},vl=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:s,rects:a,platform:i,elements:o}=t,{apply:u=()=>{},...c}=$e(e,t),h=await Et(t,c),f=Fe(s),m=xt(s),p=Ve(s)==="y",{width:v,height:g}=a.floating;let y,b;f==="top"||f==="bottom"?(y=f,b=m===(await(i.isRTL==null?void 0:i.isRTL(o.floating))?"start":"end")?"left":"right"):(b=f,y=m==="end"?"top":"bottom");const T=g-h.top-h.bottom,w=v-h.left-h.right,S=We(g-h[y],T),C=We(v-h[b],w),A=!t.middlewareData.shift;let P=S,Z=C;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(Z=w),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(P=T),A&&!m){const W=de(h.left,0),Q=de(h.right,0),ee=de(h.top,0),q=de(h.bottom,0);p?Z=v-2*(W!==0||Q!==0?W+Q:de(h.left,h.right)):P=g-2*(ee!==0||q!==0?ee+q:de(h.top,h.bottom))}await u({...t,availableWidth:Z,availableHeight:P});const H=await i.getDimensions(o.floating);return v!==H.width||g!==H.height?{reset:{rects:!0}}:{}}}};function Rr(){return typeof window<"u"}function _t(e){return ni(e)?(e.nodeName||"").toLowerCase():"#document"}function he(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function je(e){var t;return(t=(ni(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function ni(e){return Rr()?e instanceof Node||e instanceof he(e).Node:!1}function we(e){return Rr()?e instanceof Element||e instanceof he(e).Element:!1}function Me(e){return Rr()?e instanceof HTMLElement||e instanceof he(e).HTMLElement:!1}function ia(e){return!Rr()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof he(e).ShadowRoot}function qt(e){const{overflow:t,overflowX:r,overflowY:n,display:s}=Se(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(s)}function yl(e){return["table","td","th"].includes(_t(e))}function Pr(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function On(e){const t=jn(),r=we(e)?Se(e):e;return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function bl(e){let t=He(e);for(;Me(t)&&!pt(t);){if(On(t))return t;if(Pr(t))return null;t=He(t)}return null}function jn(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function pt(e){return["html","body","#document"].includes(_t(e))}function Se(e){return he(e).getComputedStyle(e)}function Nr(e){return we(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function He(e){if(_t(e)==="html")return e;const t=e.assignedSlot||e.parentNode||ia(e)&&e.host||je(e);return ia(t)?t.host:t}function si(e){const t=He(e);return pt(t)?e.ownerDocument?e.ownerDocument.body:e.body:Me(t)&&qt(t)?t:si(t)}function kt(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const s=si(e),a=s===((n=e.ownerDocument)==null?void 0:n.body),i=he(s);if(a){const o=un(i);return t.concat(i,i.visualViewport||[],qt(s)?s:[],o&&r?kt(o):[])}return t.concat(s,kt(s,[],r))}function un(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function ai(e){const t=Se(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=Me(e),a=s?e.offsetWidth:r,i=s?e.offsetHeight:n,o=lr(r)!==a||lr(n)!==i;return o&&(r=a,n=i),{width:r,height:n,$:o}}function Dn(e){return we(e)?e:e.contextElement}function dt(e){const t=Dn(e);if(!Me(t))return Pe(1);const r=t.getBoundingClientRect(),{width:n,height:s,$:a}=ai(t);let i=(a?lr(r.width):r.width)/n,o=(a?lr(r.height):r.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!o||!Number.isFinite(o))&&(o=1),{x:i,y:o}}const xl=Pe(0);function ii(e){const t=he(e);return!jn()||!t.visualViewport?xl:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function _l(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==he(e)?!1:t}function rt(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const s=e.getBoundingClientRect(),a=Dn(e);let i=Pe(1);t&&(n?we(n)&&(i=dt(n)):i=dt(e));const o=_l(a,r,n)?ii(a):Pe(0);let u=(s.left+o.x)/i.x,c=(s.top+o.y)/i.y,h=s.width/i.x,f=s.height/i.y;if(a){const m=he(a),p=n&&we(n)?he(n):n;let v=m,g=un(v);for(;g&&n&&p!==v;){const y=dt(g),b=g.getBoundingClientRect(),T=Se(g),w=b.left+(g.clientLeft+parseFloat(T.paddingLeft))*y.x,S=b.top+(g.clientTop+parseFloat(T.paddingTop))*y.y;u*=y.x,c*=y.y,h*=y.x,f*=y.y,u+=w,c+=S,v=he(g),g=un(v)}}return hr({width:h,height:f,x:u,y:c})}function Ln(e,t){const r=Nr(e).scrollLeft;return t?t.left+r:rt(je(e)).left+r}function oi(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),s=n.left+t.scrollLeft-(r?0:Ln(e,n)),a=n.top+t.scrollTop;return{x:s,y:a}}function wl(e){let{elements:t,rect:r,offsetParent:n,strategy:s}=e;const a=s==="fixed",i=je(n),o=t?Pr(t.floating):!1;if(n===i||o&&a)return r;let u={scrollLeft:0,scrollTop:0},c=Pe(1);const h=Pe(0),f=Me(n);if((f||!f&&!a)&&((_t(n)!=="body"||qt(i))&&(u=Nr(n)),Me(n))){const p=rt(n);c=dt(n),h.x=p.x+n.clientLeft,h.y=p.y+n.clientTop}const m=i&&!f&&!a?oi(i,u,!0):Pe(0);return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-u.scrollLeft*c.x+h.x+m.x,y:r.y*c.y-u.scrollTop*c.y+h.y+m.y}}function Sl(e){return Array.from(e.getClientRects())}function Cl(e){const t=je(e),r=Nr(e),n=e.ownerDocument.body,s=de(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),a=de(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let i=-r.scrollLeft+Ln(e);const o=-r.scrollTop;return Se(n).direction==="rtl"&&(i+=de(t.clientWidth,n.clientWidth)-s),{width:s,height:a,x:i,y:o}}function Tl(e,t){const r=he(e),n=je(e),s=r.visualViewport;let a=n.clientWidth,i=n.clientHeight,o=0,u=0;if(s){a=s.width,i=s.height;const c=jn();(!c||c&&t==="fixed")&&(o=s.offsetLeft,u=s.offsetTop)}return{width:a,height:i,x:o,y:u}}function El(e,t){const r=rt(e,!0,t==="fixed"),n=r.top+e.clientTop,s=r.left+e.clientLeft,a=Me(e)?dt(e):Pe(1),i=e.clientWidth*a.x,o=e.clientHeight*a.y,u=s*a.x,c=n*a.y;return{width:i,height:o,x:u,y:c}}function oa(e,t,r){let n;if(t==="viewport")n=Tl(e,r);else if(t==="document")n=Cl(je(e));else if(we(t))n=El(t,r);else{const s=ii(e);n={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return hr(n)}function ci(e,t){const r=He(e);return r===t||!we(r)||pt(r)?!1:Se(r).position==="fixed"||ci(r,t)}function kl(e,t){const r=t.get(e);if(r)return r;let n=kt(e,[],!1).filter(o=>we(o)&&_t(o)!=="body"),s=null;const a=Se(e).position==="fixed";let i=a?He(e):e;for(;we(i)&&!pt(i);){const o=Se(i),u=On(i);!u&&o.position==="fixed"&&(s=null),(a?!u&&!s:!u&&o.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||qt(i)&&!u&&ci(e,i))?n=n.filter(h=>h!==i):s=o,i=He(i)}return t.set(e,n),n}function Al(e){let{element:t,boundary:r,rootBoundary:n,strategy:s}=e;const i=[...r==="clippingAncestors"?Pr(t)?[]:kl(t,this._c):[].concat(r),n],o=i[0],u=i.reduce((c,h)=>{const f=oa(t,h,s);return c.top=de(f.top,c.top),c.right=We(f.right,c.right),c.bottom=We(f.bottom,c.bottom),c.left=de(f.left,c.left),c},oa(t,o,s));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function Rl(e){const{width:t,height:r}=ai(e);return{width:t,height:r}}function Pl(e,t,r){const n=Me(t),s=je(t),a=r==="fixed",i=rt(e,!0,a,t);let o={scrollLeft:0,scrollTop:0};const u=Pe(0);if(n||!n&&!a)if((_t(t)!=="body"||qt(s))&&(o=Nr(t)),n){const m=rt(t,!0,a,t);u.x=m.x+t.clientLeft,u.y=m.y+t.clientTop}else s&&(u.x=Ln(s));const c=s&&!n&&!a?oi(s,o):Pe(0),h=i.left+o.scrollLeft-u.x-c.x,f=i.top+o.scrollTop-u.y-c.y;return{x:h,y:f,width:i.width,height:i.height}}function Vr(e){return Se(e).position==="static"}function ca(e,t){if(!Me(e)||Se(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return je(e)===r&&(r=r.ownerDocument.body),r}function ui(e,t){const r=he(e);if(Pr(e))return r;if(!Me(e)){let s=He(e);for(;s&&!pt(s);){if(we(s)&&!Vr(s))return s;s=He(s)}return r}let n=ca(e,t);for(;n&&yl(n)&&Vr(n);)n=ca(n,t);return n&&pt(n)&&Vr(n)&&!On(n)?r:n||bl(e)||r}const Nl=async function(e){const t=this.getOffsetParent||ui,r=this.getDimensions,n=await r(e.floating);return{reference:Pl(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function Ml(e){return Se(e).direction==="rtl"}const Il={convertOffsetParentRelativeRectToViewportRelativeRect:wl,getDocumentElement:je,getClippingRect:Al,getOffsetParent:ui,getElementRects:Nl,getClientRects:Sl,getDimensions:Rl,getScale:dt,isElement:we,isRTL:Ml};function Ol(e,t){let r=null,n;const s=je(e);function a(){var o;clearTimeout(n),(o=r)==null||o.disconnect(),r=null}function i(o,u){o===void 0&&(o=!1),u===void 0&&(u=1),a();const{left:c,top:h,width:f,height:m}=e.getBoundingClientRect();if(o||t(),!f||!m)return;const p=Kt(h),v=Kt(s.clientWidth-(c+f)),g=Kt(s.clientHeight-(h+m)),y=Kt(c),T={rootMargin:-p+"px "+-v+"px "+-g+"px "+-y+"px",threshold:de(0,We(1,u))||1};let w=!0;function S(C){const A=C[0].intersectionRatio;if(A!==u){if(!w)return i();A?i(!1,A):n=setTimeout(()=>{i(!1,1e-7)},1e3)}w=!1}try{r=new IntersectionObserver(S,{...T,root:s.ownerDocument})}catch{r=new IntersectionObserver(S,T)}r.observe(e)}return i(!0),a}function jl(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:u=!1}=n,c=Dn(e),h=s||a?[...c?kt(c):[],...kt(t)]:[];h.forEach(b=>{s&&b.addEventListener("scroll",r,{passive:!0}),a&&b.addEventListener("resize",r)});const f=c&&o?Ol(c,r):null;let m=-1,p=null;i&&(p=new ResizeObserver(b=>{let[T]=b;T&&T.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var w;(w=p)==null||w.observe(t)})),r()}),c&&!u&&p.observe(c),p.observe(t));let v,g=u?rt(e):null;u&&y();function y(){const b=rt(e);g&&(b.x!==g.x||b.y!==g.y||b.width!==g.width||b.height!==g.height)&&r(),g=b,v=requestAnimationFrame(y)}return r(),()=>{var b;h.forEach(T=>{s&&T.removeEventListener("scroll",r),a&&T.removeEventListener("resize",r)}),f?.(),(b=p)==null||b.disconnect(),p=null,u&&cancelAnimationFrame(v)}}const Dl=pl,Ll=ml,Bl=dl,$l=vl,Fl=hl,ua=ll,Zl=gl,Ul=(e,t,r)=>{const n=new Map,s={platform:Il,...r},a={...s.platform,_c:n};return ul(e,t,{...s,platform:a})};var ir=typeof document<"u"?l.useLayoutEffect:l.useEffect;function fr(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!fr(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=r;n--!==0;){const a=s[n];if(!(a==="_owner"&&e.$$typeof)&&!fr(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function li(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function la(e,t){const r=li(e);return Math.round(t*r)/r}function Hr(e){const t=l.useRef(e);return ir(()=>{t.current=e}),t}function zl(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:a,floating:i}={},transform:o=!0,whileElementsMounted:u,open:c}=e,[h,f]=l.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[m,p]=l.useState(n);fr(m,n)||p(n);const[v,g]=l.useState(null),[y,b]=l.useState(null),T=l.useCallback(L=>{L!==A.current&&(A.current=L,g(L))},[]),w=l.useCallback(L=>{L!==P.current&&(P.current=L,b(L))},[]),S=a||v,C=i||y,A=l.useRef(null),P=l.useRef(null),Z=l.useRef(h),H=u!=null,W=Hr(u),Q=Hr(s),ee=Hr(c),q=l.useCallback(()=>{if(!A.current||!P.current)return;const L={placement:t,strategy:r,middleware:m};Q.current&&(L.platform=Q.current),Ul(A.current,P.current,L).then(G=>{const Ae={...G,isPositioned:ee.current!==!1};V.current&&!fr(Z.current,Ae)&&(Z.current=Ae,En.flushSync(()=>{f(Ae)}))})},[m,t,r,Q,ee]);ir(()=>{c===!1&&Z.current.isPositioned&&(Z.current.isPositioned=!1,f(L=>({...L,isPositioned:!1})))},[c]);const V=l.useRef(!1);ir(()=>(V.current=!0,()=>{V.current=!1}),[]),ir(()=>{if(S&&(A.current=S),C&&(P.current=C),S&&C){if(W.current)return W.current(S,C,q);q()}},[S,C,q,W,H]);const me=l.useMemo(()=>({reference:A,floating:P,setReference:T,setFloating:w}),[T,w]),Y=l.useMemo(()=>({reference:S,floating:C}),[S,C]),J=l.useMemo(()=>{const L={position:r,left:0,top:0};if(!Y.floating)return L;const G=la(Y.floating,h.x),Ae=la(Y.floating,h.y);return o?{...L,transform:"translate("+G+"px, "+Ae+"px)",...li(Y.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:G,top:Ae}},[r,o,Y.floating,h.x,h.y]);return l.useMemo(()=>({...h,update:q,refs:me,elements:Y,floatingStyles:J}),[h,q,me,Y,J])}const Wl=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:s}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?ua({element:n.current,padding:s}).fn(r):{}:n?ua({element:n,padding:s}).fn(r):{}}}},Vl=(e,t)=>({...Dl(e),options:[e,t]}),Hl=(e,t)=>({...Ll(e),options:[e,t]}),ql=(e,t)=>({...Zl(e),options:[e,t]}),Yl=(e,t)=>({...Bl(e),options:[e,t]}),Jl=(e,t)=>({...$l(e),options:[e,t]}),Gl=(e,t)=>({...Fl(e),options:[e,t]}),Kl=(e,t)=>({...Wl(e),options:[e,t]});var Xl="Arrow",di=l.forwardRef((e,t)=>{const{children:r,width:n=10,height:s=5,...a}=e;return d.jsx(B.svg,{...a,ref:t,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:d.jsx("polygon",{points:"0,0 30,0 15,10"})})});di.displayName=Xl;var Ql=di;function ed(e,t=[]){let r=[];function n(a,i){const o=l.createContext(i),u=r.length;r=[...r,i];function c(f){const{scope:m,children:p,...v}=f,g=m?.[e][u]||o,y=l.useMemo(()=>v,Object.values(v));return d.jsx(g.Provider,{value:y,children:p})}function h(f,m){const p=m?.[e][u]||o,v=l.useContext(p);if(v)return v;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${a}\``)}return c.displayName=a+"Provider",[c,h]}const s=()=>{const a=r.map(i=>l.createContext(i));return function(o){const u=o?.[e]||a;return l.useMemo(()=>({[`__scope${e}`]:{...o,[e]:u}}),[o,u])}};return s.scopeName=e,[n,td(s,...t)]}function td(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const i=n.reduce((o,{useScope:u,scopeName:c})=>{const f=u(a)[`__scope${c}`];return{...o,...f}},{});return l.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}function rd(e){const[t,r]=l.useState(void 0);return Be(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let i,o;if("borderBoxSize"in a){const u=a.borderBoxSize,c=Array.isArray(u)?u[0]:u;i=c.inlineSize,o=c.blockSize}else i=e.offsetWidth,o=e.offsetHeight;r({width:i,height:o})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var Bn="Popper",[hi,fi]=ed(Bn),[nd,pi]=hi(Bn),mi=e=>{const{__scopePopper:t,children:r}=e,[n,s]=l.useState(null);return d.jsx(nd,{scope:t,anchor:n,onAnchorChange:s,children:r})};mi.displayName=Bn;var gi="PopperAnchor",vi=l.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...s}=e,a=pi(gi,r),i=l.useRef(null),o=ae(t,i);return l.useEffect(()=>{a.onAnchorChange(n?.current||i.current)}),n?null:d.jsx(B.div,{...s,ref:o})});vi.displayName=gi;var $n="PopperContent",[sd,ad]=hi($n),yi=l.forwardRef((e,t)=>{const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:a="center",alignOffset:i=0,arrowPadding:o=0,avoidCollisions:u=!0,collisionBoundary:c=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:p="optimized",onPlaced:v,...g}=e,y=pi($n,r),[b,T]=l.useState(null),w=ae(t,wt=>T(wt)),[S,C]=l.useState(null),A=rd(S),P=A?.width??0,Z=A?.height??0,H=n+(a!=="center"?"-"+a:""),W=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},Q=Array.isArray(c)?c:[c],ee=Q.length>0,q={padding:W,boundary:Q.filter(od),altBoundary:ee},{refs:V,floatingStyles:me,placement:Y,isPositioned:J,middlewareData:L}=zl({strategy:"fixed",placement:H,whileElementsMounted:(...wt)=>jl(...wt,{animationFrame:p==="always"}),elements:{reference:y.anchor},middleware:[Vl({mainAxis:s+Z,alignmentAxis:i}),u&&Hl({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?ql():void 0,...q}),u&&Yl({...q}),Jl({...q,apply:({elements:wt,rects:Hs,availableWidth:Zc,availableHeight:Uc})=>{const{width:zc,height:Wc}=Hs.reference,Gt=wt.floating.style;Gt.setProperty("--radix-popper-available-width",`${Zc}px`),Gt.setProperty("--radix-popper-available-height",`${Uc}px`),Gt.setProperty("--radix-popper-anchor-width",`${zc}px`),Gt.setProperty("--radix-popper-anchor-height",`${Wc}px`)}}),S&&Kl({element:S,padding:o}),cd({arrowWidth:P,arrowHeight:Z}),m&&Gl({strategy:"referenceHidden",...q})]}),[G,Ae]=_i(Y),Vs=ve(v);Be(()=>{J&&Vs?.()},[J,Vs]);const Dc=L.arrow?.x,Lc=L.arrow?.y,Bc=L.arrow?.centerOffset!==0,[$c,Fc]=l.useState();return Be(()=>{b&&Fc(window.getComputedStyle(b).zIndex)},[b]),d.jsx("div",{ref:V.setFloating,"data-radix-popper-content-wrapper":"",style:{...me,transform:J?me.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:$c,"--radix-popper-transform-origin":[L.transformOrigin?.x,L.transformOrigin?.y].join(" "),...L.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:d.jsx(sd,{scope:r,placedSide:G,onArrowChange:C,arrowX:Dc,arrowY:Lc,shouldHideArrow:Bc,children:d.jsx(B.div,{"data-side":G,"data-align":Ae,...g,ref:w,style:{...g.style,animation:J?void 0:"none"}})})})});yi.displayName=$n;var bi="PopperArrow",id={top:"bottom",right:"left",bottom:"top",left:"right"},xi=l.forwardRef(function(t,r){const{__scopePopper:n,...s}=t,a=ad(bi,n),i=id[a.placedSide];return d.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:d.jsx(Ql,{...s,ref:r,style:{...s.style,display:"block"}})})});xi.displayName=bi;function od(e){return e!==null}var cd=e=>({name:"transformOrigin",options:e,fn(t){const{placement:r,rects:n,middlewareData:s}=t,i=s.arrow?.centerOffset!==0,o=i?0:e.arrowWidth,u=i?0:e.arrowHeight,[c,h]=_i(r),f={start:"0%",center:"50%",end:"100%"}[h],m=(s.arrow?.x??0)+o/2,p=(s.arrow?.y??0)+u/2;let v="",g="";return c==="bottom"?(v=i?f:`${m}px`,g=`${-u}px`):c==="top"?(v=i?f:`${m}px`,g=`${n.floating.height+u}px`):c==="right"?(v=`${-u}px`,g=i?f:`${p}px`):c==="left"&&(v=`${n.floating.width+u}px`,g=i?f:`${p}px`),{data:{x:v,y:g}}}});function _i(e){const[t,r="center"]=e.split("-");return[t,r]}var ud=mi,ld=vi,dd=yi,hd=xi,fd="Portal",wi=l.forwardRef((e,t)=>{const{container:r,...n}=e,[s,a]=l.useState(!1);Be(()=>a(!0),[]);const i=r||s&&globalThis?.document?.body;return i?_u.createPortal(d.jsx(B.div,{...n,ref:t}),i):null});wi.displayName=fd;function pd(e,t){return l.useReducer((r,n)=>t[r][n]??r,e)}var Yt=e=>{const{present:t,children:r}=e,n=md(t),s=typeof r=="function"?r({present:n.isPresent}):l.Children.only(r),a=ae(n.ref,gd(s));return typeof r=="function"||n.isPresent?l.cloneElement(s,{ref:a}):null};Yt.displayName="Presence";function md(e){const[t,r]=l.useState(),n=l.useRef({}),s=l.useRef(e),a=l.useRef("none"),i=e?"mounted":"unmounted",[o,u]=pd(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return l.useEffect(()=>{const c=Xt(n.current);a.current=o==="mounted"?c:"none"},[o]),Be(()=>{const c=n.current,h=s.current;if(h!==e){const m=a.current,p=Xt(c);e?u("MOUNT"):p==="none"||c?.display==="none"?u("UNMOUNT"):u(h&&m!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,u]),Be(()=>{if(t){let c;const h=t.ownerDocument.defaultView??window,f=p=>{const g=Xt(n.current).includes(p.animationName);if(p.target===t&&g&&(u("ANIMATION_END"),!s.current)){const y=t.style.animationFillMode;t.style.animationFillMode="forwards",c=h.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=y)})}},m=p=>{p.target===t&&(a.current=Xt(n.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{h.clearTimeout(c),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:l.useCallback(c=>{c&&(n.current=getComputedStyle(c)),r(c)},[])}}function Xt(e){return e?.animationName||"none"}function gd(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Si({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,s]=vd({defaultProp:t,onChange:r}),a=e!==void 0,i=a?e:n,o=ve(r),u=l.useCallback(c=>{if(a){const f=typeof c=="function"?c(e):c;f!==e&&o(f)}else s(c)},[a,e,s,o]);return[i,u]}function vd({defaultProp:e,onChange:t}){const r=l.useState(e),[n]=r,s=l.useRef(n),a=ve(t);return l.useEffect(()=>{s.current!==n&&(a(n),s.current=n)},[n,s,a]),r}var yd=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},it=new WeakMap,Qt=new WeakMap,er={},qr=0,Ci=function(e){return e&&(e.host||Ci(e.parentNode))},bd=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=Ci(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},xd=function(e,t,r,n){var s=bd(t,Array.isArray(e)?e:[e]);er[r]||(er[r]=new WeakMap);var a=er[r],i=[],o=new Set,u=new Set(s),c=function(f){!f||o.has(f)||(o.add(f),c(f.parentNode))};s.forEach(c);var h=function(f){!f||u.has(f)||Array.prototype.forEach.call(f.children,function(m){if(o.has(m))h(m);else try{var p=m.getAttribute(n),v=p!==null&&p!=="false",g=(it.get(m)||0)+1,y=(a.get(m)||0)+1;it.set(m,g),a.set(m,y),i.push(m),g===1&&v&&Qt.set(m,!0),y===1&&m.setAttribute(r,"true"),v||m.setAttribute(n,"true")}catch(b){console.error("aria-hidden: cannot operate on ",m,b)}})};return h(t),o.clear(),qr++,function(){i.forEach(function(f){var m=it.get(f)-1,p=a.get(f)-1;it.set(f,m),a.set(f,p),m||(Qt.has(f)||f.removeAttribute(n),Qt.delete(f)),p||f.removeAttribute(r)}),qr--,qr||(it=new WeakMap,it=new WeakMap,Qt=new WeakMap,er={})}},_d=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),s=yd(e);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live]"))),xd(n,s,r,"aria-hidden")):function(){return null}},Re=function(){return Re=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Re.apply(this,arguments)};function Ti(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function wd(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,a;n<s;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}var or="right-scroll-bar-position",cr="width-before-scroll-bar",Sd="with-scroll-bars-hidden",Cd="--removed-body-scroll-bar-size";function Yr(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Td(e,t){var r=l.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=t,r.facade}var Ed=typeof window<"u"?l.useLayoutEffect:l.useEffect,da=new WeakMap;function kd(e,t){var r=Td(null,function(n){return e.forEach(function(s){return Yr(s,n)})});return Ed(function(){var n=da.get(r);if(n){var s=new Set(n),a=new Set(e),i=r.current;s.forEach(function(o){a.has(o)||Yr(o,null)}),a.forEach(function(o){s.has(o)||Yr(o,i)})}da.set(r,e)},[e]),r}function Ad(e){return e}function Rd(e,t){t===void 0&&(t=Ad);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(a){var i=t(a,n);return r.push(i),function(){r=r.filter(function(o){return o!==i})}},assignSyncMedium:function(a){for(n=!0;r.length;){var i=r;r=[],i.forEach(a)}r={push:function(o){return a(o)},filter:function(){return r}}},assignMedium:function(a){n=!0;var i=[];if(r.length){var o=r;r=[],o.forEach(a),i=r}var u=function(){var h=i;i=[],h.forEach(a)},c=function(){return Promise.resolve().then(u)};c(),r={push:function(h){i.push(h),c()},filter:function(h){return i=i.filter(h),r}}}};return s}function Pd(e){e===void 0&&(e={});var t=Rd(null);return t.options=Re({async:!0,ssr:!1},e),t}var Ei=function(e){var t=e.sideCar,r=Ti(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return l.createElement(n,Re({},r))};Ei.isSideCarExport=!0;function Nd(e,t){return e.useMedium(t),Ei}var ki=Pd(),Jr=function(){},Mr=l.forwardRef(function(e,t){var r=l.useRef(null),n=l.useState({onScrollCapture:Jr,onWheelCapture:Jr,onTouchMoveCapture:Jr}),s=n[0],a=n[1],i=e.forwardProps,o=e.children,u=e.className,c=e.removeScrollBar,h=e.enabled,f=e.shards,m=e.sideCar,p=e.noIsolation,v=e.inert,g=e.allowPinchZoom,y=e.as,b=y===void 0?"div":y,T=e.gapMode,w=Ti(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=m,C=kd([r,t]),A=Re(Re({},w),s);return l.createElement(l.Fragment,null,h&&l.createElement(S,{sideCar:ki,removeScrollBar:c,shards:f,noIsolation:p,inert:v,setCallbacks:a,allowPinchZoom:!!g,lockRef:r,gapMode:T}),i?l.cloneElement(l.Children.only(o),Re(Re({},A),{ref:C})):l.createElement(b,Re({},A,{className:u,ref:C}),o))});Mr.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Mr.classNames={fullWidth:cr,zeroRight:or};var Md=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Id(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Md();return t&&e.setAttribute("nonce",t),e}function Od(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function jd(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Dd=function(){var e=0,t=null;return{add:function(r){e==0&&(t=Id())&&(Od(t,r),jd(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Ld=function(){var e=Dd();return function(t,r){l.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},Ai=function(){var e=Ld(),t=function(r){var n=r.styles,s=r.dynamic;return e(n,s),null};return t},Bd={left:0,top:0,right:0,gap:0},Gr=function(e){return parseInt(e||"",10)||0},$d=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[Gr(r),Gr(n),Gr(s)]},Fd=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Bd;var t=$d(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},Zd=Ai(),ht="data-scroll-locked",Ud=function(e,t,r,n){var s=e.left,a=e.top,i=e.right,o=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(Sd,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(o,"px ").concat(n,`;
  }
  body[`).concat(ht,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(o,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(or,` {
    right: `).concat(o,"px ").concat(n,`;
  }
  
  .`).concat(cr,` {
    margin-right: `).concat(o,"px ").concat(n,`;
  }
  
  .`).concat(or," .").concat(or,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(cr," .").concat(cr,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(ht,`] {
    `).concat(Cd,": ").concat(o,`px;
  }
`)},ha=function(){var e=parseInt(document.body.getAttribute(ht)||"0",10);return isFinite(e)?e:0},zd=function(){l.useEffect(function(){return document.body.setAttribute(ht,(ha()+1).toString()),function(){var e=ha()-1;e<=0?document.body.removeAttribute(ht):document.body.setAttribute(ht,e.toString())}},[])},Wd=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,s=n===void 0?"margin":n;zd();var a=l.useMemo(function(){return Fd(s)},[s]);return l.createElement(Zd,{styles:Ud(a,!t,s,r?"":"!important")})},ln=!1;if(typeof window<"u")try{var tr=Object.defineProperty({},"passive",{get:function(){return ln=!0,!0}});window.addEventListener("test",tr,tr),window.removeEventListener("test",tr,tr)}catch{ln=!1}var ot=ln?{}:!1,Vd=function(e){return e.tagName==="TEXTAREA"},Ri=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!Vd(e)&&r[t]==="visible")},Hd=function(e){return Ri(e,"overflowY")},qd=function(e){return Ri(e,"overflowX")},fa=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=Pi(e,n);if(s){var a=Ni(e,n),i=a[1],o=a[2];if(i>o)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},Yd=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},Jd=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},Pi=function(e,t){return e==="v"?Hd(t):qd(t)},Ni=function(e,t){return e==="v"?Yd(t):Jd(t)},Gd=function(e,t){return e==="h"&&t==="rtl"?-1:1},Kd=function(e,t,r,n,s){var a=Gd(e,window.getComputedStyle(t).direction),i=a*n,o=r.target,u=t.contains(o),c=!1,h=i>0,f=0,m=0;do{var p=Ni(e,o),v=p[0],g=p[1],y=p[2],b=g-y-a*v;(v||b)&&Pi(e,o)&&(f+=b,m+=v),o instanceof ShadowRoot?o=o.host:o=o.parentNode}while(!u&&o!==document.body||u&&(t.contains(o)||t===o));return(h&&(Math.abs(f)<1||!s)||!h&&(Math.abs(m)<1||!s))&&(c=!0),c},rr=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},pa=function(e){return[e.deltaX,e.deltaY]},ma=function(e){return e&&"current"in e?e.current:e},Xd=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Qd=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},eh=0,ct=[];function th(e){var t=l.useRef([]),r=l.useRef([0,0]),n=l.useRef(),s=l.useState(eh++)[0],a=l.useState(Ai)[0],i=l.useRef(e);l.useEffect(function(){i.current=e},[e]),l.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var g=wd([e.lockRef.current],(e.shards||[]).map(ma),!0).filter(Boolean);return g.forEach(function(y){return y.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var o=l.useCallback(function(g,y){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!i.current.allowPinchZoom;var b=rr(g),T=r.current,w="deltaX"in g?g.deltaX:T[0]-b[0],S="deltaY"in g?g.deltaY:T[1]-b[1],C,A=g.target,P=Math.abs(w)>Math.abs(S)?"h":"v";if("touches"in g&&P==="h"&&A.type==="range")return!1;var Z=fa(P,A);if(!Z)return!0;if(Z?C=P:(C=P==="v"?"h":"v",Z=fa(P,A)),!Z)return!1;if(!n.current&&"changedTouches"in g&&(w||S)&&(n.current=C),!C)return!0;var H=n.current||C;return Kd(H,y,g,H==="h"?w:S,!0)},[]),u=l.useCallback(function(g){var y=g;if(!(!ct.length||ct[ct.length-1]!==a)){var b="deltaY"in y?pa(y):rr(y),T=t.current.filter(function(C){return C.name===y.type&&(C.target===y.target||y.target===C.shadowParent)&&Xd(C.delta,b)})[0];if(T&&T.should){y.cancelable&&y.preventDefault();return}if(!T){var w=(i.current.shards||[]).map(ma).filter(Boolean).filter(function(C){return C.contains(y.target)}),S=w.length>0?o(y,w[0]):!i.current.noIsolation;S&&y.cancelable&&y.preventDefault()}}},[]),c=l.useCallback(function(g,y,b,T){var w={name:g,delta:y,target:b,should:T,shadowParent:rh(b)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(S){return S!==w})},1)},[]),h=l.useCallback(function(g){r.current=rr(g),n.current=void 0},[]),f=l.useCallback(function(g){c(g.type,pa(g),g.target,o(g,e.lockRef.current))},[]),m=l.useCallback(function(g){c(g.type,rr(g),g.target,o(g,e.lockRef.current))},[]);l.useEffect(function(){return ct.push(a),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",u,ot),document.addEventListener("touchmove",u,ot),document.addEventListener("touchstart",h,ot),function(){ct=ct.filter(function(g){return g!==a}),document.removeEventListener("wheel",u,ot),document.removeEventListener("touchmove",u,ot),document.removeEventListener("touchstart",h,ot)}},[]);var p=e.removeScrollBar,v=e.inert;return l.createElement(l.Fragment,null,v?l.createElement(a,{styles:Qd(s)}):null,p?l.createElement(Wd,{gapMode:e.gapMode}):null)}function rh(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const nh=Nd(ki,th);var Mi=l.forwardRef(function(e,t){return l.createElement(Mr,Re({},e,{ref:t,sideCar:nh}))});Mi.classNames=Mr.classNames;var Ii=l.forwardRef((e,t)=>d.jsx(B.div,{...e,ref:t}));Ii.displayName="AttachmentPrimitive.Root";var dn=()=>{const e=Tt(t=>t.name);return d.jsx(d.Fragment,{children:e})};dn.displayName="AttachmentPrimitive.Name";var sh=()=>{const e=mu();return l.useCallback(()=>{e.remove()},[e])},ah=Ee("AttachmentPrimitive.Remove",sh),ih=()=>{const e=le(),t=pe(n=>n.branchNumber>=n.branchCount),r=l.useCallback(()=>{e.switchToBranch({position:"next"})},[e]);return t?null:r},oh=Ee("BranchPickerPrimitive.Next",ih),ch=()=>{const e=le(),t=pe(n=>n.branchNumber<=1),r=l.useCallback(()=>{e.switchToBranch({position:"previous"})},[e]);return t?null:r},uh=Ee("BranchPickerPrimitive.Previous",ch),lh=()=>pe(t=>t.branchCount),Oi=()=>{const e=lh();return d.jsx(d.Fragment,{children:e})};Oi.displayName="BranchPickerPrimitive.Count";var dh=()=>pe(t=>t.branchNumber),ji=()=>{const e=dh();return d.jsx(d.Fragment,{children:e})};ji.displayName="BranchPickerPrimitive.Number";var Fn=e=>{const t=l.useRef();return l.useCallback(n=>{t.current&&t.current(),n&&(t.current=e(n))},[e])},hh=()=>{const e=Tn(),t=l.useCallback(r=>{const n=e.getState().setIsHovering,s=()=>{n(!0)},a=()=>{n(!1)};return r.addEventListener("mouseenter",s),r.addEventListener("mouseleave",a),()=>{r.removeEventListener("mouseenter",s),r.removeEventListener("mouseleave",a),n(!1)}},[e]);return Fn(t)},Zn=l.forwardRef((e,t)=>{const r=hh(),n=ae(t,r);return d.jsx(B.div,{...e,ref:n})});Zn.displayName="MessagePrimitive.Root";var fh=e=>{const t=le(),r=Tn();return Ar([t,r],({role:n,attachments:s,content:a,branchCount:i,isLast:o,speech:u,submittedFeedback:c},{isCopied:h,isHovering:f})=>!(e.hasBranches===!0&&i<2||e.user&&n!=="user"||e.assistant&&n!=="assistant"||e.system&&n!=="system"||e.lastOrHover===!0&&!f&&!o||e.copied===!0&&!h||e.copied===!1&&h||e.speaking===!0&&u==null||e.speaking===!1&&u!=null||e.hasAttachments===!0&&(n!=="user"||!s.length)||e.hasAttachments===!1&&n==="user"&&s.length||e.hasContent===!0&&a.length===0||e.hasContent===!1&&a.length>0||e.submittedFeedback!==void 0&&(c?.type??null)!==e.submittedFeedback))},qe=({children:e,...t})=>fh(t)?e:null;qe.displayName="MessagePrimitive.If";var ph=e=>{const[t]=l.useState(()=>X(()=>e));return l.useEffect(()=>{ne(t).setState(e,!0)},[e,t]),t},mh=e=>{const[t]=l.useState(()=>X(()=>e.getState()));return l.useEffect(()=>{const r=()=>ne(t).setState(e.getState(),!0);return r(),e.subscribe(r)},[e,t]),t},gh=({runtime:e,children:t})=>{const r=ph(e),n=mh(e),[s]=l.useState(()=>({useContentPartRuntime:r,useContentPart:n}));return d.jsx(Za.Provider,{value:s,children:t})},Di=l.createContext(null),vh=e=>({useSmoothStatus:X(()=>e)}),yh=({children:e})=>{const t=Li({optional:!0}),r=za(),[n]=l.useState(()=>vh(r.getState().status));return t?e:d.jsx(Di.Provider,{value:n,children:e})},bh=e=>{const t=l.forwardRef((r,n)=>d.jsx(yh,{children:d.jsx(e,{...r,ref:n})}));return t.displayName=e.displayName,t};function Li(e){const t=l.useContext(Di);if(!e?.optional&&!t)throw new Error("This component must be used within a SmoothContextProvider.");return t}var{useSmoothStatus:xh,useSmoothStatusStore:_h}=ie(Li,"useSmoothStatus"),wh=class{constructor(e,t){this.currentText=e,this.setText=t}animationFrameId=null;lastUpdateTime=Date.now();targetText="";start(){this.animationFrameId===null&&(this.lastUpdateTime=Date.now(),this.animate())}stop(){this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}animate=()=>{const e=Date.now();let r=e-this.lastUpdateTime;const n=this.targetText.length-this.currentText.length,s=Math.min(5,250/n);let a=0;for(;r>=s&&a<n;)a++,r-=s;a!==n?this.animationFrameId=requestAnimationFrame(this.animate):this.animationFrameId=null,a!==0&&(this.currentText=this.targetText.slice(0,this.currentText.length+a),this.lastUpdateTime=e-r,this.setText(this.currentText))}},Kr=Object.freeze({type:"running"}),Sh=(e,t=!1)=>{const{text:r}=e,n=pe({optional:!0,selector:h=>h.id}),s=l.useRef(n),[a,i]=l.useState(r),o=_h({optional:!0}),u=ve(h=>{i(h),o&&ne(o).setState(h!==e.text?Kr:e.status)});l.useEffect(()=>{o&&ne(o).setState(r!==e.text?Kr:e.status)},[o,r,a,e.status,e.text]);const[c]=l.useState(new wh(r,u));return l.useEffect(()=>{if(!t){c.stop();return}if(s.current!==n||!r.startsWith(c.targetText)){s.current=n,u(r),c.currentText=r,c.targetText=r,c.stop();return}c.targetText=r,c.start()},[u,c,n,t,r]),l.useEffect(()=>()=>{c.stop()},[c]),l.useMemo(()=>t?{type:"text",text:a,status:r===a?e.status:Kr}:e,[t,a,e,r])},Un=l.forwardRef(({smooth:e=!0,component:t="span",...r},n)=>{const{text:s,status:a}=Sh(xu(),e);return d.jsx(t,{"data-status":a.type,...r,ref:n,children:s})});Un.displayName="ContentPartPrimitive.Text";var Bi=l.forwardRef((e,t)=>{const{image:r}=bu();return d.jsx(B.img,{src:r,...e,ref:t})});Bi.displayName="ContentPartPrimitive.Image";var $i=()=>{const{display:e}=yu();return e??null};$i.displayName="ContentPartPrimitive.Display";var Fi=({children:e})=>Wt(r=>r.status.type==="running")?e:null;Fi.displayName="ContentPartPrimitive.InProgress";var pr=e=>e.content.filter(r=>r.type==="text").map(r=>r.text).join(`

`),Zi=class{constructor(e){this._core=e}get path(){return this._core.path}getState(){return this._core.getState()}subscribe(e){return this._core.subscribe(e)}},Ui=class extends Zi{constructor(e,t){super(e),this._composerApi=t}remove(){const e=this._composerApi.getState();if(!e)throw new Error("Composer is not available");return e.removeAttachment(this.getState().id)}},Ch=class extends Ui{get source(){return"thread-composer"}},Th=class extends Ui{get source(){return"edit-composer"}},Eh=class extends Zi{get source(){return"message"}constructor(e){super(e)}remove(){throw new Error("Message attachments cannot be removed")}},zn=class{_subscriptions=new Set;_connection;get isConnected(){return!!this._connection}notifySubscribers(){for(const e of this._subscriptions)e()}_updateConnection(){if(this._subscriptions.size>0){if(this._connection)return;this._connection=this._connect()}else this._connection?.(),this._connection=void 0}subscribe(e){return this._subscriptions.add(e),this._updateConnection(),()=>{this._subscriptions.delete(e),this._updateConnection()}}},Ce=Symbol("skip-update"),Ir=class extends zn{constructor(e){super(),this.binding=e}get path(){return this.binding.path}_previousStateDirty=!0;_previousState;getState=()=>{if(!this.isConnected||this._previousStateDirty){const e=this.binding.getState();e!==Ce&&(this._previousState=e),this._previousStateDirty=!1}if(this._previousState===void 0)throw new Error("Entry not available in the store");return this._previousState};_connect(){const e=()=>{this._previousStateDirty=!0,this.notifySubscribers()};return this.binding.subscribe(e)}};function kh(e,t){if(e===void 0&&t===void 0)return!0;if(e===void 0||t===void 0)return!1;for(const r of Object.keys(e)){const n=e[r],s=t[r];if(!Object.is(n,s))return!1}return!0}var Le=class extends zn{constructor(e){super(),this.binding=e;const t=e.getState();if(t===Ce)throw new Error("Entry not available in the store");this._previousState=t}get path(){return this.binding.path}_previousState;getState=()=>(this.isConnected||this._syncState(),this._previousState);_syncState(){const e=this.binding.getState();return e===Ce||kh(e,this._previousState)?!1:(this._previousState=e,!0)}_connect(){const e=()=>{this._syncState()&&this.notifySubscribers()};return this.binding.subscribe(e)}},zi=Object.freeze([]),Ah=e=>Object.freeze({type:"thread",isEditing:e?.isEditing??!1,canCancel:e?.canCancel??!1,isEmpty:e?.isEmpty??!0,text:e?.text??"",attachments:e?.attachments??zi,role:e?.role??"user",value:e?.text??""}),Rh=e=>Object.freeze({type:"edit",isEditing:e?.isEditing??!1,canCancel:e?.canCancel??!1,isEmpty:e?.isEmpty??!0,text:e?.text??"",attachments:e?.attachments??zi,role:e?.role??"user",value:e?.text??""}),Wi=class{constructor(e){this._core=e}get path(){return this._core.path}setText(e){const t=this._core.getState();if(!t)throw new Error("Composer is not available");t.setText(e)}setValue(e){this.setText(e)}addAttachment(e){const t=this._core.getState();if(!t)throw new Error("Composer is not available");return t.addAttachment(e)}reset(){const e=this._core.getState();if(!e)throw new Error("Composer is not available");e.reset()}send(){const e=this._core.getState();if(!e)throw new Error("Composer is not available");e.send()}cancel(){const e=this._core.getState();if(!e)throw new Error("Composer is not available");e.cancel()}setRole(e){const t=this._core.getState();if(!t)throw new Error("Composer is not available");t.setRole(e)}subscribe(e){return this._core.subscribe(e)}getAttachmentAccept(){const e=this._core.getState();if(!e)throw new Error("Composer is not available");return e.getAttachmentAccept()}},Ph=class extends Wi{get path(){return this._core.path}get type(){return"thread"}_getState;constructor(e){const t=new Ir({path:e.path,getState:()=>Ah(e.getState()),subscribe:r=>e.subscribe(r)});super({path:e.path,getState:()=>e.getState(),subscribe:r=>t.subscribe(r)}),this._getState=t.getState.bind(t)}getState(){return this._getState()}getAttachmentByIndex(e){return new Ch(new Le({path:{...this.path,attachmentSource:"thread-composer",attachmentSelector:{type:"index",index:e},ref:this.path.ref+`${this.path.ref}.attachments[${e}]`},getState:()=>{const r=this.getState().attachments[e];return r?{...r,source:"thread-composer"}:Ce},subscribe:t=>this._core.subscribe(t)}),this._core)}},Nh=class extends Wi{constructor(e,t){const r=new Ir({path:e.path,getState:()=>Rh(e.getState()),subscribe:n=>e.subscribe(n)});super({path:e.path,getState:()=>e.getState(),subscribe:n=>r.subscribe(n)}),this._beginEdit=t,this._getState=r.getState.bind(r)}get path(){return this._core.path}get type(){return"edit"}_getState;getState(){return this._getState()}beginEdit(){this._beginEdit()}getAttachmentByIndex(e){return new Th(new Le({path:{...this.path,attachmentSource:"edit-composer",attachmentSelector:{type:"index",index:e},ref:this.path.ref+`${this.path.ref}.attachments[${e}]`},getState:()=>{const r=this.getState().attachments[e];return r?{...r,source:"edit-composer"}:Ce},subscribe:t=>this._core.subscribe(t)}),this._core)}},mr=class extends zn{constructor(e){super(),this.binding=e}get path(){return this.binding.path}getState(){return this.binding.getState()}outerSubscribe(e){return this.binding.subscribe(e)}_connect(){const e=()=>{this.notifySubscribers()};let t=this.binding.getState(),r=t?.subscribe(e);const n=()=>{const a=this.binding.getState();a!==t&&(t=a,r?.(),r=this.binding.getState()?.subscribe(e),e())},s=this.outerSubscribe(n);return()=>{s?.(),r?.()}}},nr=Object.freeze({type:"complete"}),Mh=(e,t,r)=>{if(e.role!=="assistant")return nr;if(r.type==="tool-call")return r.result?nr:e.status;const n=t===Math.max(0,e.content.length-1);return e.status.type==="requires-action"?nr:n?e.status:nr},Vi=Symbol("empty-content"),ga=Object.freeze({type:"text",text:"",[Vi]:!0}),va=(e,t)=>{let r=e.content[t];if(r)e.content.length===1&&r.type==="text"&&r.text.length===0&&(r=ga);else if(e.content.length===0&&t===0)r=ga;else return Ce;const n=Mh(e,t,r);return Object.freeze({...r,status:n})},Ih=class{constructor(e,t){this._core=e,this._threadBinding=t,this.composer=new Nh(new mr({path:{...this.path,ref:this.path.ref+`${this.path.ref}.composer`,composerSource:"edit"},getState:()=>this._threadBinding.getState().getEditComposer(this._core.getState().id),subscribe:r=>this._threadBinding.subscribe(r)}),()=>this._threadBinding.getState().beginEdit(this._core.getState().id))}get path(){return this._core.path}composer;getState(){return this._core.getState()}reload(){const e=this._core.getState();if(e.role!=="assistant")throw new Error("Can only reload assistant messages");this._threadBinding.getState().startRun(e.parentId)}speak(){const e=this._core.getState();return this._threadBinding.getState().speak(e.id)}stopSpeaking(){const e=this._core.getState();if(this._threadBinding.getState().speech?.messageId===e.id)this._threadBinding.getState().stopSpeaking();else throw new Error("Message is not being spoken")}submitFeedback({type:e}){const t=this._core.getState();this._threadBinding.getState().submitFeedback({messageId:t.id,type:e})}switchToBranch({position:e,branchId:t}){const r=this._core.getState();if(t&&e)throw new Error("May not specify both branchId and position");if(!t&&!e)throw new Error("Must specify either branchId or position");const s=this._threadBinding.getState().getBranches(r.id);let a=t;if(e==="previous"?a=s[r.branchNumber-2]:e==="next"&&(a=s[r.branchNumber]),!a)throw new Error("Branch not found");this._threadBinding.getState().switchToBranch(a)}unstable_getCopyText(){return pr(this.getState())}subscribe(e){return this._core.subscribe(e)}getContentPartByIndex(e){if(e<0)throw new Error("Content part index must be >= 0");return new Js(new Le({path:{...this.path,ref:this.path.ref+`${this.path.ref}.content[${e}]`,contentPartSelector:{type:"index",index:e}},getState:()=>va(this.getState(),e),subscribe:t=>this._core.subscribe(t)}),this._core,this._threadBinding)}getContentPartByToolCallId(e){return new Js(new Le({path:{...this.path,ref:this.path.ref+`${this.path.ref}.content[toolCallId=${JSON.stringify(e)}]`,contentPartSelector:{type:"toolCallId",toolCallId:e}},getState:()=>{const t=this._core.getState(),r=t.content.findIndex(n=>n.type==="tool-call"&&n.toolCallId===e);return r===-1?Ce:va(t,r)},subscribe:t=>this._core.subscribe(t)}),this._core,this._threadBinding)}getAttachmentByIndex(e){return new Eh(new Le({path:{...this.path,ref:this.path.ref+`${this.path.ref}.attachments[${e}]`,attachmentSource:"message",attachmentSelector:{type:"index",index:e}},getState:()=>{const r=this.getState().attachments?.[e];return r?{...r,source:"message"}:Ce},subscribe:t=>this._core.subscribe(t)}))}},Oh=({UI:e,...t})=>{const r=Gc(n=>n.getToolUI(t.toolName))??e;return r?d.jsx(r,{...t}):null},sr={Text:()=>d.jsxs("p",{style:{whiteSpace:"pre-line"},children:[d.jsx(Un,{}),d.jsx(Fi,{children:d.jsx("span",{style:{fontFamily:"revert"},children:" ●"})})]}),Image:()=>d.jsx(Bi,{}),Unstable_Audio:()=>null,UI:()=>d.jsx($i,{})},jh=({components:{Text:e=sr.Text,Empty:t,Image:r=sr.Image,UI:n=sr.UI,Unstable_Audio:s=sr.Unstable_Audio,tools:{by_name:a={},Fallback:i=void 0}={}}={}})=>{const o=za(),u=Wt(),c=u.type;if(c==="tool-call"){const h=a[u.toolName]||i,f=m=>o.addToolResult(m);return d.jsx(Oh,{...u,UI:h,addResult:f})}if(u.status.type==="requires-action")throw new Error("Encountered unexpected requires-action status");switch(c){case"text":return u[Vi]&&t?d.jsx(t,{status:u.status}):d.jsx(e,{...u});case"image":return d.jsx(r,{...u});case"audio":return d.jsx(s,{...u});case"ui":return d.jsx(n,{...u});default:const h=c;throw new Error(`Unknown content part type: ${h}`)}},Dh=({partIndex:e,components:t})=>{const r=le(),n=l.useMemo(()=>r.getContentPartByIndex(e),[r,e]);return d.jsx(gh,{runtime:n,children:d.jsx(jh,{components:t})})},Lh=l.memo(Dh,(e,t)=>e.partIndex===t.partIndex&&e.components?.Text===t.components?.Text&&e.components?.Image===t.components?.Image&&e.components?.Unstable_Audio===t.components?.Unstable_Audio&&e.components?.UI===t.components?.UI&&e.components?.tools===t.components?.tools),Wn=({components:e})=>{const t=pe(r=>r.content.length)||1;return Array.from({length:t},(r,n)=>d.jsx(Lh,{partIndex:n,components:e},n))};Wn.displayName="MessagePrimitive.Content";var Bh=e=>{const[t]=l.useState(()=>X(()=>e));return l.useEffect(()=>{ne(t).setState(e,!0)},[e,t]),t},$h=e=>{const[t]=l.useState(()=>X(()=>e.getState()));return l.useEffect(()=>{const r=()=>ne(t).setState(e.getState(),!0);return r(),e.subscribe(r)},[e,t]),t},Hi=({runtime:e,children:t})=>{const r=Bh(e),n=$h(e),s=n(i=>i.source),a=l.useMemo(()=>({source:s,useAttachmentRuntime:r,useAttachment:n}),[r,n]);return d.jsx(qa.Provider,{value:a,children:t})},Fh=(e,t)=>{const r=t.type;switch(r){case"image":return e?.Image??e?.Attachment;case"document":return e?.Document??e?.Attachment;case"file":return e?.File??e?.Attachment;default:const n=r;throw new Error(`Unknown attachment type: ${n}`)}},Zh=({components:e})=>{const t=vu(r=>Fh(e,r));return t?d.jsx(t,{}):null},Uh=({components:e,attachmentIndex:t})=>{const r=le(),n=l.useMemo(()=>r.getAttachmentByIndex(t),[r,t]);return d.jsx(Hi,{runtime:n,children:d.jsx(Zh,{components:e})})},zh=l.memo(Uh,(e,t)=>e.attachmentIndex===t.attachmentIndex&&e.components?.Image===t.components?.Image&&e.components?.Document===t.components?.Document&&e.components?.File===t.components?.File&&e.components?.Attachment===t.components?.Attachment),qi=({components:e})=>{const t=pe(r=>r.role!=="user"?0:r.attachments.length);return Array.from({length:t},(r,n)=>d.jsx(zh,{attachmentIndex:n,components:e},n))};qi.displayName="MessagePrimitive.Attachments";var Yi=l.forwardRef(({hideWhenSingleBranch:e,...t},r)=>d.jsx(qe,{hasBranches:e?!0:void 0,children:d.jsx(B.div,{...t,ref:r})}));Yi.displayName="BranchPickerPrimitive.Root";var Ji=()=>{const e=bt(),t=Xe(),r=Ar([t,e],(s,a)=>s.isRunning||!a.isEditing||a.isEmpty),n=l.useCallback(()=>{e.getState().isEditing&&e.send()},[t]);return r?null:n},Vn=l.forwardRef(({onSubmit:e,...t},r)=>{const n=Ji(),s=a=>{a.preventDefault(),n&&n()};return d.jsx(B.form,{...t,ref:r,onSubmit:z(e,s)})});Vn.displayName="ComposerPrimitive.Root";function hn(){return hn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hn.apply(null,arguments)}function Wh(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}var Vh=l.useLayoutEffect,Hh=function(t){var r=l.useRef(t);return Vh(function(){r.current=t}),r},ya=function(t,r){if(typeof t=="function"){t(r);return}t.current=r},qh=function(t,r){var n=l.useRef();return l.useCallback(function(s){t.current=s,n.current&&ya(n.current,null),n.current=r,r&&ya(r,s)},[r])},ba={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},Yh=function(t){Object.keys(ba).forEach(function(r){t.style.setProperty(r,ba[r],"important")})},xa=Yh,te=null,_a=function(t,r){var n=t.scrollHeight;return r.sizingStyle.boxSizing==="border-box"?n+r.borderSize:n-r.paddingSize};function Jh(e,t,r,n){r===void 0&&(r=1),n===void 0&&(n=1/0),te||(te=document.createElement("textarea"),te.setAttribute("tabindex","-1"),te.setAttribute("aria-hidden","true"),xa(te)),te.parentNode===null&&document.body.appendChild(te);var s=e.paddingSize,a=e.borderSize,i=e.sizingStyle,o=i.boxSizing;Object.keys(i).forEach(function(m){var p=m;te.style[p]=i[p]}),xa(te),te.value=t;var u=_a(te,e);te.value=t,u=_a(te,e),te.value="x";var c=te.scrollHeight-s,h=c*r;o==="border-box"&&(h=h+s+a),u=Math.max(h,u);var f=c*n;return o==="border-box"&&(f=f+s+a),u=Math.min(f,u),[u,c]}var wa=function(){},Gh=function(t,r){return t.reduce(function(n,s){return n[s]=r[s],n},{})},Kh=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],Xh=!!document.documentElement.currentStyle,Qh=function(t){var r=window.getComputedStyle(t);if(r===null)return null;var n=Gh(Kh,r),s=n.boxSizing;if(s==="")return null;Xh&&s==="border-box"&&(n.width=parseFloat(n.width)+parseFloat(n.borderRightWidth)+parseFloat(n.borderLeftWidth)+parseFloat(n.paddingRight)+parseFloat(n.paddingLeft)+"px");var a=parseFloat(n.paddingBottom)+parseFloat(n.paddingTop),i=parseFloat(n.borderBottomWidth)+parseFloat(n.borderTopWidth);return{sizingStyle:n,paddingSize:a,borderSize:i}},ef=Qh;function Gi(e,t,r){var n=Hh(r);l.useLayoutEffect(function(){var s=function(i){return n.current(i)};if(e)return e.addEventListener(t,s),function(){return e.removeEventListener(t,s)}},[])}var tf=function(t){Gi(window,"resize",t)},rf=function(t){Gi(document.fonts,"loadingdone",t)},nf=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],sf=function(t,r){var n=t.cacheMeasurements,s=t.maxRows,a=t.minRows,i=t.onChange,o=i===void 0?wa:i,u=t.onHeightChange,c=u===void 0?wa:u,h=Wh(t,nf),f=h.value!==void 0,m=l.useRef(null),p=qh(m,r),v=l.useRef(0),g=l.useRef(),y=function(){var w=m.current,S=n&&g.current?g.current:ef(w);if(S){g.current=S;var C=Jh(S,w.value||w.placeholder||"x",a,s),A=C[0],P=C[1];v.current!==A&&(v.current=A,w.style.setProperty("height",A+"px","important"),c(A,{rowHeight:P}))}},b=function(w){f||y(),o(w)};return l.useLayoutEffect(y),tf(y),rf(y),l.createElement("textarea",hn({},h,{onChange:b,ref:p}))},af=l.forwardRef(sf),Ki=e=>{const t=ve(e),r=$a(n=>n.onScrollToBottom);l.useEffect(()=>r(t),[r,t])},Hn=l.forwardRef(({autoFocus:e=!1,asChild:t,disabled:r,onChange:n,onKeyDown:s,submitOnEnter:a=!0,cancelOnEscape:i=!0,unstable_focusOnRunStart:o=!0,unstable_focusOnScrollToBottom:u=!0,unstable_focusOnThreadSwitched:c=!0,...h},f)=>{const m=Xe(),p=bt(),v=kr(A=>A.isEditing?A.text:""),g=t?Sn:af,y=oe(A=>A.isDisabled)??r??!1,b=l.useRef(null),T=ae(f,b);An(A=>{i&&p.getState().canCancel&&(p.cancel(),A.preventDefault())});const w=A=>{if(!(y||!a)&&!A.nativeEvent.isComposing&&A.key==="Enter"&&A.shiftKey===!1){const{isRunning:P}=m.getState();P||(A.preventDefault(),b.current?.closest("form")?.requestSubmit())}},S=e&&!y,C=l.useCallback(()=>{const A=b.current;!A||!S||(A.focus({preventScroll:!0}),A.setSelectionRange(b.current.value.length,b.current.value.length))},[S]);return l.useEffect(()=>C(),[C]),Ki(()=>{p.type==="thread"&&u&&C()}),l.useEffect(()=>{if(!(p.type!=="thread"||!o))return m.unstable_on("run-start",C)},[o]),l.useEffect(()=>{if(!(p.type!=="thread"||!c))return m.unstable_on("switched-to",C)},[c]),d.jsx(g,{name:"input",value:v,...h,ref:T,disabled:y,onChange:z(n,A=>{if(p.getState().isEditing)return p.setText(A.target.value)}),onKeyDown:z(s,w)})});Hn.displayName="ComposerPrimitive.Input";var Xi=Ee("ComposerPrimitive.Send",Ji),of=()=>{const e=bt(),t=kr(n=>!n.canCancel),r=l.useCallback(()=>{e.cancel()},[e]);return t?null:r},Qi=Ee("ComposerPrimitive.Cancel",of),cf=()=>{const e=kr(n=>!n.isEditing),t=bt(),r=l.useCallback(()=>{const n=document.createElement("input");n.type="file";const s=t.getAttachmentAccept();s!=="*"&&(n.accept=s),n.onchange=a=>{const i=a.target.files?.[0];i&&t.addAttachment(i)},n.click()},[t]);return e?null:r},uf=Ee("ComposerPrimitive.AddAttachment",cf),lf=(e,t)=>{const r=t.type;switch(r){case"image":return e?.Image??e?.Attachment;case"document":return e?.Document??e?.Attachment;case"file":return e?.File??e?.Attachment;default:const n=r;throw new Error(`Unknown attachment type: ${n}`)}},df=({components:e})=>{const t=gu(r=>lf(e,r));return t?d.jsx(t,{}):null},hf=({components:e,attachmentIndex:t})=>{const r=bt(),n=l.useMemo(()=>r.getAttachmentByIndex(t),[r,t]);return d.jsx(Hi,{runtime:n,children:d.jsx(df,{components:e})})},ff=l.memo(hf,(e,t)=>e.attachmentIndex===t.attachmentIndex&&e.components?.Image===t.components?.Image&&e.components?.Document===t.components?.Document&&e.components?.File===t.components?.File&&e.components?.Attachment===t.components?.Attachment),eo=({components:e})=>{const t=kr(r=>r.attachments.length);return Array.from({length:t},(r,n)=>d.jsx(ff,{attachmentIndex:n,components:e},n))};eo.displayName="ComposerPrimitive.Attachments";var to=l.forwardRef((e,t)=>d.jsx(B.div,{...e,ref:t}));to.displayName="ThreadPrimitive.Root";var ro=e=>oe(t=>!(e.empty===!0&&t.messages.length!==0||e.empty===!1&&t.messages.length===0||e.running===!0&&!t.isRunning||e.running===!1&&t.isRunning||e.disabled===!0&&t.isDisabled||e.disabled===!1&&t.isDisabled)),pf=()=>ro({empty:!0}),no=({children:e})=>pf()?e:null;no.displayName="ThreadPrimitive.Empty";var At=({children:e,...t})=>ro(t)?e:null;At.displayName="ThreadPrimitive.If";var mf=e=>{const t=ve(e),r=l.useCallback(n=>{const s=new ResizeObserver(()=>{t()}),a=new MutationObserver(i=>{for(const o of i){for(const u of o.addedNodes)u instanceof Element&&s.observe(u);for(const u of o.removedNodes)u instanceof Element&&s.unobserve(u)}t()});s.observe(n),a.observe(n,{childList:!0});for(const i of n.children)s.observe(i);return()=>{s.disconnect(),a.disconnect()}},[t]);return Fn(r)},gf=({autoScroll:e=!0,unstable_scrollToBottomOnRunStart:t=!0})=>{const r=l.useRef(null),n=Fa(),s=l.useRef(0),a=l.useRef(!1),i=m=>{const p=r.current;!p||!e||(a.current=!0,p.scrollTo({top:p.scrollHeight,behavior:m}))},o=()=>{const m=r.current;if(!m)return;const p=n.getState().isAtBottom,v=m.scrollHeight-m.scrollTop<=m.clientHeight+1;!v&&s.current<m.scrollTop||(v&&(a.current=!1),v!==p&&ne(n).setState({isAtBottom:v})),s.current=m.scrollTop},u=mf(()=>{(a.current||n.getState().isAtBottom)&&i("instant"),o()}),c=Fn(m=>(m.addEventListener("scroll",o),()=>{m.removeEventListener("scroll",o)})),h=ae(u,c,r);Ki(()=>{i("auto")});const f=Xe();return l.useEffect(()=>{if(t)return f.unstable_on("run-start",focus)},[t]),h},so=l.forwardRef(({autoScroll:e,children:t,...r},n)=>{const s=gf({autoScroll:e}),a=ae(n,s);return d.jsx(B.div,{...r,ref:a,children:t})});so.displayName="ThreadPrimitive.Viewport";var vf=()=>X(e=>({isCopied:!1,setIsCopied:t=>{e({isCopied:t})},isHovering:!1,setIsHovering:t=>{e({isHovering:t})}})),yf=e=>{const[t]=l.useState(()=>X(()=>e));return l.useEffect(()=>{ne(t).setState(e,!0)},[e,t]),t},bf=e=>{const[t]=l.useState(()=>X(()=>e.getState()));return l.useEffect(()=>{const r=()=>ne(t).setState(e.getState(),!0);return r(),e.subscribe(r)},[e,t]),t},xf=()=>{const[e]=l.useState(()=>vf());return e},_f=e=>{const t=e.getState().composer,[r]=l.useState(()=>X(()=>t.getState()));return l.useEffect(()=>{const n=()=>ne(r).setState(t.getState());return n(),t.subscribe(n)},[t,r]),r},wf=({runtime:e,children:t})=>{const r=yf(e),n=bf(e),s=xf(),a=_f(r),[i]=l.useState(()=>({useMessageRuntime:r,useMessage:n,useMessageUtils:s,useEditComposer:a}));return d.jsx(Wa.Provider,{value:i,children:t})},ao=(e,t)=>e.Message===t.Message&&e.EditComposer===t.EditComposer&&e.UserEditComposer===t.UserEditComposer&&e.AssistantEditComposer===t.AssistantEditComposer&&e.SystemEditComposer===t.SystemEditComposer&&e.UserMessage===t.UserMessage&&e.AssistantMessage===t.AssistantMessage&&e.SystemMessage===t.SystemMessage,Sf=()=>null,Cf=(e,t,r)=>{switch(t){case"user":return r?e.UserEditComposer??e.EditComposer??e.UserMessage??e.Message:e.UserMessage??e.Message;case"assistant":return r?e.AssistantEditComposer??e.EditComposer??e.AssistantMessage??e.Message:e.AssistantMessage??e.Message;case"system":return r?e.SystemEditComposer??e.EditComposer??e.SystemMessage??e.Message:e.SystemMessage??Sf;default:const n=t;throw new Error(`Unknown message role: ${n}`)}},Tf=({components:e})=>{const t=pe(s=>s.role),r=Ha(s=>s.isEditing),n=Cf(e,t,r);return d.jsx(n,{})},Ef=({messageIndex:e,components:t})=>{const r=Xe(),n=l.useMemo(()=>r.getMesssageByIndex(e),[r,e]);return d.jsx(wf,{runtime:n,children:d.jsx(Tf,{components:t})})},kf=l.memo(Ef,(e,t)=>e.messageIndex===t.messageIndex&&ao(e.components,t.components)),io=({components:e})=>{const t=oe(r=>r.messages.length);return t===0?null:Array.from({length:t},(r,n)=>d.jsx(kf,{messageIndex:n,components:e},n))};io.displayName="ThreadPrimitive.Messages";var Af=l.memo(io,(e,t)=>ao(e.components,t.components)),Rf=()=>{const e=$a(n=>n.isAtBottom),t=Fa(),r=l.useCallback(()=>{t.getState().scrollToBottom()},[t]);return e?null:r},Pf=Ee("ThreadPrimitive.ScrollToBottom",Rf),Nf=({prompt:e,autoSend:t})=>{const r=Xe(),n=oe(a=>a.isDisabled),s=l.useCallback(()=>{t&&!r.getState().isRunning?(r.append(e),r.composer.setText("")):r.composer.setText(e)},[r,t,e]);return n?null:s},oo=Ee("ThreadPrimitive.Suggestion",Nf,["prompt","autoSend","method"]),O;(function(e){e.assertEqual=s=>s;function t(s){}e.assertIs=t;function r(s){throw new Error}e.assertNever=r,e.arrayToEnum=s=>{const a={};for(const i of s)a[i]=i;return a},e.getValidEnumValues=s=>{const a=e.objectKeys(s).filter(o=>typeof s[s[o]]!="number"),i={};for(const o of a)i[o]=s[o];return e.objectValues(i)},e.objectValues=s=>e.objectKeys(s).map(function(a){return s[a]}),e.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const a=[];for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&a.push(i);return a},e.find=(s,a)=>{for(const i of s)if(a(i))return i},e.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,a=" | "){return s.map(i=>typeof i=="string"?`'${i}'`:i).join(a)}e.joinValues=n,e.jsonStringifyReplacer=(s,a)=>typeof a=="bigint"?a.toString():a})(O||(O={}));var fn;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(fn||(fn={}));const k=O.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ze=e=>{switch(typeof e){case"undefined":return k.undefined;case"string":return k.string;case"number":return isNaN(e)?k.nan:k.number;case"boolean":return k.boolean;case"function":return k.function;case"bigint":return k.bigint;case"symbol":return k.symbol;case"object":return Array.isArray(e)?k.array:e===null?k.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?k.promise:typeof Map<"u"&&e instanceof Map?k.map:typeof Set<"u"&&e instanceof Set?k.set:typeof Date<"u"&&e instanceof Date?k.date:k.object;default:return k.unknown}},x=O.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Mf=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class fe extends Error{constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}get errors(){return this.issues}format(t){const r=t||function(a){return a.message},n={_errors:[]},s=a=>{for(const i of a.issues)if(i.code==="invalid_union")i.unionErrors.map(s);else if(i.code==="invalid_return_type")s(i.returnTypeError);else if(i.code==="invalid_arguments")s(i.argumentsError);else if(i.path.length===0)n._errors.push(r(i));else{let o=n,u=0;for(;u<i.path.length;){const c=i.path[u];u===i.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(r(i))):o[c]=o[c]||{_errors:[]},o=o[c],u++}}};return s(this),n}static assert(t){if(!(t instanceof fe))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,O.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){const r={},n=[];for(const s of this.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(t(s))):n.push(t(s));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}fe.create=e=>new fe(e);const mt=(e,t)=>{let r;switch(e.code){case x.invalid_type:e.received===k.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case x.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,O.jsonStringifyReplacer)}`;break;case x.unrecognized_keys:r=`Unrecognized key(s) in object: ${O.joinValues(e.keys,", ")}`;break;case x.invalid_union:r="Invalid input";break;case x.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${O.joinValues(e.options)}`;break;case x.invalid_enum_value:r=`Invalid enum value. Expected ${O.joinValues(e.options)}, received '${e.received}'`;break;case x.invalid_arguments:r="Invalid function arguments";break;case x.invalid_return_type:r="Invalid function return type";break;case x.invalid_date:r="Invalid date";break;case x.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:O.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case x.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case x.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case x.custom:r="Invalid input";break;case x.invalid_intersection_types:r="Intersection results could not be merged";break;case x.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case x.not_finite:r="Number must be finite";break;default:r=t.defaultError,O.assertNever(e)}return{message:r}};let co=mt;function If(e){co=e}function gr(){return co}const vr=e=>{const{data:t,path:r,errorMaps:n,issueData:s}=e,a=[...r,...s.path||[]],i={...s,path:a};if(s.message!==void 0)return{...s,path:a,message:s.message};let o="";const u=n.filter(c=>!!c).slice().reverse();for(const c of u)o=c(i,{data:t,defaultError:o}).message;return{...s,path:a,message:o}},Of=[];function E(e,t){const r=gr(),n=vr({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===mt?void 0:mt].filter(s=>!!s)});e.common.issues.push(n)}class K{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){const n=[];for(const s of r){if(s.status==="aborted")return N;s.status==="dirty"&&t.dirty(),n.push(s.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,r){const n=[];for(const s of r){const a=await s.key,i=await s.value;n.push({key:a,value:i})}return K.mergeObjectSync(t,n)}static mergeObjectSync(t,r){const n={};for(const s of r){const{key:a,value:i}=s;if(a.status==="aborted"||i.status==="aborted")return N;a.status==="dirty"&&t.dirty(),i.status==="dirty"&&t.dirty(),a.value!=="__proto__"&&(typeof i.value<"u"||s.alwaysSet)&&(n[a.value]=i.value)}return{status:t.value,value:n}}}const N=Object.freeze({status:"aborted"}),lt=e=>({status:"dirty",value:e}),se=e=>({status:"valid",value:e}),pn=e=>e.status==="aborted",mn=e=>e.status==="dirty",Rt=e=>e.status==="valid",Pt=e=>typeof Promise<"u"&&e instanceof Promise;function yr(e,t,r,n){if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function uo(e,t,r,n,s){if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,r),r}var R;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t?.message})(R||(R={}));var St,Ct;class Ie{constructor(t,r,n,s){this._cachedPath=[],this.parent=t,this.data=r,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Sa=(e,t)=>{if(Rt(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new fe(e.common.issues);return this._error=r,this._error}}};function M(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:s}=e;if(t&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:s}:{errorMap:(i,o)=>{var u,c;const{message:h}=e;return i.code==="invalid_enum_value"?{message:h??o.defaultError}:typeof o.data>"u"?{message:(u=h??n)!==null&&u!==void 0?u:o.defaultError}:i.code!=="invalid_type"?{message:o.defaultError}:{message:(c=h??r)!==null&&c!==void 0?c:o.defaultError}},description:s}}class I{constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(t){return ze(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:ze(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new K,ctx:{common:t.parent.common,data:t.data,parsedType:ze(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const r=this._parse(t);if(Pt(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){const r=this._parse(t);return Promise.resolve(r)}parse(t,r){const n=this.safeParse(t,r);if(n.success)return n.data;throw n.error}safeParse(t,r){var n;const s={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:ze(t)},a=this._parseSync({data:t,path:s.path,parent:s});return Sa(s,a)}async parseAsync(t,r){const n=await this.safeParseAsync(t,r);if(n.success)return n.data;throw n.error}async safeParseAsync(t,r){const n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:ze(t)},s=this._parse({data:t,path:n.path,parent:n}),a=await(Pt(s)?s:Promise.resolve(s));return Sa(n,a)}refine(t,r){const n=s=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(s):r;return this._refinement((s,a)=>{const i=t(s),o=()=>a.addIssue({code:x.custom,...n(s)});return typeof Promise<"u"&&i instanceof Promise?i.then(u=>u?!0:(o(),!1)):i?!0:(o(),!1)})}refinement(t,r){return this._refinement((n,s)=>t(n)?!0:(s.addIssue(typeof r=="function"?r(n,s):r),!1))}_refinement(t){return new Te({schema:this,typeName:_.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}optional(){return Ne.create(this,this._def)}nullable(){return Ke.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return _e.create(this,this._def)}promise(){return vt.create(this,this._def)}or(t){return Ot.create([this,t],this._def)}and(t){return jt.create(this,t,this._def)}transform(t){return new Te({...M(this._def),schema:this,typeName:_.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const r=typeof t=="function"?t:()=>t;return new Ft({...M(this._def),innerType:this,defaultValue:r,typeName:_.ZodDefault})}brand(){return new qn({typeName:_.ZodBranded,type:this,...M(this._def)})}catch(t){const r=typeof t=="function"?t:()=>t;return new Zt({...M(this._def),innerType:this,catchValue:r,typeName:_.ZodCatch})}describe(t){const r=this.constructor;return new r({...this._def,description:t})}pipe(t){return Jt.create(this,t)}readonly(){return Ut.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const jf=/^c[^\s-]{8,}$/i,Df=/^[0-9a-z]+$/,Lf=/^[0-9A-HJKMNP-TV-Z]{26}$/,Bf=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,$f=/^[a-z0-9_-]{21}$/i,Ff=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Zf=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Uf="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Xr;const zf=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Wf=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Vf=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,lo="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Hf=new RegExp(`^${lo}$`);function ho(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function qf(e){return new RegExp(`^${ho(e)}$`)}function fo(e){let t=`${lo}T${ho(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function Yf(e,t){return!!((t==="v4"||!t)&&zf.test(e)||(t==="v6"||!t)&&Wf.test(e))}class xe extends I{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==k.string){const a=this._getOrReturnCtx(t);return E(a,{code:x.invalid_type,expected:k.string,received:a.parsedType}),N}const n=new K;let s;for(const a of this._def.checks)if(a.kind==="min")t.data.length<a.value&&(s=this._getOrReturnCtx(t,s),E(s,{code:x.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="max")t.data.length>a.value&&(s=this._getOrReturnCtx(t,s),E(s,{code:x.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="length"){const i=t.data.length>a.value,o=t.data.length<a.value;(i||o)&&(s=this._getOrReturnCtx(t,s),i?E(s,{code:x.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):o&&E(s,{code:x.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),n.dirty())}else if(a.kind==="email")Zf.test(t.data)||(s=this._getOrReturnCtx(t,s),E(s,{validation:"email",code:x.invalid_string,message:a.message}),n.dirty());else if(a.kind==="emoji")Xr||(Xr=new RegExp(Uf,"u")),Xr.test(t.data)||(s=this._getOrReturnCtx(t,s),E(s,{validation:"emoji",code:x.invalid_string,message:a.message}),n.dirty());else if(a.kind==="uuid")Bf.test(t.data)||(s=this._getOrReturnCtx(t,s),E(s,{validation:"uuid",code:x.invalid_string,message:a.message}),n.dirty());else if(a.kind==="nanoid")$f.test(t.data)||(s=this._getOrReturnCtx(t,s),E(s,{validation:"nanoid",code:x.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid")jf.test(t.data)||(s=this._getOrReturnCtx(t,s),E(s,{validation:"cuid",code:x.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid2")Df.test(t.data)||(s=this._getOrReturnCtx(t,s),E(s,{validation:"cuid2",code:x.invalid_string,message:a.message}),n.dirty());else if(a.kind==="ulid")Lf.test(t.data)||(s=this._getOrReturnCtx(t,s),E(s,{validation:"ulid",code:x.invalid_string,message:a.message}),n.dirty());else if(a.kind==="url")try{new URL(t.data)}catch{s=this._getOrReturnCtx(t,s),E(s,{validation:"url",code:x.invalid_string,message:a.message}),n.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(t.data)||(s=this._getOrReturnCtx(t,s),E(s,{validation:"regex",code:x.invalid_string,message:a.message}),n.dirty())):a.kind==="trim"?t.data=t.data.trim():a.kind==="includes"?t.data.includes(a.value,a.position)||(s=this._getOrReturnCtx(t,s),E(s,{code:x.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),n.dirty()):a.kind==="toLowerCase"?t.data=t.data.toLowerCase():a.kind==="toUpperCase"?t.data=t.data.toUpperCase():a.kind==="startsWith"?t.data.startsWith(a.value)||(s=this._getOrReturnCtx(t,s),E(s,{code:x.invalid_string,validation:{startsWith:a.value},message:a.message}),n.dirty()):a.kind==="endsWith"?t.data.endsWith(a.value)||(s=this._getOrReturnCtx(t,s),E(s,{code:x.invalid_string,validation:{endsWith:a.value},message:a.message}),n.dirty()):a.kind==="datetime"?fo(a).test(t.data)||(s=this._getOrReturnCtx(t,s),E(s,{code:x.invalid_string,validation:"datetime",message:a.message}),n.dirty()):a.kind==="date"?Hf.test(t.data)||(s=this._getOrReturnCtx(t,s),E(s,{code:x.invalid_string,validation:"date",message:a.message}),n.dirty()):a.kind==="time"?qf(a).test(t.data)||(s=this._getOrReturnCtx(t,s),E(s,{code:x.invalid_string,validation:"time",message:a.message}),n.dirty()):a.kind==="duration"?Ff.test(t.data)||(s=this._getOrReturnCtx(t,s),E(s,{validation:"duration",code:x.invalid_string,message:a.message}),n.dirty()):a.kind==="ip"?Yf(t.data,a.version)||(s=this._getOrReturnCtx(t,s),E(s,{validation:"ip",code:x.invalid_string,message:a.message}),n.dirty()):a.kind==="base64"?Vf.test(t.data)||(s=this._getOrReturnCtx(t,s),E(s,{validation:"base64",code:x.invalid_string,message:a.message}),n.dirty()):O.assertNever(a);return{status:n.value,value:t.data}}_regex(t,r,n){return this.refinement(s=>t.test(s),{validation:r,code:x.invalid_string,...R.errToObj(n)})}_addCheck(t){return new xe({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...R.errToObj(t)})}url(t){return this._addCheck({kind:"url",...R.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...R.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...R.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...R.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...R.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...R.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...R.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...R.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...R.errToObj(t)})}datetime(t){var r,n;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof t?.precision>"u"?null:t?.precision,offset:(r=t?.offset)!==null&&r!==void 0?r:!1,local:(n=t?.local)!==null&&n!==void 0?n:!1,...R.errToObj(t?.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof t?.precision>"u"?null:t?.precision,...R.errToObj(t?.message)})}duration(t){return this._addCheck({kind:"duration",...R.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...R.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r?.position,...R.errToObj(r?.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...R.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...R.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...R.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...R.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...R.errToObj(r)})}nonempty(t){return this.min(1,R.errToObj(t))}trim(){return new xe({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new xe({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new xe({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get minLength(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}xe.create=e=>{var t;return new xe({checks:[],typeName:_.ZodString,coerce:(t=e?.coerce)!==null&&t!==void 0?t:!1,...M(e)})};function Jf(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,s=r>n?r:n,a=parseInt(e.toFixed(s).replace(".","")),i=parseInt(t.toFixed(s).replace(".",""));return a%i/Math.pow(10,s)}class Ye extends I{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==k.number){const a=this._getOrReturnCtx(t);return E(a,{code:x.invalid_type,expected:k.number,received:a.parsedType}),N}let n;const s=new K;for(const a of this._def.checks)a.kind==="int"?O.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),E(n,{code:x.invalid_type,expected:"integer",received:"float",message:a.message}),s.dirty()):a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(n=this._getOrReturnCtx(t,n),E(n,{code:x.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(n=this._getOrReturnCtx(t,n),E(n,{code:x.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="multipleOf"?Jf(t.data,a.value)!==0&&(n=this._getOrReturnCtx(t,n),E(n,{code:x.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):a.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),E(n,{code:x.not_finite,message:a.message}),s.dirty()):O.assertNever(a);return{status:s.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,R.toString(r))}gt(t,r){return this.setLimit("min",t,!1,R.toString(r))}lte(t,r){return this.setLimit("max",t,!0,R.toString(r))}lt(t,r){return this.setLimit("max",t,!1,R.toString(r))}setLimit(t,r,n,s){return new Ye({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:R.toString(s)}]})}_addCheck(t){return new Ye({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:R.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:R.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:R.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:R.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:R.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:R.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:R.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:R.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:R.toString(t)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&O.isInteger(t.value))}get isFinite(){let t=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(r)&&Number.isFinite(t)}}Ye.create=e=>new Ye({checks:[],typeName:_.ZodNumber,coerce:e?.coerce||!1,...M(e)});class Je extends I{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce&&(t.data=BigInt(t.data)),this._getType(t)!==k.bigint){const a=this._getOrReturnCtx(t);return E(a,{code:x.invalid_type,expected:k.bigint,received:a.parsedType}),N}let n;const s=new K;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(n=this._getOrReturnCtx(t,n),E(n,{code:x.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(n=this._getOrReturnCtx(t,n),E(n,{code:x.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="multipleOf"?t.data%a.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),E(n,{code:x.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):O.assertNever(a);return{status:s.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,R.toString(r))}gt(t,r){return this.setLimit("min",t,!1,R.toString(r))}lte(t,r){return this.setLimit("max",t,!0,R.toString(r))}lt(t,r){return this.setLimit("max",t,!1,R.toString(r))}setLimit(t,r,n,s){return new Je({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:R.toString(s)}]})}_addCheck(t){return new Je({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:R.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:R.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:R.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:R.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:R.toString(r)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}Je.create=e=>{var t;return new Je({checks:[],typeName:_.ZodBigInt,coerce:(t=e?.coerce)!==null&&t!==void 0?t:!1,...M(e)})};class Nt extends I{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==k.boolean){const n=this._getOrReturnCtx(t);return E(n,{code:x.invalid_type,expected:k.boolean,received:n.parsedType}),N}return se(t.data)}}Nt.create=e=>new Nt({typeName:_.ZodBoolean,coerce:e?.coerce||!1,...M(e)});class nt extends I{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==k.date){const a=this._getOrReturnCtx(t);return E(a,{code:x.invalid_type,expected:k.date,received:a.parsedType}),N}if(isNaN(t.data.getTime())){const a=this._getOrReturnCtx(t);return E(a,{code:x.invalid_date}),N}const n=new K;let s;for(const a of this._def.checks)a.kind==="min"?t.data.getTime()<a.value&&(s=this._getOrReturnCtx(t,s),E(s,{code:x.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):a.kind==="max"?t.data.getTime()>a.value&&(s=this._getOrReturnCtx(t,s),E(s,{code:x.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):O.assertNever(a);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new nt({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:R.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:R.toString(r)})}get minDate(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}}nt.create=e=>new nt({checks:[],coerce:e?.coerce||!1,typeName:_.ZodDate,...M(e)});class br extends I{_parse(t){if(this._getType(t)!==k.symbol){const n=this._getOrReturnCtx(t);return E(n,{code:x.invalid_type,expected:k.symbol,received:n.parsedType}),N}return se(t.data)}}br.create=e=>new br({typeName:_.ZodSymbol,...M(e)});class Mt extends I{_parse(t){if(this._getType(t)!==k.undefined){const n=this._getOrReturnCtx(t);return E(n,{code:x.invalid_type,expected:k.undefined,received:n.parsedType}),N}return se(t.data)}}Mt.create=e=>new Mt({typeName:_.ZodUndefined,...M(e)});class It extends I{_parse(t){if(this._getType(t)!==k.null){const n=this._getOrReturnCtx(t);return E(n,{code:x.invalid_type,expected:k.null,received:n.parsedType}),N}return se(t.data)}}It.create=e=>new It({typeName:_.ZodNull,...M(e)});class gt extends I{constructor(){super(...arguments),this._any=!0}_parse(t){return se(t.data)}}gt.create=e=>new gt({typeName:_.ZodAny,...M(e)});class tt extends I{constructor(){super(...arguments),this._unknown=!0}_parse(t){return se(t.data)}}tt.create=e=>new tt({typeName:_.ZodUnknown,...M(e)});class Ze extends I{_parse(t){const r=this._getOrReturnCtx(t);return E(r,{code:x.invalid_type,expected:k.never,received:r.parsedType}),N}}Ze.create=e=>new Ze({typeName:_.ZodNever,...M(e)});class xr extends I{_parse(t){if(this._getType(t)!==k.undefined){const n=this._getOrReturnCtx(t);return E(n,{code:x.invalid_type,expected:k.void,received:n.parsedType}),N}return se(t.data)}}xr.create=e=>new xr({typeName:_.ZodVoid,...M(e)});class _e extends I{_parse(t){const{ctx:r,status:n}=this._processInputParams(t),s=this._def;if(r.parsedType!==k.array)return E(r,{code:x.invalid_type,expected:k.array,received:r.parsedType}),N;if(s.exactLength!==null){const i=r.data.length>s.exactLength.value,o=r.data.length<s.exactLength.value;(i||o)&&(E(r,{code:i?x.too_big:x.too_small,minimum:o?s.exactLength.value:void 0,maximum:i?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&r.data.length<s.minLength.value&&(E(r,{code:x.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&r.data.length>s.maxLength.value&&(E(r,{code:x.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((i,o)=>s.type._parseAsync(new Ie(r,i,r.path,o)))).then(i=>K.mergeArray(n,i));const a=[...r.data].map((i,o)=>s.type._parseSync(new Ie(r,i,r.path,o)));return K.mergeArray(n,a)}get element(){return this._def.type}min(t,r){return new _e({...this._def,minLength:{value:t,message:R.toString(r)}})}max(t,r){return new _e({...this._def,maxLength:{value:t,message:R.toString(r)}})}length(t,r){return new _e({...this._def,exactLength:{value:t,message:R.toString(r)}})}nonempty(t){return this.min(1,t)}}_e.create=(e,t)=>new _e({type:e,minLength:null,maxLength:null,exactLength:null,typeName:_.ZodArray,...M(t)});function ut(e){if(e instanceof U){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=Ne.create(ut(n))}return new U({...e._def,shape:()=>t})}else return e instanceof _e?new _e({...e._def,type:ut(e.element)}):e instanceof Ne?Ne.create(ut(e.unwrap())):e instanceof Ke?Ke.create(ut(e.unwrap())):e instanceof Oe?Oe.create(e.items.map(t=>ut(t))):e}class U extends I{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),r=O.objectKeys(t);return this._cached={shape:t,keys:r}}_parse(t){if(this._getType(t)!==k.object){const c=this._getOrReturnCtx(t);return E(c,{code:x.invalid_type,expected:k.object,received:c.parsedType}),N}const{status:n,ctx:s}=this._processInputParams(t),{shape:a,keys:i}=this._getCached(),o=[];if(!(this._def.catchall instanceof Ze&&this._def.unknownKeys==="strip"))for(const c in s.data)i.includes(c)||o.push(c);const u=[];for(const c of i){const h=a[c],f=s.data[c];u.push({key:{status:"valid",value:c},value:h._parse(new Ie(s,f,s.path,c)),alwaysSet:c in s.data})}if(this._def.catchall instanceof Ze){const c=this._def.unknownKeys;if(c==="passthrough")for(const h of o)u.push({key:{status:"valid",value:h},value:{status:"valid",value:s.data[h]}});else if(c==="strict")o.length>0&&(E(s,{code:x.unrecognized_keys,keys:o}),n.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const h of o){const f=s.data[h];u.push({key:{status:"valid",value:h},value:c._parse(new Ie(s,f,s.path,h)),alwaysSet:h in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const c=[];for(const h of u){const f=await h.key,m=await h.value;c.push({key:f,value:m,alwaysSet:h.alwaysSet})}return c}).then(c=>K.mergeObjectSync(n,c)):K.mergeObjectSync(n,u)}get shape(){return this._def.shape()}strict(t){return R.errToObj,new U({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,n)=>{var s,a,i,o;const u=(i=(a=(s=this._def).errorMap)===null||a===void 0?void 0:a.call(s,r,n).message)!==null&&i!==void 0?i:n.defaultError;return r.code==="unrecognized_keys"?{message:(o=R.errToObj(t).message)!==null&&o!==void 0?o:u}:{message:u}}}:{}})}strip(){return new U({...this._def,unknownKeys:"strip"})}passthrough(){return new U({...this._def,unknownKeys:"passthrough"})}extend(t){return new U({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new U({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:_.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new U({...this._def,catchall:t})}pick(t){const r={};return O.objectKeys(t).forEach(n=>{t[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new U({...this._def,shape:()=>r})}omit(t){const r={};return O.objectKeys(this.shape).forEach(n=>{t[n]||(r[n]=this.shape[n])}),new U({...this._def,shape:()=>r})}deepPartial(){return ut(this)}partial(t){const r={};return O.objectKeys(this.shape).forEach(n=>{const s=this.shape[n];t&&!t[n]?r[n]=s:r[n]=s.optional()}),new U({...this._def,shape:()=>r})}required(t){const r={};return O.objectKeys(this.shape).forEach(n=>{if(t&&!t[n])r[n]=this.shape[n];else{let a=this.shape[n];for(;a instanceof Ne;)a=a._def.innerType;r[n]=a}}),new U({...this._def,shape:()=>r})}keyof(){return po(O.objectKeys(this.shape))}}U.create=(e,t)=>new U({shape:()=>e,unknownKeys:"strip",catchall:Ze.create(),typeName:_.ZodObject,...M(t)});U.strictCreate=(e,t)=>new U({shape:()=>e,unknownKeys:"strict",catchall:Ze.create(),typeName:_.ZodObject,...M(t)});U.lazycreate=(e,t)=>new U({shape:e,unknownKeys:"strip",catchall:Ze.create(),typeName:_.ZodObject,...M(t)});class Ot extends I{_parse(t){const{ctx:r}=this._processInputParams(t),n=this._def.options;function s(a){for(const o of a)if(o.result.status==="valid")return o.result;for(const o of a)if(o.result.status==="dirty")return r.common.issues.push(...o.ctx.common.issues),o.result;const i=a.map(o=>new fe(o.ctx.common.issues));return E(r,{code:x.invalid_union,unionErrors:i}),N}if(r.common.async)return Promise.all(n.map(async a=>{const i={...r,common:{...r.common,issues:[]},parent:null};return{result:await a._parseAsync({data:r.data,path:r.path,parent:i}),ctx:i}})).then(s);{let a;const i=[];for(const u of n){const c={...r,common:{...r.common,issues:[]},parent:null},h=u._parseSync({data:r.data,path:r.path,parent:c});if(h.status==="valid")return h;h.status==="dirty"&&!a&&(a={result:h,ctx:c}),c.common.issues.length&&i.push(c.common.issues)}if(a)return r.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(u=>new fe(u));return E(r,{code:x.invalid_union,unionErrors:o}),N}}get options(){return this._def.options}}Ot.create=(e,t)=>new Ot({options:e,typeName:_.ZodUnion,...M(t)});const De=e=>e instanceof Lt?De(e.schema):e instanceof Te?De(e.innerType()):e instanceof Bt?[e.value]:e instanceof Ge?e.options:e instanceof $t?O.objectValues(e.enum):e instanceof Ft?De(e._def.innerType):e instanceof Mt?[void 0]:e instanceof It?[null]:e instanceof Ne?[void 0,...De(e.unwrap())]:e instanceof Ke?[null,...De(e.unwrap())]:e instanceof qn||e instanceof Ut?De(e.unwrap()):e instanceof Zt?De(e._def.innerType):[];class Or extends I{_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==k.object)return E(r,{code:x.invalid_type,expected:k.object,received:r.parsedType}),N;const n=this.discriminator,s=r.data[n],a=this.optionsMap.get(s);return a?r.common.async?a._parseAsync({data:r.data,path:r.path,parent:r}):a._parseSync({data:r.data,path:r.path,parent:r}):(E(r,{code:x.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),N)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,r,n){const s=new Map;for(const a of r){const i=De(a.shape[t]);if(!i.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const o of i){if(s.has(o))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(o)}`);s.set(o,a)}}return new Or({typeName:_.ZodDiscriminatedUnion,discriminator:t,options:r,optionsMap:s,...M(n)})}}function gn(e,t){const r=ze(e),n=ze(t);if(e===t)return{valid:!0,data:e};if(r===k.object&&n===k.object){const s=O.objectKeys(t),a=O.objectKeys(e).filter(o=>s.indexOf(o)!==-1),i={...e,...t};for(const o of a){const u=gn(e[o],t[o]);if(!u.valid)return{valid:!1};i[o]=u.data}return{valid:!0,data:i}}else if(r===k.array&&n===k.array){if(e.length!==t.length)return{valid:!1};const s=[];for(let a=0;a<e.length;a++){const i=e[a],o=t[a],u=gn(i,o);if(!u.valid)return{valid:!1};s.push(u.data)}return{valid:!0,data:s}}else return r===k.date&&n===k.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class jt extends I{_parse(t){const{status:r,ctx:n}=this._processInputParams(t),s=(a,i)=>{if(pn(a)||pn(i))return N;const o=gn(a.value,i.value);return o.valid?((mn(a)||mn(i))&&r.dirty(),{status:r.value,value:o.data}):(E(n,{code:x.invalid_intersection_types}),N)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([a,i])=>s(a,i)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}jt.create=(e,t,r)=>new jt({left:e,right:t,typeName:_.ZodIntersection,...M(r)});class Oe extends I{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==k.array)return E(n,{code:x.invalid_type,expected:k.array,received:n.parsedType}),N;if(n.data.length<this._def.items.length)return E(n,{code:x.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),N;!this._def.rest&&n.data.length>this._def.items.length&&(E(n,{code:x.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const a=[...n.data].map((i,o)=>{const u=this._def.items[o]||this._def.rest;return u?u._parse(new Ie(n,i,n.path,o)):null}).filter(i=>!!i);return n.common.async?Promise.all(a).then(i=>K.mergeArray(r,i)):K.mergeArray(r,a)}get items(){return this._def.items}rest(t){return new Oe({...this._def,rest:t})}}Oe.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Oe({items:e,typeName:_.ZodTuple,rest:null,...M(t)})};class Dt extends I{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==k.object)return E(n,{code:x.invalid_type,expected:k.object,received:n.parsedType}),N;const s=[],a=this._def.keyType,i=this._def.valueType;for(const o in n.data)s.push({key:a._parse(new Ie(n,o,n.path,o)),value:i._parse(new Ie(n,n.data[o],n.path,o)),alwaysSet:o in n.data});return n.common.async?K.mergeObjectAsync(r,s):K.mergeObjectSync(r,s)}get element(){return this._def.valueType}static create(t,r,n){return r instanceof I?new Dt({keyType:t,valueType:r,typeName:_.ZodRecord,...M(n)}):new Dt({keyType:xe.create(),valueType:t,typeName:_.ZodRecord,...M(r)})}}class _r extends I{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==k.map)return E(n,{code:x.invalid_type,expected:k.map,received:n.parsedType}),N;const s=this._def.keyType,a=this._def.valueType,i=[...n.data.entries()].map(([o,u],c)=>({key:s._parse(new Ie(n,o,n.path,[c,"key"])),value:a._parse(new Ie(n,u,n.path,[c,"value"]))}));if(n.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const u of i){const c=await u.key,h=await u.value;if(c.status==="aborted"||h.status==="aborted")return N;(c.status==="dirty"||h.status==="dirty")&&r.dirty(),o.set(c.value,h.value)}return{status:r.value,value:o}})}else{const o=new Map;for(const u of i){const c=u.key,h=u.value;if(c.status==="aborted"||h.status==="aborted")return N;(c.status==="dirty"||h.status==="dirty")&&r.dirty(),o.set(c.value,h.value)}return{status:r.value,value:o}}}}_r.create=(e,t,r)=>new _r({valueType:t,keyType:e,typeName:_.ZodMap,...M(r)});class st extends I{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==k.set)return E(n,{code:x.invalid_type,expected:k.set,received:n.parsedType}),N;const s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(E(n,{code:x.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),r.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(E(n,{code:x.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),r.dirty());const a=this._def.valueType;function i(u){const c=new Set;for(const h of u){if(h.status==="aborted")return N;h.status==="dirty"&&r.dirty(),c.add(h.value)}return{status:r.value,value:c}}const o=[...n.data.values()].map((u,c)=>a._parse(new Ie(n,u,n.path,c)));return n.common.async?Promise.all(o).then(u=>i(u)):i(o)}min(t,r){return new st({...this._def,minSize:{value:t,message:R.toString(r)}})}max(t,r){return new st({...this._def,maxSize:{value:t,message:R.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}}st.create=(e,t)=>new st({valueType:e,minSize:null,maxSize:null,typeName:_.ZodSet,...M(t)});class ft extends I{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==k.function)return E(r,{code:x.invalid_type,expected:k.function,received:r.parsedType}),N;function n(o,u){return vr({data:o,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,gr(),mt].filter(c=>!!c),issueData:{code:x.invalid_arguments,argumentsError:u}})}function s(o,u){return vr({data:o,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,gr(),mt].filter(c=>!!c),issueData:{code:x.invalid_return_type,returnTypeError:u}})}const a={errorMap:r.common.contextualErrorMap},i=r.data;if(this._def.returns instanceof vt){const o=this;return se(async function(...u){const c=new fe([]),h=await o._def.args.parseAsync(u,a).catch(p=>{throw c.addIssue(n(u,p)),c}),f=await Reflect.apply(i,this,h);return await o._def.returns._def.type.parseAsync(f,a).catch(p=>{throw c.addIssue(s(f,p)),c})})}else{const o=this;return se(function(...u){const c=o._def.args.safeParse(u,a);if(!c.success)throw new fe([n(u,c.error)]);const h=Reflect.apply(i,this,c.data),f=o._def.returns.safeParse(h,a);if(!f.success)throw new fe([s(h,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new ft({...this._def,args:Oe.create(t).rest(tt.create())})}returns(t){return new ft({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,r,n){return new ft({args:t||Oe.create([]).rest(tt.create()),returns:r||tt.create(),typeName:_.ZodFunction,...M(n)})}}class Lt extends I{get schema(){return this._def.getter()}_parse(t){const{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}Lt.create=(e,t)=>new Lt({getter:e,typeName:_.ZodLazy,...M(t)});class Bt extends I{_parse(t){if(t.data!==this._def.value){const r=this._getOrReturnCtx(t);return E(r,{received:r.data,code:x.invalid_literal,expected:this._def.value}),N}return{status:"valid",value:t.data}}get value(){return this._def.value}}Bt.create=(e,t)=>new Bt({value:e,typeName:_.ZodLiteral,...M(t)});function po(e,t){return new Ge({values:e,typeName:_.ZodEnum,...M(t)})}class Ge extends I{constructor(){super(...arguments),St.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const r=this._getOrReturnCtx(t),n=this._def.values;return E(r,{expected:O.joinValues(n),received:r.parsedType,code:x.invalid_type}),N}if(yr(this,St)||uo(this,St,new Set(this._def.values)),!yr(this,St).has(t.data)){const r=this._getOrReturnCtx(t),n=this._def.values;return E(r,{received:r.data,code:x.invalid_enum_value,options:n}),N}return se(t.data)}get options(){return this._def.values}get enum(){const t={};for(const r of this._def.values)t[r]=r;return t}get Values(){const t={};for(const r of this._def.values)t[r]=r;return t}get Enum(){const t={};for(const r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return Ge.create(t,{...this._def,...r})}exclude(t,r=this._def){return Ge.create(this.options.filter(n=>!t.includes(n)),{...this._def,...r})}}St=new WeakMap;Ge.create=po;class $t extends I{constructor(){super(...arguments),Ct.set(this,void 0)}_parse(t){const r=O.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==k.string&&n.parsedType!==k.number){const s=O.objectValues(r);return E(n,{expected:O.joinValues(s),received:n.parsedType,code:x.invalid_type}),N}if(yr(this,Ct)||uo(this,Ct,new Set(O.getValidEnumValues(this._def.values))),!yr(this,Ct).has(t.data)){const s=O.objectValues(r);return E(n,{received:n.data,code:x.invalid_enum_value,options:s}),N}return se(t.data)}get enum(){return this._def.values}}Ct=new WeakMap;$t.create=(e,t)=>new $t({values:e,typeName:_.ZodNativeEnum,...M(t)});class vt extends I{unwrap(){return this._def.type}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==k.promise&&r.common.async===!1)return E(r,{code:x.invalid_type,expected:k.promise,received:r.parsedType}),N;const n=r.parsedType===k.promise?r.data:Promise.resolve(r.data);return se(n.then(s=>this._def.type.parseAsync(s,{path:r.path,errorMap:r.common.contextualErrorMap})))}}vt.create=(e,t)=>new vt({type:e,typeName:_.ZodPromise,...M(t)});class Te extends I{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===_.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:r,ctx:n}=this._processInputParams(t),s=this._def.effect||null,a={addIssue:i=>{E(n,i),i.fatal?r.abort():r.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),s.type==="preprocess"){const i=s.transform(n.data,a);if(n.common.async)return Promise.resolve(i).then(async o=>{if(r.value==="aborted")return N;const u=await this._def.schema._parseAsync({data:o,path:n.path,parent:n});return u.status==="aborted"?N:u.status==="dirty"||r.value==="dirty"?lt(u.value):u});{if(r.value==="aborted")return N;const o=this._def.schema._parseSync({data:i,path:n.path,parent:n});return o.status==="aborted"?N:o.status==="dirty"||r.value==="dirty"?lt(o.value):o}}if(s.type==="refinement"){const i=o=>{const u=s.refinement(o,a);if(n.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?N:(o.status==="dirty"&&r.dirty(),i(o.value),{status:r.value,value:o.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>o.status==="aborted"?N:(o.status==="dirty"&&r.dirty(),i(o.value).then(()=>({status:r.value,value:o.value}))))}if(s.type==="transform")if(n.common.async===!1){const i=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Rt(i))return i;const o=s.transform(i.value,a);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:o}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(i=>Rt(i)?Promise.resolve(s.transform(i.value,a)).then(o=>({status:r.value,value:o})):i);O.assertNever(s)}}Te.create=(e,t,r)=>new Te({schema:e,typeName:_.ZodEffects,effect:t,...M(r)});Te.createWithPreprocess=(e,t,r)=>new Te({schema:t,effect:{type:"preprocess",transform:e},typeName:_.ZodEffects,...M(r)});class Ne extends I{_parse(t){return this._getType(t)===k.undefined?se(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Ne.create=(e,t)=>new Ne({innerType:e,typeName:_.ZodOptional,...M(t)});class Ke extends I{_parse(t){return this._getType(t)===k.null?se(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Ke.create=(e,t)=>new Ke({innerType:e,typeName:_.ZodNullable,...M(t)});class Ft extends I{_parse(t){const{ctx:r}=this._processInputParams(t);let n=r.data;return r.parsedType===k.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}Ft.create=(e,t)=>new Ft({innerType:e,typeName:_.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...M(t)});class Zt extends I{_parse(t){const{ctx:r}=this._processInputParams(t),n={...r,common:{...r.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Pt(s)?s.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new fe(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new fe(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Zt.create=(e,t)=>new Zt({innerType:e,typeName:_.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...M(t)});class wr extends I{_parse(t){if(this._getType(t)!==k.nan){const n=this._getOrReturnCtx(t);return E(n,{code:x.invalid_type,expected:k.nan,received:n.parsedType}),N}return{status:"valid",value:t.data}}}wr.create=e=>new wr({typeName:_.ZodNaN,...M(e)});const Gf=Symbol("zod_brand");class qn extends I{_parse(t){const{ctx:r}=this._processInputParams(t),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class Jt extends I{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?N:a.status==="dirty"?(r.dirty(),lt(a.value)):this._def.out._parseAsync({data:a.value,path:n.path,parent:n})})();{const s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?N:s.status==="dirty"?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(t,r){return new Jt({in:t,out:r,typeName:_.ZodPipeline})}}class Ut extends I{_parse(t){const r=this._def.innerType._parse(t),n=s=>(Rt(s)&&(s.value=Object.freeze(s.value)),s);return Pt(r)?r.then(s=>n(s)):n(r)}unwrap(){return this._def.innerType}}Ut.create=(e,t)=>new Ut({innerType:e,typeName:_.ZodReadonly,...M(t)});function mo(e,t={},r){return e?gt.create().superRefine((n,s)=>{var a,i;if(!e(n)){const o=typeof t=="function"?t(n):typeof t=="string"?{message:t}:t,u=(i=(a=o.fatal)!==null&&a!==void 0?a:r)!==null&&i!==void 0?i:!0,c=typeof o=="string"?{message:o}:o;s.addIssue({code:"custom",...c,fatal:u})}}):gt.create()}const Kf={object:U.lazycreate};var _;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(_||(_={}));const Xf=(e,t={message:`Input not instance of ${e.name}`})=>mo(r=>r instanceof e,t),go=xe.create,vo=Ye.create,Qf=wr.create,ep=Je.create,yo=Nt.create,tp=nt.create,rp=br.create,np=Mt.create,sp=It.create,ap=gt.create,ip=tt.create,op=Ze.create,cp=xr.create,up=_e.create,lp=U.create,dp=U.strictCreate,hp=Ot.create,fp=Or.create,pp=jt.create,mp=Oe.create,gp=Dt.create,vp=_r.create,yp=st.create,bp=ft.create,xp=Lt.create,_p=Bt.create,wp=Ge.create,Sp=$t.create,Cp=vt.create,Ca=Te.create,Tp=Ne.create,Ep=Ke.create,kp=Te.createWithPreprocess,Ap=Jt.create,Rp=()=>go().optional(),Pp=()=>vo().optional(),Np=()=>yo().optional(),Mp={string:e=>xe.create({...e,coerce:!0}),number:e=>Ye.create({...e,coerce:!0}),boolean:e=>Nt.create({...e,coerce:!0}),bigint:e=>Je.create({...e,coerce:!0}),date:e=>nt.create({...e,coerce:!0})},Ip=N;var re=Object.freeze({__proto__:null,defaultErrorMap:mt,setErrorMap:If,getErrorMap:gr,makeIssue:vr,EMPTY_PATH:Of,addIssueToContext:E,ParseStatus:K,INVALID:N,DIRTY:lt,OK:se,isAborted:pn,isDirty:mn,isValid:Rt,isAsync:Pt,get util(){return O},get objectUtil(){return fn},ZodParsedType:k,getParsedType:ze,ZodType:I,datetimeRegex:fo,ZodString:xe,ZodNumber:Ye,ZodBigInt:Je,ZodBoolean:Nt,ZodDate:nt,ZodSymbol:br,ZodUndefined:Mt,ZodNull:It,ZodAny:gt,ZodUnknown:tt,ZodNever:Ze,ZodVoid:xr,ZodArray:_e,ZodObject:U,ZodUnion:Ot,ZodDiscriminatedUnion:Or,ZodIntersection:jt,ZodTuple:Oe,ZodRecord:Dt,ZodMap:_r,ZodSet:st,ZodFunction:ft,ZodLazy:Lt,ZodLiteral:Bt,ZodEnum:Ge,ZodNativeEnum:$t,ZodPromise:vt,ZodEffects:Te,ZodTransformer:Te,ZodOptional:Ne,ZodNullable:Ke,ZodDefault:Ft,ZodCatch:Zt,ZodNaN:wr,BRAND:Gf,ZodBranded:qn,ZodPipeline:Jt,ZodReadonly:Ut,custom:mo,Schema:I,ZodSchema:I,late:Kf,get ZodFirstPartyTypeKind(){return _},coerce:Mp,any:ap,array:up,bigint:ep,boolean:yo,date:tp,discriminatedUnion:fp,effect:Ca,enum:wp,function:bp,instanceof:Xf,intersection:pp,lazy:xp,literal:_p,map:vp,nan:Qf,nativeEnum:Sp,never:op,null:sp,nullable:Ep,number:vo,object:lp,oboolean:Np,onumber:Pp,optional:Tp,ostring:Rp,pipeline:Ap,preprocess:kp,promise:Cp,record:gp,set:yp,strictObject:dp,string:go,symbol:rp,transformer:Ca,tuple:mp,undefined:np,union:hp,unknown:ip,void:cp,NEVER:Ip,ZodIssueCode:x,quotelessJson:Mf,ZodError:fe});re.object({maxTokens:re.number().int().positive().optional(),temperature:re.number().optional(),topP:re.number().optional(),presencePenalty:re.number().optional(),frequencyPenalty:re.number().optional(),seed:re.number().int().optional(),headers:re.record(re.string().optional()).optional()});re.object({apiKey:re.string().optional(),baseUrl:re.string().optional(),modelName:re.string().optional()});var Op=e=>Array.from(e).map(r=>r.getModelConfig()).sort((r,n)=>(n.priority??0)-(r.priority??0)).reduce((r,n)=>{if(n.system&&(r.system?r.system+=`

${n.system}`:r.system=n.system),n.tools)for(const[s,a]of Object.entries(n.tools)){if(r.tools?.[s])throw new Error(`You tried to define a tool with the name ${s}, but it already exists.`);r.tools||(r.tools={}),r.tools[s]=a}return n.config&&(r.config={...r.config,...n.config}),n.callSettings&&(r.callSettings={...r.callSettings,...n.callSettings}),r},{}),jp=class{_providers=new Set;getModelConfig(){return Op(this._providers)}registerModelConfigProvider(e){this._providers.add(e);const t=e.subscribe?.(()=>{this.notifySubscribers()});return this.notifySubscribers(),()=>{this._providers.delete(e),t?.(),this.notifySubscribers()}}_subscribers=new Set;notifySubscribers(){for(const e of this._subscribers)e()}subscribe(e){return this._subscribers.add(e),()=>this._subscribers.delete(e)}},Dp=class{_proxyConfigProvider=new jp;constructor(){}registerModelConfigProvider(e){return this._proxyConfigProvider.registerModelConfigProvider(e)}},Lp=e=>e.status.type==="complete",bo=class{isEditing=!0;getAttachmentAccept(){return this.getAttachmentAdapter()?.accept??"*"}_attachments=[];get attachments(){return this._attachments}setAttachments(e){this._attachments=e,this.notifySubscribers()}get isEmpty(){return!this.text.trim()&&!this.attachments.length}_text="";get text(){return this._text}_role="user";get role(){return this._role}setRole(e){this._role=e,this.notifySubscribers()}setText(e){this._text=e,this.notifySubscribers()}reset(){this._text="",this._role="user",this._attachments=[],this.notifySubscribers()}async send(){const e=this.getAttachmentAdapter(),t=e&&this.attachments.length>0?await Promise.all(this.attachments.map(async n=>Lp(n)?n:await e.send(n))):[],r={role:this.role,content:this.text?[{type:"text",text:this.text}]:[],attachments:t};this.reset(),this.handleSend(r)}async addAttachment(e){const t=this.getAttachmentAdapter();if(!t)throw new Error("Attachments are not supported");const r=await t.add({file:e});this._attachments=[...this._attachments,r],this.notifySubscribers()}async removeAttachment(e){const t=this.getAttachmentAdapter();if(!t)throw new Error("Attachments are not supported");const r=this._attachments.findIndex(s=>s.id===e);if(r===-1)throw new Error("Attachment not found");const n=this._attachments[r];await t.remove(n),this._attachments=this._attachments.toSpliced(r,1),this.notifySubscribers()}_subscriptions=new Set;notifySubscribers(){for(const e of this._subscriptions)e()}subscribe(e){return this._subscriptions.add(e),()=>this._subscriptions.delete(e)}},Bp=class extends bo{constructor(e){super(),this.runtime=e,this.connect()}_canCancel=!1;get canCancel(){return this._canCancel}get attachments(){return super.attachments}getAttachmentAdapter(){return this.runtime.adapters?.attachments}connect(){return this.runtime.subscribe(()=>{this.canCancel!==this.runtime.capabilities.cancel&&(this._canCancel=this.runtime.capabilities.cancel,this.notifySubscribers())})}async handleSend(e){this.runtime.append({...e,parentId:this.runtime.messages.at(-1)?.id??null})}async cancel(){this.runtime.cancelRun()}};let $p=(e,t=21)=>(r=t)=>{let n="",s=r;for(;s--;)n+=e[Math.random()*e.length|0];return n};var jr=$p("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",7),Fp="__optimistic__",Zp=()=>`${Fp}${jr()}`,Up=e=>e.map(t=>Yn(t)),Yn=(e,{id:t=jr(),status:r={type:"complete",reason:"unknown"},attachments:n=[]}={})=>{const s={id:t,createdAt:new Date},a=e.role;switch(a){case"assistant":return{...s,role:a,content:e.content.map(i=>i.type==="tool-call"?{...i,argsText:JSON.stringify(i.args)}:i),status:r,metadata:{steps:[],custom:{}}};case"user":return{...s,role:a,content:e.content,attachments:n,metadata:{custom:{}}};case"system":return{...s,role:a,content:e.content,metadata:{custom:{}}};default:{const i=a;throw new Error(`Unknown message role: ${i}`)}}},ur=e=>e.next?ur(e.next):"current"in e?e:null,zp=class{messages=new Map;head=null;root={children:[],next:null};performOp(e,t,r){const n=t.prev??this.root,s=e??this.root;if(!(r==="relink"&&n===s)){if(r!=="link"&&(n.children=n.children.filter(a=>a!==t.current.id),n.next===t)){const a=n.children.at(-1),i=a?this.messages.get(a):null;if(i===void 0)throw new Error("MessageRepository(performOp/cut): Fallback sibling message not found. This is likely an internal bug in assistant-ui.");n.next=i}if(r!=="cut"){for(let a=e;a;a=a.prev)if(a.current.id===t.current.id)throw new Error("MessageRepository(performOp/link): A message with the same id already exists in the parent tree. This error occurs if the same message id is found multiple times. This is likely an internal bug in assistant-ui.");s.children=[...s.children,t.current.id],(ur(t)===this.head||s.next===null)&&(s.next=t),t.prev=e}}}getMessages(){const e=new Array(this.head?.level??0);for(let t=this.head;t;t=t.prev)e[t.level]=t.current;return e}addOrUpdateMessage(e,t){const r=this.messages.get(t.id),n=e?this.messages.get(e):null;if(n===void 0)throw new Error("MessageRepository(addOrUpdateMessage): Parent message not found. This is likely an internal bug in assistant-ui.");if(r){r.current=t,this.performOp(n,r,"relink");return}const s={prev:n,current:t,next:null,children:[],level:n?n.level+1:0};this.messages.set(t.id,s),this.performOp(n,s,"link"),this.head===n&&(this.head=s)}getMessage(e){const t=this.messages.get(e);if(!t)throw new Error("MessageRepository(updateMessage): Message not found. This is likely an internal bug in assistant-ui.");return{parentId:t.prev?.current.id??null,message:t.current}}appendOptimisticMessage(e,t){let r;do r=Zp();while(this.messages.has(r));return this.addOrUpdateMessage(e,Yn(t,{id:r,status:{type:"running"}})),r}deleteMessage(e,t){const r=this.messages.get(e);if(!r)throw new Error("MessageRepository(deleteMessage): Optimistic message not found. This is likely an internal bug in assistant-ui.");const n=t===void 0?r.prev:t===null?null:this.messages.get(t);if(n===void 0)throw new Error("MessageRepository(deleteMessage): Replacement not found. This is likely an internal bug in assistant-ui.");for(const s of r.children){const a=this.messages.get(s);if(!a)throw new Error("MessageRepository(deleteMessage): Child message not found. This is likely an internal bug in assistant-ui.");this.performOp(n,a,"relink")}this.performOp(null,r,"cut"),this.messages.delete(e),this.head===r&&(this.head=ur(n??this.root))}getBranches(e){const t=this.messages.get(e);if(!t)throw new Error("MessageRepository(getBranches): Message not found. This is likely an internal bug in assistant-ui.");const{children:r}=t.prev??this.root;return r}switchToBranch(e){const t=this.messages.get(e);if(!t)throw new Error("MessageRepository(switchToBranch): Branch not found. This is likely an internal bug in assistant-ui.");const r=t.prev??this.root;r.next=t,this.head=ur(t)}resetHead(e){if(e===null){this.head=null;return}const t=this.messages.get(e);if(!t)throw new Error("MessageRepository(resetHead): Branch not found. This is likely an internal bug in assistant-ui.");this.head=t;for(let r=t;r;r=r.prev)r.prev&&(r.prev.next=r)}export(){const e=[];for(const[,t]of this.messages)e.push({message:t.current,parentId:t.prev?.current.id??null});return{headId:this.head?.current.id??null,messages:e}}import({headId:e,messages:t}){for(const{message:r,parentId:n}of t)this.addOrUpdateMessage(n,r);this.resetHead(e??t.at(-1)?.message.id??null)}},Wp="VisuallyHidden",xo=l.forwardRef((e,t)=>d.jsx(B.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));xo.displayName=Wp;var Vp=xo,[Dr,xy]=Rn("Tooltip",[fi]),Lr=fi(),_o="TooltipProvider",Hp=700,vn="tooltip.open",[qp,Jn]=Dr(_o),wo=e=>{const{__scopeTooltip:t,delayDuration:r=Hp,skipDelayDuration:n=300,disableHoverableContent:s=!1,children:a}=e,[i,o]=l.useState(!0),u=l.useRef(!1),c=l.useRef(0);return l.useEffect(()=>{const h=c.current;return()=>window.clearTimeout(h)},[]),d.jsx(qp,{scope:t,isOpenDelayed:i,delayDuration:r,onOpen:l.useCallback(()=>{window.clearTimeout(c.current),o(!1)},[]),onClose:l.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o(!0),n)},[n]),isPointerInTransitRef:u,onPointerInTransitChange:l.useCallback(h=>{u.current=h},[]),disableHoverableContent:s,children:a})};wo.displayName=_o;var Br="Tooltip",[Yp,$r]=Dr(Br),So=e=>{const{__scopeTooltip:t,children:r,open:n,defaultOpen:s=!1,onOpenChange:a,disableHoverableContent:i,delayDuration:o}=e,u=Jn(Br,e.__scopeTooltip),c=Lr(t),[h,f]=l.useState(null),m=ar(),p=l.useRef(0),v=i??u.disableHoverableContent,g=o??u.delayDuration,y=l.useRef(!1),[b=!1,T]=Si({prop:n,defaultProp:s,onChange:P=>{P?(u.onOpen(),document.dispatchEvent(new CustomEvent(vn))):u.onClose(),a?.(P)}}),w=l.useMemo(()=>b?y.current?"delayed-open":"instant-open":"closed",[b]),S=l.useCallback(()=>{window.clearTimeout(p.current),p.current=0,y.current=!1,T(!0)},[T]),C=l.useCallback(()=>{window.clearTimeout(p.current),p.current=0,T(!1)},[T]),A=l.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{y.current=!0,T(!0),p.current=0},g)},[g,T]);return l.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),d.jsx(ud,{...c,children:d.jsx(Yp,{scope:t,contentId:m,open:b,stateAttribute:w,trigger:h,onTriggerChange:f,onTriggerEnter:l.useCallback(()=>{u.isOpenDelayed?A():S()},[u.isOpenDelayed,A,S]),onTriggerLeave:l.useCallback(()=>{v?C():(window.clearTimeout(p.current),p.current=0)},[C,v]),onOpen:S,onClose:C,disableHoverableContent:v,children:r})})};So.displayName=Br;var yn="TooltipTrigger",Co=l.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,s=$r(yn,r),a=Jn(yn,r),i=Lr(r),o=l.useRef(null),u=ae(t,o,s.onTriggerChange),c=l.useRef(!1),h=l.useRef(!1),f=l.useCallback(()=>c.current=!1,[]);return l.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),d.jsx(ld,{asChild:!0,...i,children:d.jsx(B.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...n,ref:u,onPointerMove:z(e.onPointerMove,m=>{m.pointerType!=="touch"&&!h.current&&!a.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:z(e.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:z(e.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:z(e.onFocus,()=>{c.current||s.onOpen()}),onBlur:z(e.onBlur,s.onClose),onClick:z(e.onClick,s.onClose)})})});Co.displayName=yn;var Jp="TooltipPortal",[_y,Gp]=Dr(Jp,{forceMount:void 0}),yt="TooltipContent",To=l.forwardRef((e,t)=>{const r=Gp(yt,e.__scopeTooltip),{forceMount:n=r.forceMount,side:s="top",...a}=e,i=$r(yt,e.__scopeTooltip);return d.jsx(Yt,{present:n||i.open,children:i.disableHoverableContent?d.jsx(Eo,{side:s,...a,ref:t}):d.jsx(Kp,{side:s,...a,ref:t})})}),Kp=l.forwardRef((e,t)=>{const r=$r(yt,e.__scopeTooltip),n=Jn(yt,e.__scopeTooltip),s=l.useRef(null),a=ae(t,s),[i,o]=l.useState(null),{trigger:u,onClose:c}=r,h=s.current,{onPointerInTransitChange:f}=n,m=l.useCallback(()=>{o(null),f(!1)},[f]),p=l.useCallback((v,g)=>{const y=v.currentTarget,b={x:v.clientX,y:v.clientY},T=tm(b,y.getBoundingClientRect()),w=rm(b,T),S=nm(g.getBoundingClientRect()),C=am([...w,...S]);o(C),f(!0)},[f]);return l.useEffect(()=>()=>m(),[m]),l.useEffect(()=>{if(u&&h){const v=y=>p(y,h),g=y=>p(y,u);return u.addEventListener("pointerleave",v),h.addEventListener("pointerleave",g),()=>{u.removeEventListener("pointerleave",v),h.removeEventListener("pointerleave",g)}}},[u,h,p,m]),l.useEffect(()=>{if(i){const v=g=>{const y=g.target,b={x:g.clientX,y:g.clientY},T=u?.contains(y)||h?.contains(y),w=!sm(b,i);T?m():w&&(m(),c())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[u,h,i,c,m]),d.jsx(Eo,{...e,ref:a})}),[Xp,Qp]=Dr(Br,{isInside:!1}),Eo=l.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:i,...o}=e,u=$r(yt,r),c=Lr(r),{onClose:h}=u;return l.useEffect(()=>(document.addEventListener(vn,h),()=>document.removeEventListener(vn,h)),[h]),l.useEffect(()=>{if(u.trigger){const f=m=>{m.target?.contains(u.trigger)&&h()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[u.trigger,h]),d.jsx(Pn,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:f=>f.preventDefault(),onDismiss:h,children:d.jsxs(dd,{"data-state":u.stateAttribute,...c,...o,ref:t,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[d.jsx(Hc,{children:n}),d.jsx(Xp,{scope:r,isInside:!0,children:d.jsx(Vp,{id:u.contentId,role:"tooltip",children:s||n})})]})})});To.displayName=yt;var ko="TooltipArrow",em=l.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,s=Lr(r);return Qp(ko,r).isInside?null:d.jsx(hd,{...s,...n,ref:t})});em.displayName=ko;function tm(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(r,n,s,a)){case a:return"left";case s:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function rm(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function nm(e){const{top:t,right:r,bottom:n,left:s}=e;return[{x:s,y:t},{x:r,y:t},{x:r,y:n},{x:s,y:n}]}function sm(e,t){const{x:r,y:n}=e;let s=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const o=t[a].x,u=t[a].y,c=t[i].x,h=t[i].y;u>n!=h>n&&r<(c-o)*(n-u)/(h-u)+o&&(s=!s)}return s}function am(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),im(t)}function im(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const s=e[n];for(;t.length>=2;){const a=t[t.length-1],i=t[t.length-2];if((a.x-i.x)*(s.y-i.y)>=(a.y-i.y)*(s.x-i.x))t.pop();else break}t.push(s)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const s=e[n];for(;r.length>=2;){const a=r[r.length-1],i=r[r.length-2];if((a.x-i.x)*(s.y-i.y)>=(a.y-i.y)*(s.x-i.x))r.pop();else break}r.push(s)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var om=wo,cm=So,um=Co,lm=To,Qr={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var Ta;function dm(){return Ta||(Ta=1,function(e){(function(){var t={}.hasOwnProperty;function r(){for(var a="",i=0;i<arguments.length;i++){var o=arguments[i];o&&(a=s(a,n(o)))}return a}function n(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return r.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var i="";for(var o in a)t.call(a,o)&&a[o]&&(i=s(i,o));return i}function s(a,i){return i?a?a+" "+i:a+i:a}e.exports?(r.default=r,e.exports=r):window.classNames=r})()}(Qr)),Qr.exports}var hm=dm();const Fr=wn(hm);var fm=({className:e,...t})=>({className:r,...n})=>({className:Fr(e,r),...t,...n}),D=(e,t)=>{const r=fm(t),n=l.forwardRef((s,a)=>{const i=e;return d.jsx(i,{...r(s),ref:a})});return n.displayName="withDefaults("+(typeof e=="string"?e:e.displayName)+")",n},Gn=e=>d.jsx(om,{children:d.jsx(cm,{...e})});Gn.displayName="Tooltip";var Ao=um,Kn=D(lm,{sideOffset:4,className:"aui-tooltip-content"});Kn.displayName="TooltipContent";var pm=qc("aui-button",{variants:{variant:{default:"aui-button-primary",outline:"aui-button-outline",ghost:"aui-button-ghost"},size:{default:"aui-button-medium",icon:"aui-button-icon"}},defaultVariants:{variant:"default",size:"default"}}),Zr=l.forwardRef(({className:e,variant:t,size:r,...n},s)=>d.jsx(B.button,{className:pm({variant:t,size:r,className:e}),...n,ref:s}));Zr.displayName="Button";var ce=l.forwardRef(({children:e,tooltip:t,side:r="bottom",...n},s)=>d.jsxs(Gn,{children:[d.jsx(Ao,{asChild:!0,children:d.jsxs(Zr,{variant:"ghost",size:"icon",...n,ref:s,children:[e,d.jsx("span",{className:"aui-sr-only",children:t})]})}),d.jsx(Kn,{side:r,children:t})]}));ce.displayName="TooltipIconButton";var mm=(e,t)=>typeof t=="string"?{parentId:e.at(-1)?.id??null,role:"user",content:[{type:"text",text:t}],attachments:[]}:t.role&&t.parentId&&t.attachments?t:{...t,parentId:t.parentId??e.at(-1)?.id??null,role:t.role??"user",attachments:t.attachments??[]},gm=e=>{const t=e.messages.at(-1);return Object.freeze({threadId:e.metadata.threadId,metadata:e.metadata,capabilities:e.capabilities,isDisabled:e.isDisabled,isRunning:t?.role!=="assistant"?!1:t.status.type==="running",messages:e.messages,suggestions:e.suggestions,extras:e.extras,speech:e.speech})},bn=class{get path(){return this._threadBinding.path}unstable_getCore(){return this._threadBinding.getState()}_threadBinding;constructor(e){const t=new Ir({path:e.path,getState:()=>gm(e.getState()),subscribe:r=>e.subscribe(r)});this._threadBinding={path:e.path,getState:()=>e.getState(),getStateState:()=>t.getState(),outerSubscribe:r=>e.outerSubscribe(r),subscribe:r=>e.subscribe(r)},this.composer=new Ph(new mr({path:{...this.path,ref:this.path.ref+`${this.path.ref}.composer`,composerSource:"thread"},getState:()=>this._threadBinding.getState().composer,subscribe:r=>this._threadBinding.subscribe(r)}))}composer;getState(){return this._threadBinding.getStateState()}append(e){this._threadBinding.getState().append(mm(this._threadBinding.getState().messages,e))}subscribe(e){return this._threadBinding.subscribe(e)}getModelConfig(){return this._threadBinding.getState().getModelConfig()}startRun(e){return this._threadBinding.getState().startRun(e)}cancelRun(){this._threadBinding.getState().cancelRun()}stopSpeaking(){return this._threadBinding.getState().stopSpeaking()}getSubmittedFeedback(e){return this._threadBinding.getState().getSubmittedFeedback(e)}export(){return this._threadBinding.getState().export()}import(e){this._threadBinding.getState().import(e)}getMesssageByIndex(e){if(e<0)throw new Error("Message index must be >= 0");return this._getMessageRuntime({...this.path,ref:this.path.ref+`${this.path.ref}.messages[${e}]`,messageSelector:{type:"index",index:e}},()=>{const t=this._threadBinding.getState().messages,r=t[e];if(r)return{message:r,parentId:t[e-1]?.id??null}})}getMesssageById(e){return this._getMessageRuntime({...this.path,ref:this.path.ref+`${this.path.ref}.messages[messageId=${JSON.stringify(e)}]`,messageSelector:{type:"messageId",messageId:e}},()=>this._threadBinding.getState().getMessageById(e))}_getMessageRuntime(e,t){return new Ih(new Le({path:e,getState:()=>{const{message:r,parentId:n}=t()??{},{messages:s,speech:a}=this._threadBinding.getState();if(!r||n===void 0)return Ce;const i=this._threadBinding.getState(),o=i.getBranches(r.id),u=i.getSubmittedFeedback(r.id);return{...r,isLast:s.at(-1)?.id===r.id,parentId:n,branchNumber:o.indexOf(r.id)+1,branchCount:o.length,speech:a?.messageId===r.id?a:void 0,submittedFeedback:u}},subscribe:r=>this._threadBinding.subscribe(r)}),this._threadBinding)}_eventListenerNestedSubscriptions=new Map;unstable_on(e,t){let r=this._eventListenerNestedSubscriptions.get(e);return r||(r=new mr({path:this.path,getState:()=>({subscribe:n=>this._threadBinding.getState().unstable_on(e,n)}),subscribe:n=>this._threadBinding.outerSubscribe(n)}),this._eventListenerNestedSubscriptions.set(e,r)),r.subscribe(t)}},en=class{constructor(e,t){this._core=e,this._threadListBinding=t}get path(){return this._core.path}getState(){return this._core.getState()}switchTo(){const e=this._core.getState();return this._threadListBinding.switchToThread(e.threadId)}rename(e){const t=this._core.getState();return this._threadListBinding.rename(t.threadId,e)}archive(){const e=this._core.getState();return this._threadListBinding.archive(e.threadId)}unarchive(){const e=this._core.getState();return this._threadListBinding.unarchive(e.threadId)}delete(){const e=this._core.getState();return this._threadListBinding.delete(e.threadId)}subscribe(e){return this._core.subscribe(e)}},vm=e=>({mainThreadId:e.mainThread.metadata.threadId,newThread:e.newThread,threads:e.threads,archivedThreads:e.archivedThreads}),tn=(e,t)=>{if(t===void 0)return Ce;const r=e.getThreadMetadataById(t);return r?{threadId:r.threadId,title:r.title,state:r.state,isMain:e.mainThread.metadata.threadId===t}:Ce},ym=class{constructor(e){this._core=e;const t=new Ir({path:{},getState:()=>vm(e),subscribe:r=>e.subscribe(r)});this._getState=t.getState.bind(t)}_getState;getState(){return this._getState()}subscribe(e){return this._core.subscribe(e)}getThreadListItemByIndex(e){return new en(new Le({path:{ref:`threadItems[${e}]`,threadSelector:{type:"index",index:e}},getState:()=>tn(this._core,this._core.threads[e]),subscribe:t=>this._core.subscribe(t)}),this._core)}getThreadListArchivedItemByIndex(e){return new en(new Le({path:{ref:`archivedThreadItems[${e}]`,threadSelector:{type:"archiveIndex",index:e}},getState:()=>tn(this._core,this._core.archivedThreads[e]),subscribe:t=>this._core.subscribe(t)}),this._core)}getThreadListItemById(e){return new en(new Le({path:{ref:`threadItems[threadId=${e}]`,threadSelector:{type:"threadId",threadId:e}},getState:()=>tn(this._core,e),subscribe:t=>this._core.subscribe(t)}),this._core)}},Ea=class xn{constructor(t,r){this._core=t,this._thread=r,this.threadList=new ym(t.threadList)}threadList;get thread(){return this._thread}switchToNewThread(){return this._core.threadList.switchToNewThread()}switchToThread(t){return this._core.threadList.switchToThread(t)}registerModelConfigProvider(t){return this._core.registerModelConfigProvider(t)}static createMainThreadRuntime(t,r=bn){return new r(new mr({path:{ref:"threads.main",threadSelector:{type:"main"}},getState:()=>t.threadList.mainThread,subscribe:n=>t.threadList.subscribe(n)}))}static create(t,r=bn){return new xn(t,xn.createMainThreadRuntime(t,r))}},bm=class{constructor(e){this._threadId=e}_state="new";_title;_subscribers=new Set;get threadId(){return this._threadId}get state(){return this._state}get title(){return this._title}rename(e){return this._title=e,this._notifySubscribers(),Promise.resolve()}archive(){if(this._state==="new")throw new Error("Thread not created");if(this._state==="archived")throw new Error("Thread already archived");if(this._state==="deleted")throw new Error("Thread deleted");return this._state="archived",this._notifySubscribers(),Promise.resolve()}unarchive(){if(this._state!=="archived")throw new Error("Thread not archived");return this._state="regular",this._notifySubscribers(),Promise.resolve()}delete(){if(this._state==="new")throw new Error("Thread not created");if(this._state==="deleted")throw new Error("Thread already deleted");return this._state="deleted",this._notifySubscribers(),Promise.resolve()}create(e){if(this.state!=="new")throw new Error("Thread not new");return this._state="regular",this._title=e??this._title,this._notifySubscribers(),Promise.resolve()}subscribe(e){return this._subscribers.add(e),()=>this._subscribers.delete(e)}_notifySubscribers(){for(const e of this._subscribers)e()}},xm=()=>{const e=[];let t={role:"assistant",content:[]},r={role:"tool",content:[]};return{addTextContentPart:n=>{r.content.length>0&&(e.push(t),e.push(r),t={role:"assistant",content:[]},r={role:"tool",content:[]}),t.content.push(n)},addToolCallPart:n=>{t.content.push({type:"tool-call",toolCallId:n.toolCallId,toolName:n.toolName,args:n.args}),r.content.push({type:"tool-result",toolCallId:n.toolCallId,toolName:n.toolName,result:n.result??"<no result>",isError:n.isError??!1})},getMessages:()=>r.content.length>0?[...e,t,r]:[...e,t]}};function _m(e){return e.flatMap(t=>{const r=t.role;switch(r){case"system":return[{role:"system",content:t.content[0].text}];case"user":return[{role:"user",content:t.content.map(s=>{const a=s.type;switch(a){case"text":return s;case"image":return{type:"image",image:new URL(s.image)};default:{const i=a;throw new Error(`Unspported content part type: ${i}`)}}})}];case"assistant":{const n=xm();for(const s of t.content){const a=s.type;switch(a){case"text":{n.addTextContentPart(s);break}case"tool-call":{n.addToolCallPart(s);break}default:{const i=a;throw new Error(`Unhandled content part type: ${i}`)}}}return n.getMessages()}default:{const n=r;throw new Error(`Unknown message role: ${n}`)}}})}var wm=(e,t={})=>e.map(r=>Sm(r,t)),Sm=(e,t={})=>{const r=t.unstable_includeId??!1,n=e.role;switch(n){case"assistant":return{role:n,content:e.content.map(s=>{if(s.type==="ui")throw new Error("UI parts are not supported");if(s.type==="tool-call"){const{argsText:a,...i}=s;return i}return s}),...r?{unstable_id:e.id}:{}};case"user":return{role:n,content:[...e.content.map(s=>{if(s.type==="ui")throw new Error("UI parts are not supported");return s}),...e.attachments.map(s=>s.content).flat()],...r?{unstable_id:e.id}:{}};case"system":return{role:n,content:e.content,...r?{unstable_id:e.id}:{}};default:{const s=n;throw new Error(`Unknown message role: ${s}`)}}};const Cm=Symbol("Let zodToJsonSchema decide on which parser to use"),ka={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},Tm=e=>typeof e=="string"?{...ka,name:e}:{...ka,...e},Em=e=>{const t=Tm(e),r=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([n,s])=>[s._def,{def:s._def,path:[...t.basePath,t.definitionPath,n],jsonSchema:void 0}]))}};function Ro(e,t,r,n){n?.errorMessages&&r&&(e.errorMessage={...e.errorMessage,[t]:r})}function F(e,t,r,n,s){e[t]=r,Ro(e,t,n,s)}function km(){return{}}function Am(e,t){const r={type:"array"};return e.type?._def&&e.type?._def?.typeName!==_.ZodAny&&(r.items=j(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&F(r,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&F(r,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(F(r,"minItems",e.exactLength.value,e.exactLength.message,t),F(r,"maxItems",e.exactLength.value,e.exactLength.message,t)),r}function Rm(e,t){const r={type:"integer",format:"int64"};if(!e.checks)return r;for(const n of e.checks)switch(n.kind){case"min":t.target==="jsonSchema7"?n.inclusive?F(r,"minimum",n.value,n.message,t):F(r,"exclusiveMinimum",n.value,n.message,t):(n.inclusive||(r.exclusiveMinimum=!0),F(r,"minimum",n.value,n.message,t));break;case"max":t.target==="jsonSchema7"?n.inclusive?F(r,"maximum",n.value,n.message,t):F(r,"exclusiveMaximum",n.value,n.message,t):(n.inclusive||(r.exclusiveMaximum=!0),F(r,"maximum",n.value,n.message,t));break;case"multipleOf":F(r,"multipleOf",n.value,n.message,t);break}return r}function Pm(){return{type:"boolean"}}function Po(e,t){return j(e.type._def,t)}const Nm=(e,t)=>j(e.innerType._def,t);function No(e,t,r){const n=r??t.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((s,a)=>No(e,t,s))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return Mm(e,t)}}const Mm=(e,t)=>{const r={type:"integer",format:"unix-time"};if(t.target==="openApi3")return r;for(const n of e.checks)switch(n.kind){case"min":F(r,"minimum",n.value,n.message,t);break;case"max":F(r,"maximum",n.value,n.message,t);break}return r};function Im(e,t){return{...j(e.innerType._def,t),default:e.defaultValue()}}function Om(e,t){return t.effectStrategy==="input"?j(e.schema._def,t):{}}function jm(e){return{type:"string",enum:e.values}}const Dm=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function Lm(e,t){const r=[j(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),j(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(a=>!!a);let n=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const s=[];return r.forEach(a=>{if(Dm(a))s.push(...a.allOf),a.unevaluatedProperties===void 0&&(n=void 0);else{let i=a;if("additionalProperties"in a&&a.additionalProperties===!1){const{additionalProperties:o,...u}=a;i=u}else n=void 0;s.push(i)}}),s.length?{allOf:s,...n}:void 0}function Bm(e,t){const r=typeof e.value;return r!=="bigint"&&r!=="number"&&r!=="boolean"&&r!=="string"?{type:Array.isArray(e.value)?"array":"object"}:t.target==="openApi3"?{type:r==="bigint"?"integer":r,enum:[e.value]}:{type:r==="bigint"?"integer":r,const:e.value}}let rn;const Qe={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(rn===void 0&&(rn=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),rn),base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/};function Mo(e,t){const r={type:"string"};function n(s){return t.patternStrategy==="escape"?$m(s):s}if(e.checks)for(const s of e.checks)switch(s.kind){case"min":F(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,s.value):s.value,s.message,t);break;case"max":F(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,s.value):s.value,s.message,t);break;case"email":switch(t.emailStrategy){case"format:email":ye(r,"email",s.message,t);break;case"format:idn-email":ye(r,"idn-email",s.message,t);break;case"pattern:zod":be(r,Qe.email,s.message,t);break}break;case"url":ye(r,"uri",s.message,t);break;case"uuid":ye(r,"uuid",s.message,t);break;case"regex":be(r,s.regex,s.message,t);break;case"cuid":be(r,Qe.cuid,s.message,t);break;case"cuid2":be(r,Qe.cuid2,s.message,t);break;case"startsWith":be(r,RegExp(`^${n(s.value)}`),s.message,t);break;case"endsWith":be(r,RegExp(`${n(s.value)}$`),s.message,t);break;case"datetime":ye(r,"date-time",s.message,t);break;case"date":ye(r,"date",s.message,t);break;case"time":ye(r,"time",s.message,t);break;case"duration":ye(r,"duration",s.message,t);break;case"length":F(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,s.value):s.value,s.message,t),F(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,s.value):s.value,s.message,t);break;case"includes":{be(r,RegExp(n(s.value)),s.message,t);break}case"ip":{s.version!=="v6"&&ye(r,"ipv4",s.message,t),s.version!=="v4"&&ye(r,"ipv6",s.message,t);break}case"emoji":be(r,Qe.emoji,s.message,t);break;case"ulid":{be(r,Qe.ulid,s.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{ye(r,"binary",s.message,t);break}case"contentEncoding:base64":{F(r,"contentEncoding","base64",s.message,t);break}case"pattern:zod":{be(r,Qe.base64,s.message,t);break}}break}case"nanoid":be(r,Qe.nanoid,s.message,t)}return r}const $m=e=>Array.from(e).map(t=>/[a-zA-Z0-9]/.test(t)?t:`\\${t}`).join(""),ye=(e,t,r,n)=>{e.format||e.anyOf?.some(s=>s.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&n.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.anyOf.push({format:t,...r&&n.errorMessages&&{errorMessage:{format:r}}})):F(e,"format",t,r,n)},be=(e,t,r,n)=>{e.pattern||e.allOf?.some(s=>s.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&n.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.allOf.push({pattern:Aa(t,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):F(e,"pattern",Aa(t,n),r,n)},Aa=(e,t)=>{const r=typeof e=="function"?e():e;if(!t.applyRegexFlags||!r.flags)return r.source;const n={i:r.flags.includes("i"),m:r.flags.includes("m"),s:r.flags.includes("s")},s=n.i?r.source.toLowerCase():r.source;let a="",i=!1,o=!1,u=!1;for(let c=0;c<s.length;c++){if(i){a+=s[c],i=!1;continue}if(n.i){if(o){if(s[c].match(/[a-z]/)){u?(a+=s[c],a+=`${s[c-2]}-${s[c]}`.toUpperCase(),u=!1):s[c+1]==="-"&&s[c+2]?.match(/[a-z]/)?(a+=s[c],u=!0):a+=`${s[c]}${s[c].toUpperCase()}`;continue}}else if(s[c].match(/[a-z]/)){a+=`[${s[c]}${s[c].toUpperCase()}]`;continue}}if(n.m){if(s[c]==="^"){a+=`(^|(?<=[\r
]))`;continue}else if(s[c]==="$"){a+=`($|(?=[\r
]))`;continue}}if(n.s&&s[c]==="."){a+=o?`${s[c]}\r
`:`[${s[c]}\r
]`;continue}a+=s[c],s[c]==="\\"?i=!0:o&&s[c]==="]"?o=!1:!o&&s[c]==="["&&(o=!0)}try{const c=new RegExp(a)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),r.source}return a};function Io(e,t){if(t.target==="openApi3"&&e.keyType?._def.typeName===_.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((n,s)=>({...n,[s]:j(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",s]})??{}}),{}),additionalProperties:!1};const r={type:"object",additionalProperties:j(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??{}};if(t.target==="openApi3")return r;if(e.keyType?._def.typeName===_.ZodString&&e.keyType._def.checks?.length){const{type:n,...s}=Mo(e.keyType._def,t);return{...r,propertyNames:s}}else{if(e.keyType?._def.typeName===_.ZodEnum)return{...r,propertyNames:{enum:e.keyType._def.values}};if(e.keyType?._def.typeName===_.ZodBranded&&e.keyType._def.type._def.typeName===_.ZodString&&e.keyType._def.type._def.checks?.length){const{type:n,...s}=Po(e.keyType._def,t);return{...r,propertyNames:s}}}return r}function Fm(e,t){if(t.mapStrategy==="record")return Io(e,t);const r=j(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},n=j(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}function Zm(e){const t=e.values,n=Object.keys(e.values).filter(a=>typeof t[t[a]]!="number").map(a=>t[a]),s=Array.from(new Set(n.map(a=>typeof a)));return{type:s.length===1?s[0]==="string"?"string":"number":["string","number"],enum:n}}function Um(){return{not:{}}}function zm(e){return e.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const Sr={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Wm(e,t){if(t.target==="openApi3")return Ra(e,t);const r=e.options instanceof Map?Array.from(e.options.values()):e.options;if(r.every(n=>n._def.typeName in Sr&&(!n._def.checks||!n._def.checks.length))){const n=r.reduce((s,a)=>{const i=Sr[a._def.typeName];return i&&!s.includes(i)?[...s,i]:s},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){const n=r.reduce((s,a)=>{const i=typeof a._def.value;switch(i){case"string":case"number":case"boolean":return[...s,i];case"bigint":return[...s,"integer"];case"object":if(a._def.value===null)return[...s,"null"];case"symbol":case"undefined":case"function":default:return s}},[]);if(n.length===r.length){const s=n.filter((a,i,o)=>o.indexOf(a)===i);return{type:s.length>1?s:s[0],enum:r.reduce((a,i)=>a.includes(i._def.value)?a:[...a,i._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,s)=>[...n,...s._def.values.filter(a=>!n.includes(a))],[])};return Ra(e,t)}const Ra=(e,t)=>{const r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((n,s)=>j(n._def,{...t,currentPath:[...t.currentPath,"anyOf",`${s}`]})).filter(n=>!!n&&(!t.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0};function Vm(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return t.target==="openApi3"?{type:Sr[e.innerType._def.typeName],nullable:!0}:{type:[Sr[e.innerType._def.typeName],"null"]};if(t.target==="openApi3"){const n=j(e.innerType._def,{...t,currentPath:[...t.currentPath]});return n&&"$ref"in n?{allOf:[n],nullable:!0}:n&&{...n,nullable:!0}}const r=j(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function Hm(e,t){const r={type:"number"};if(!e.checks)return r;for(const n of e.checks)switch(n.kind){case"int":r.type="integer",Ro(r,"type",n.message,t);break;case"min":t.target==="jsonSchema7"?n.inclusive?F(r,"minimum",n.value,n.message,t):F(r,"exclusiveMinimum",n.value,n.message,t):(n.inclusive||(r.exclusiveMinimum=!0),F(r,"minimum",n.value,n.message,t));break;case"max":t.target==="jsonSchema7"?n.inclusive?F(r,"maximum",n.value,n.message,t):F(r,"exclusiveMaximum",n.value,n.message,t):(n.inclusive||(r.exclusiveMaximum=!0),F(r,"maximum",n.value,n.message,t));break;case"multipleOf":F(r,"multipleOf",n.value,n.message,t);break}return r}function qm(e,t){return t.removeAdditionalStrategy==="strict"?e.catchall._def.typeName==="ZodNever"?e.unknownKeys!=="strict":j(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??!0:e.catchall._def.typeName==="ZodNever"?e.unknownKeys==="passthrough":j(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??!0}function Ym(e,t){const r={type:"object",...Object.entries(e.shape()).reduce((n,[s,a])=>{if(a===void 0||a._def===void 0)return n;const i=j(a._def,{...t,currentPath:[...t.currentPath,"properties",s],propertyPath:[...t.currentPath,"properties",s]});return i===void 0?n:{properties:{...n.properties,[s]:i},required:a.isOptional()?n.required:[...n.required,s]}},{properties:{},required:[]}),additionalProperties:qm(e,t)};return r.required.length||delete r.required,r}const Jm=(e,t)=>{if(t.currentPath.toString()===t.propertyPath?.toString())return j(e.innerType._def,t);const r=j(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return r?{anyOf:[{not:{}},r]}:{}},Gm=(e,t)=>{if(t.pipeStrategy==="input")return j(e.in._def,t);if(t.pipeStrategy==="output")return j(e.out._def,t);const r=j(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),n=j(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(s=>s!==void 0)}};function Km(e,t){return j(e.type._def,t)}function Xm(e,t){const n={type:"array",uniqueItems:!0,items:j(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&F(n,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&F(n,"maxItems",e.maxSize.value,e.maxSize.message,t),n}function Qm(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((r,n)=>j(r._def,{...t,currentPath:[...t.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:j(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((r,n)=>j(r._def,{...t,currentPath:[...t.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[])}}function eg(){return{not:{}}}function tg(){return{}}const rg=(e,t)=>j(e.innerType._def,t);function j(e,t,r=!1){const n=t.seen.get(e);if(t.override){const i=t.override?.(e,t,n,r);if(i!==Cm)return i}if(n&&!r){const i=ng(n,t);if(i!==void 0)return i}const s={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,s);const a=ag(e,e.typeName,t);return a&&ig(e,t,a),s.jsonSchema=a,a}const ng=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:sg(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((r,n)=>t.currentPath[n]===r)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{}):t.$refStrategy==="seen"?{}:void 0}},sg=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")},ag=(e,t,r)=>{switch(t){case _.ZodString:return Mo(e,r);case _.ZodNumber:return Hm(e,r);case _.ZodObject:return Ym(e,r);case _.ZodBigInt:return Rm(e,r);case _.ZodBoolean:return Pm();case _.ZodDate:return No(e,r);case _.ZodUndefined:return eg();case _.ZodNull:return zm(r);case _.ZodArray:return Am(e,r);case _.ZodUnion:case _.ZodDiscriminatedUnion:return Wm(e,r);case _.ZodIntersection:return Lm(e,r);case _.ZodTuple:return Qm(e,r);case _.ZodRecord:return Io(e,r);case _.ZodLiteral:return Bm(e,r);case _.ZodEnum:return jm(e);case _.ZodNativeEnum:return Zm(e);case _.ZodNullable:return Vm(e,r);case _.ZodOptional:return Jm(e,r);case _.ZodMap:return Fm(e,r);case _.ZodSet:return Xm(e,r);case _.ZodLazy:return j(e.getter()._def,r);case _.ZodPromise:return Km(e,r);case _.ZodNaN:case _.ZodNever:return Um();case _.ZodEffects:return Om(e,r);case _.ZodAny:return km();case _.ZodUnknown:return tg();case _.ZodDefault:return Im(e,r);case _.ZodBranded:return Po(e,r);case _.ZodReadonly:return rg(e,r);case _.ZodCatch:return Nm(e,r);case _.ZodPipeline:return Gm(e,r);case _.ZodFunction:case _.ZodVoid:case _.ZodSymbol:return;default:return(n=>{})()}},ig=(e,t,r)=>(e.description&&(r.description=e.description,t.markdownDescription&&(r.markdownDescription=e.description)),r),og=(e,t)=>{const r=Em(t),n=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((u,[c,h])=>({...u,[c]:j(h._def,{...r,currentPath:[...r.basePath,r.definitionPath,c]},!0)??{}}),{}):void 0,s=typeof t=="string"?t:t?.nameStrategy==="title"?void 0:t?.name,a=j(e._def,s===void 0?r:{...r,currentPath:[...r.basePath,r.definitionPath,s]},!1)??{},i=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;i!==void 0&&(a.title=i);const o=s===void 0?n?{...a,[r.definitionPath]:n}:a:{$ref:[...r.$refStrategy==="relative"?[]:r.basePath,r.definitionPath,s].join("/"),[r.definitionPath]:{...n,[s]:a}};return r.target==="jsonSchema7"?o.$schema="http://json-schema.org/draft-07/schema#":r.target==="jsonSchema2019-09"&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),o};var cg=e=>Object.entries(e).map(([t,r])=>({type:"function",name:t,...r.description?{description:r.description}:void 0,parameters:r.parameters instanceof re.ZodType?og(r.parameters):r.parameters}));function ug(){let e="";return new TransformStream({transform(t,r){e+=t;const n=e.split(`
`);for(let s=0;s<n.length-1;s++)r.enqueue(n[s]);e=n[n.length-1]},flush(t){e&&t.enqueue(e)}})}var lg=class extends TransformStream{constructor(e){super();const t=e(super.readable);Object.defineProperty(this,"readable",{value:t,writable:!1})}},dg=e=>{const t=e.indexOf(":");if(t===-1)throw new Error("Invalid stream part");return{type:e.slice(0,t),value:JSON.parse(e.slice(t+1))}};function hg(){const e=new TransformStream({transform(t,r){r.enqueue(dg(t))}});return new lg(t=>t.pipeThrough(new TextDecoderStream).pipeThrough(ug()).pipeThrough(e))}var ge=(e=>(e.TextDelta="0",e.Data="2",e.Error="3",e.ToolCall="9",e.ToolCallResult="a",e.ToolCallBegin="b",e.ToolCallDelta="c",e.Finish="d",e.StepFinish="e",e))(ge||{});function fg(){const e=new Map;let t;return new TransformStream({transform({type:r,value:n},s){switch(t&&r!==ge.ToolCallDelta&&r!==ge.Error&&(s.enqueue({type:"tool-call",toolCallType:"function",toolCallId:t.id,toolName:t.name,args:t.argsText}),t=void 0),r){case ge.TextDelta:{s.enqueue({type:"text-delta",textDelta:n});break}case ge.ToolCallBegin:{const{toolCallId:a,toolName:i}=n;e.set(a,i),t={id:a,name:i,argsText:""},s.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:a,toolName:i,argsTextDelta:""});break}case ge.ToolCallDelta:{const{toolCallId:a,argsTextDelta:i}=n,o=e.get(a);t?.id===a&&(t.argsText+=i),s.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:a,toolName:o,argsTextDelta:i});break}case ge.ToolCallResult:{s.enqueue({type:"tool-result",toolCallType:"function",toolCallId:n.toolCallId,toolName:e.get(n.toolCallId),result:n.result});break}case ge.Finish:{s.enqueue({type:"finish",...n});break}case ge.Error:{s.enqueue({type:"error",error:n});break}case ge.ToolCall:{const{toolCallId:a,toolName:i,args:o}=n;e.set(a,i);const u=JSON.stringify(o);s.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:a,toolName:i,argsTextDelta:u}),s.enqueue({type:"tool-call",toolCallType:"function",toolCallId:a,toolName:i,args:u});break}case ge.StepFinish:{s.enqueue({type:"step-finish",...n});break}case ge.Data:break;default:{const a=r;throw new Error(`Unhandled chunk type: ${a}`)}}}})}var et={exports:{}},Pa;function pg(){if(Pa)return et.exports;Pa=1;const e=typeof Buffer<"u",t=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,r=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function n(o,u,c){c==null&&u!==null&&typeof u=="object"&&(c=u,u=void 0),e&&Buffer.isBuffer(o)&&(o=o.toString()),o&&o.charCodeAt(0)===65279&&(o=o.slice(1));const h=JSON.parse(o,u);if(h===null||typeof h!="object")return h;const f=c&&c.protoAction||"error",m=c&&c.constructorAction||"error";if(f==="ignore"&&m==="ignore")return h;if(f!=="ignore"&&m!=="ignore"){if(t.test(o)===!1&&r.test(o)===!1)return h}else if(f!=="ignore"&&m==="ignore"){if(t.test(o)===!1)return h}else if(r.test(o)===!1)return h;return s(h,{protoAction:f,constructorAction:m,safe:c&&c.safe})}function s(o,{protoAction:u="error",constructorAction:c="error",safe:h}={}){let f=[o];for(;f.length;){const m=f;f=[];for(const p of m){if(u!=="ignore"&&Object.prototype.hasOwnProperty.call(p,"__proto__")){if(h===!0)return null;if(u==="error")throw new SyntaxError("Object contains forbidden prototype property");delete p.__proto__}if(c!=="ignore"&&Object.prototype.hasOwnProperty.call(p,"constructor")&&Object.prototype.hasOwnProperty.call(p.constructor,"prototype")){if(h===!0)return null;if(c==="error")throw new SyntaxError("Object contains forbidden prototype property");delete p.constructor}for(const v in p){const g=p[v];g&&typeof g=="object"&&f.push(g)}}}return o}function a(o,u,c){const h=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return n(o,u,c)}finally{Error.stackTraceLimit=h}}function i(o,u){const c=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return n(o,u,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=c}}return et.exports=a,et.exports.default=a,et.exports.parse=a,et.exports.safeParse=i,et.exports.scan=s,et.exports}var mg=pg();const _n=wn(mg);function gg(e){const t=["ROOT"];let r=-1,n=null;function s(u,c,h){switch(u){case'"':{r=c,t.pop(),t.push(h),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{r=c,n=c,t.pop(),t.push(h),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(h),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{r=c,t.pop(),t.push(h),t.push("INSIDE_NUMBER");break}case"{":{r=c,t.pop(),t.push(h),t.push("INSIDE_OBJECT_START");break}case"[":{r=c,t.pop(),t.push(h),t.push("INSIDE_ARRAY_START");break}}}function a(u,c){switch(u){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{r=c,t.pop();break}}}function i(u,c){switch(u){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{r=c,t.pop();break}}}for(let u=0;u<e.length;u++){const c=e[u];switch(t[t.length-1]){case"ROOT":s(c,u,"FINISH");break;case"INSIDE_OBJECT_START":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{r=u,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(c){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{s(c,u,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{a(c,u);break}case"INSIDE_STRING":{switch(c){case'"':{t.pop(),r=u;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:r=u}break}case"INSIDE_ARRAY_START":{switch(c){case"]":{r=u,t.pop();break}default:{r=u,s(c,u,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(c){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{r=u,t.pop();break}default:{r=u;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{s(c,u,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),r=u;break}case"INSIDE_NUMBER":{switch(c){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{r=u;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&i(c,u),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&a(c,u);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&a(c,u);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&i(c,u);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{const f=e.substring(n,u+1);!"false".startsWith(f)&&!"true".startsWith(f)&&!"null".startsWith(f)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?a(c,u):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&i(c,u)):r=u;break}}}let o=e.slice(0,r+1);for(let u=t.length-1;u>=0;u--)switch(t[u]){case"INSIDE_STRING":{o+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{o+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{o+="]";break}case"INSIDE_LITERAL":{const h=e.substring(n,e.length);"true".startsWith(h)?o+="true".slice(h.length):"false".startsWith(h)?o+="false".slice(h.length):"null".startsWith(h)&&(o+="null".slice(h.length))}}return o}var Na=e=>{try{return _n.parse(e)}catch{try{return _n.parse(gg(e))}catch{return}}};function vg(){let e={content:[],status:{type:"running"}};return new TransformStream({transform(t,r){const n=t.type;switch(n){case"text-delta":{e=yg(e,t.textDelta),r.enqueue(e);break}case"tool-call-delta":{const{toolCallId:s,toolName:a,argsTextDelta:i}=t;e=bg(e,s,a,i),r.enqueue(e);break}case"tool-call":case"response-metadata":break;case"tool-result":{e=xg(e,t.toolCallId,t.toolName,t.result),r.enqueue(e);break}case"step-finish":{e=_g(e,t),r.enqueue(e);break}case"finish":{e=wg(e,t),r.enqueue(e);break}case"error":if(t.error instanceof Error&&t.error.name==="AbortError"){e=Cg(e),r.enqueue(e);break}else throw t.error;default:{const s=n;throw new Error(`Unhandled chunk type: ${s}`)}}}})}var yg=(e,t)=>{let r=e.content??[],n=e.content?.at(-1);return n?.type!=="text"?n={type:"text",text:t}:(r=r.slice(0,-1),n={type:"text",text:n.text+t}),{...e,content:r.concat([n])}},bg=(e,t,r,n)=>{let s=e.content??[];const a=s.findIndex(o=>o.type==="tool-call"&&o.toolCallId===t);let i=a===-1?null:s[a];if(i==null)i={type:"tool-call",toolCallId:t,toolName:r,argsText:n,args:Na(n)},s=[...s,i];else{const o=i.argsText+n;i={...i,argsText:o,args:Na(o)},s=[...s.slice(0,a),i,...s.slice(a+1)]}return{...e,content:s}},xg=(e,t,r,n)=>{let s=!1;const a=e.content?.map(i=>{if(i.type!=="tool-call"||i.toolCallId!==t)return i;if(s=!0,i.toolName!==r)throw new Error(`Tool call ${t} found with tool name ${i.toolName}, but expected ${r}`);return{...i,result:n}});if(!s)throw new Error(`Received tool result for unknown tool call "${r}" / "${t}". This is likely an internal bug in assistant-ui.`);return{...e,content:a}},_g=(e,t)=>{const{type:r,...n}=t,s=[...e.metadata?.steps??[],{usage:n.usage}];return{...e,metadata:{...e.metadata,steps:s}}},wg=(e,t)=>{const{type:r,...n}=t,s=[...e.metadata?.steps??[],{logprobs:n.logprobs,usage:n.usage}];return{...e,status:Sg(t),metadata:{...e.metadata,steps:s}}},Sg=e=>e.finishReason==="tool-calls"?{type:"requires-action",reason:"tool-calls"}:e.finishReason==="stop"||e.finishReason==="unknown"?{type:"complete",reason:e.finishReason}:{type:"incomplete",reason:e.finishReason},Cg=e=>({...e,status:{type:"incomplete",reason:"cancelled"}});function Tg(e,t){const r=new Map;return new TransformStream({transform(n,s){s.enqueue(n);const a=n.type;switch(a){case"tool-call":{const{toolCallId:i,toolCallType:o,toolName:u,args:c}=n,h=e?.[u];if(!h||!h.execute)return;const f=_n.parse(c);if(h.parameters instanceof re.ZodType){const m=h.parameters.safeParse(f);if(m.success)r.set(i,(async()=>{if(h.execute)try{const p=await h.execute(f,{abortSignal:t});s.enqueue({type:"tool-result",toolCallType:o,toolCallId:i,toolName:u,result:p})}catch(p){s.enqueue({type:"tool-result",toolCallType:o,toolCallId:i,toolName:u,result:"Error: "+p,isError:!0})}finally{r.delete(i)}})());else{s.enqueue({type:"tool-result",toolCallType:o,toolCallId:i,toolName:u,result:"Function parameter validation failed. "+JSON.stringify(m.error.issues),isError:!0});return}}break}case"text-delta":case"tool-call-delta":case"tool-result":case"step-finish":case"finish":case"error":case"response-metadata":break;default:{const i=a;throw new Error(`Unhandled chunk type: ${i}`)}}},async flush(){await Promise.all(r.values())}})}function Eg(e){return{[Symbol.asyncIterator]:()=>{const t=e.getReader();return{async next(){const{done:r,value:n}=await t.read();return r?{done:!0,value:void 0}:{done:!1,value:n}}}}}}var kg=class{constructor(e){this.options=e}async*run({messages:e,abortSignal:t,config:r,unstable_assistantMessageId:n}){const s=new Headers(this.options.headers);s.set("Content-Type","application/json");const a=await fetch(this.options.api,{method:"POST",headers:s,credentials:this.options.credentials??"same-origin",body:JSON.stringify({system:r.system,messages:this.options.unstable_AISDKInterop?_m(e):wm(e,{unstable_includeId:this.options.unstable_sendMessageIds}),tools:r.tools?cg(r.tools):[],unstable_assistantMessageId:n,...r.callSettings,...r.config,...this.options.body}),signal:t});if(!a.ok)throw new Error(`Status ${a.status}: ${await a.text()}`);const i=a.body.pipeThrough(hg()).pipeThrough(fg()).pipeThrough(Tg(r.tools,t)).pipeThrough(vg());let o;for await(o of Eg(i))yield o;if(o===void 0)throw new Error("No data received from Edge Runtime")}},Ag=e=>{const{initialMessages:t,maxSteps:r,adapters:n,...s}=e;return{localRuntimeOptions:{initialMessages:t,maxSteps:r,adapters:n},otherOptions:s}},wy=e=>{const{localRuntimeOptions:t,otherOptions:r}=Ag(e);return jg(new kg(r),t)},Ma=e=>e.status?.type==="requires-action"&&e.status.reason==="tool-calls"&&e.content.every(t=>t.type!=="tool-call"||!!t.result),Rg=class extends bo{constructor(e,t,{parentId:r,message:n}){super(),this.runtime=e,this.endEditCallback=t,this._parentId=r,this._previousText=pr(n),this.setText(this._previousText),this.setRole(n.role),this.setAttachments(n.attachments??[]),this._nonTextParts=n.content.filter(s=>s.type!=="text"&&s.type!=="ui")}get canCancel(){return!0}getAttachmentAdapter(){return this.runtime.adapters?.attachments}_nonTextParts;_previousText;_parentId;async handleSend(e){pr(e)!==this._previousText&&this.runtime.append({...e,content:[...e.content,...this._nonTextParts],parentId:this._parentId}),this.endEditCallback(),this.notifySubscribers()}async cancel(){this.endEditCallback(),this.notifySubscribers()}},Pg=class{constructor(e,t){this._configProvider=e,this._metadata=t}_subscriptions=new Set;repository=new zp;get metadata(){return this._metadata}get messages(){return this.repository.getMessages()}composer=new Bp(this);getModelConfig(){return this._configProvider.getModelConfig()}_editComposers=new Map;getEditComposer(e){return this._editComposers.get(e)}beginEdit(e){if(this._editComposers.has(e))throw new Error("Edit already in progress");this._editComposers.set(e,new Rg(this,()=>this._editComposers.delete(e),this.repository.getMessage(e))),this._notifySubscribers()}getMessageById(e){return this.repository.getMessage(e)}getBranches(e){return this.repository.getBranches(e)}switchToBranch(e){this.repository.switchToBranch(e),this._notifySubscribers()}_notifySubscribers(){for(const e of this._subscriptions)e()}_notifyEventSubscribers(e){const t=this._eventSubscribers.get(e);if(t)for(const r of t)r()}subscribe(e){return this._subscriptions.add(e),()=>this._subscriptions.delete(e)}_submittedFeedback={};getSubmittedFeedback(e){return this._submittedFeedback[e]}submitFeedback({messageId:e,type:t}){const r=this.adapters?.feedback;if(!r)throw new Error("Feedback adapter not configured");const{message:n}=this.repository.getMessage(e);r.submit({message:n,type:t}),this._submittedFeedback[e]={type:t},this._notifySubscribers()}_stopSpeaking;speech;speak(e){const t=this.adapters?.speech;if(!t)throw new Error("Speech adapter not configured");const{message:r}=this.repository.getMessage(e);this._stopSpeaking?.();const n=t.speak(pr(r)),s=n.subscribe(()=>{n.status.type==="ended"?(this._stopSpeaking=void 0,this.speech=void 0):this.speech={messageId:e,status:n.status},this._notifySubscribers()});this.speech={messageId:e,status:n.status},this._notifySubscribers(),this._stopSpeaking=()=>{n.cancel(),s(),this.speech=void 0,this._stopSpeaking=void 0}}stopSpeaking(){if(!this._stopSpeaking)throw new Error("No message is being spoken");this._stopSpeaking(),this._notifySubscribers()}export(){return this.repository.export()}import(e){this.repository.import(e),this._notifySubscribers()}_eventSubscribers=new Map;unstable_on(e,t){if(e==="model-config-update")return this._configProvider.subscribe?.(t)??(()=>{});const r=this._eventSubscribers.get(e);return r?r.add(t):this._eventSubscribers.set(e,new Set([t])),()=>{this._eventSubscribers.get(e).delete(t)}}},Ng=class extends Pg{capabilities={switchToBranch:!0,edit:!0,reload:!0,cancel:!0,unstable_copy:!0,speech:!1,attachments:!1,feedback:!1};abortController=null;isDisabled=!1;suggestions=[];get adapters(){return this._options.adapters}constructor(e,t,r){super(e,new bm(t)),this.setOptions(r)}_options;get extras(){}setOptions(e){if(this._options===e)return;this._options=e;let t=!1;const r=e.adapters?.speech!==void 0;this.capabilities.speech!==r&&(this.capabilities.speech=r,t=!0);const n=e.adapters?.attachments!==void 0;this.capabilities.attachments!==n&&(this.capabilities.attachments=n,t=!0);const s=e.adapters?.feedback!==void 0;this.capabilities.feedback!==s&&(this.capabilities.feedback=s,t=!0),t&&this._notifySubscribers()}_transitionAwayFromNewState(){this.metadata.state==="new"&&this.metadata.create()}async append(e){this._transitionAwayFromNewState();const t=Yn(e,{attachments:e.attachments});this.repository.addOrUpdateMessage(e.parentId,t),e.startRun??e.role==="user"?await this.startRun(t.id):(this.repository.resetHead(t.id),this._notifySubscribers())}async startRun(e){this._transitionAwayFromNewState(),this.repository.resetHead(e);let r={id:jr(),role:"assistant",status:{type:"running"},content:[],metadata:{steps:[],custom:{}},createdAt:new Date};this._notifyEventSubscribers("run-start");do r=await this.performRoundtrip(e,r);while(Ma(r))}async performRoundtrip(e,t){const r=this.repository.getMessages();this.abortController?.abort(),this.abortController=new AbortController;const n=t.content,s=t.metadata?.steps,a=t.metadata?.custom,i=c=>{const h=c.metadata?.steps,f=h?[...s??[],...h]:void 0;t={...t,...c.content?{content:[...n,...c.content??[]]}:void 0,status:c.status??t.status,...c.metadata?{metadata:{...t.metadata,...f?{steps:f}:void 0,...c.metadata?.custom?{custom:{...a??{},...c.metadata.custom}}:void 0}}:void 0},this.repository.addOrUpdateMessage(e,t),this._notifySubscribers()},o=this._options.maxSteps??2;if((t.metadata?.steps?.length??0)>=o)return i({status:{type:"incomplete",reason:"tool-calls"}}),t;i({status:{type:"running"}});try{const c=this.adapters.chatModel.run({messages:r,abortSignal:this.abortController.signal,config:this.getModelConfig(),unstable_assistantMessageId:t.id});if(Symbol.asyncIterator in c)for await(const h of c)i(h);else i(await c);this.abortController=null,t.status.type==="running"&&i({status:{type:"complete",reason:"unknown"}})}catch(c){if(this.abortController=null,c instanceof Error&&c.name==="AbortError")i({status:{type:"incomplete",reason:"cancelled"}});else throw i({status:{type:"incomplete",reason:"error",error:c}}),c}return t}cancelRun(){this.abortController?.abort(),this.abortController=null}addToolResult({messageId:e,toolCallId:t,result:r}){const n=this.repository.getMessage(e),{parentId:s}=n;let{message:a}=n;if(a.role!=="assistant")throw new Error("Tried to add tool result to non-assistant message");let i=!1,o=!1;const u=a.content.map(c=>c.type!=="tool-call"||c.toolCallId!==t?c:(o=!0,c.result||(i=!0),{...c,result:r}));if(!o)throw new Error("Tried to add tool result to non-existing tool call");a={...a,content:u},this.repository.addOrUpdateMessage(s,a),i&&Ma(a)&&this.performRoundtrip(s,a)}},Mg=class{constructor(e){this._threadFactory=e,this.switchToNewThread()}_threadData=new Map;_threads=[];_archivedThreads=[];_newThread;get newThread(){return this._newThread}get threads(){return this._threads}get archivedThreads(){return this._archivedThreads}_mainThread;get mainThread(){return this._mainThread}getThreadMetadataById(e){return this._threadData.get(e)?.runtime.metadata}switchToThread(e){if(this._mainThread?.metadata.threadId===e)return Promise.resolve();const t=this._threadData.get(e);if(!t)throw new Error("Thread not found");return t.runtime.metadata.state==="archived"&&this.unarchive(e),this._mainThread?._notifyEventSubscribers("switched-away"),this._mainThread=t.runtime,this._notifySubscribers(),t.runtime._notifyEventSubscribers("switched-to"),Promise.resolve()}switchToNewThread(){if(this._newThread===void 0){let e;do e=jr();while(this._threadData.has(e));const t=this._threadFactory(e,{messages:[]}),r=t.metadata.subscribe(()=>{this._syncState(e,t.metadata),e=t.metadata.threadId});this._threadData.set(e,{runtime:t,lastState:"new",dispose:r}),this._newThread=e}return this.switchToThread(this._newThread),Promise.resolve()}async _syncState(e,{state:t,threadId:r}){const n=this._threadData.get(e);if(!n)throw new Error("Thread not found");const s=n.lastState;if(!(s===t&&e===r)&&(e!==r&&(this._threadData.delete(e),s==="new"&&(this._newThread=r),s==="regular"&&(this._threads=this._threads.map(a=>a===e?r:a)),s==="archived"&&(this._archivedThreads=this._archivedThreads.map(a=>a===e?r:a))),s!==t&&(s==="new"&&(this._newThread=void 0),s==="regular"&&(this._threads=this._threads.filter(a=>a!==r)),s==="archived"&&(this._archivedThreads=this._archivedThreads.filter(a=>a!==r)),t==="new"&&(this._newThread&&this.delete(this._newThread),this._newThread=r),t==="archived"&&(this._archivedThreads=[...this._archivedThreads,n.runtime.metadata.threadId]),t==="regular"&&(this._threads=[...this._threads,n.runtime.metadata.threadId]),t==="deleted"&&(n.dispose(),this._threadData.delete(r)),n.lastState=t),this._notifySubscribers(),r===this._mainThread.metadata.threadId&&(t==="archived"||t==="deleted"))){const a=this._threads[0];a?await this.switchToThread(a):await this.switchToNewThread()}}rename(e,t){const r=this._threadData.get(e);if(!r)throw new Error("Thread not found");return r.runtime.metadata.rename(t),Promise.resolve()}archive(e){const t=this._threadData.get(e);if(!t)throw new Error("Thread not found");if(t.lastState!=="regular")throw new Error("Thread is not yet created or archived");return t.runtime.metadata.archive(),Promise.resolve()}unarchive(e){const t=this._threadData.get(e);if(!t)throw new Error("Thread not found");if(t.lastState!=="archived")throw new Error("Thread is not archived");return t.runtime.metadata.unarchive(),Promise.resolve()}delete(e){const t=this._threadData.get(e);if(!t)throw new Error("Thread not found");if(t.lastState!=="regular"&&t.lastState!=="archived")throw new Error("Thread is not yet created or already deleted");return t.runtime.metadata.delete(),Promise.resolve()}_subscriptions=new Set;subscribe(e){return this._subscriptions.add(e),()=>this._subscriptions.delete(e)}_notifySubscribers(){for(const e of this._subscriptions)e()}},Ia=e=>{const t=Up(e);return{messages:t.map((r,n)=>({parentId:t[n-1]?.id??null,message:r}))}},Ig=class extends Dp{threadList;_options;constructor(e,t){super(),this._options=e,this.threadList=new Mg((r,n)=>{const s=new Ng(this._proxyConfigProvider,r,this._options);return s.import(n),s}),t&&this.threadList.mainThread.import(Ia(t))}setOptions(e){this._options=e,this.threadList.mainThread.setOptions(e)}reset({initialMessages:e}={}){this.threadList.switchToNewThread(),e&&this.threadList.mainThread.import(Ia(e))}},Og=class Oo extends Ea{constructor(t,r){super(t,r),this.core=t}reset(t){this.core.reset(t)}static create(t){return new Oo(t,Ea.createMainThreadRuntime(t,bn))}},jg=(e,{initialMessages:t,...r}={})=>{const n={...r,adapters:{...r.adapters,chatModel:e}},[s]=l.useState(()=>new Ig(n,t));return l.useEffect(()=>{s.setOptions(n)}),l.useMemo(()=>Og.create(s),[s])},jo=l.createContext({}),$=()=>l.useContext(jo),Do=({children:e,config:t})=>{const r=!!Jc({optional:!0}),n=t&&Object.keys(t??{}).length>0?d.jsx(jo.Provider,{value:t,children:e}):d.jsx(d.Fragment,{children:e});if(!t?.runtime)return n;if(r)throw new Error("You provided a runtime to <Thread> while simulataneously using <AssistantRuntimeProvider>. This is not allowed.");return d.jsx(lu,{runtime:t.runtime,children:n})};Do.displayName="ThreadConfigProvider";/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dg=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Lo=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Lg={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bg=l.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:a,iconNode:i,...o},u)=>l.createElement("svg",{ref:u,...Lg,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:Lo("lucide",s),...o},[...i.map(([c,h])=>l.createElement(c,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=(e,t)=>{const r=l.forwardRef(({className:n,...s},a)=>l.createElement(Bg,{ref:a,iconNode:t,className:Lo(`lucide-${Dg(e)}`,n),...s}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $g=ue("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fg=ue("AudioLines",[["path",{d:"M2 10v3",key:"1fnikh"}],["path",{d:"M6 6v11",key:"11sgs0"}],["path",{d:"M10 3v18",key:"yhl04a"}],["path",{d:"M14 8v7",key:"3a1oy3"}],["path",{d:"M18 5v13",key:"123xd1"}],["path",{d:"M22 10v3",key:"154ddg"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zg=ue("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ug=ue("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zg=ue("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wg=ue("CircleStop",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vg=ue("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hg=ue("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qg=ue("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yg=ue("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jg=ue("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gg=ue("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kg=ue("SendHorizontal",[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xg=ue("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qg=ue("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);var ev=(e=!1)=>{const{assistantMessage:{allowCopy:t=!0}={}}=$(),r=oe(n=>n.capabilities.unstable_copy);return t&&(!e||r)},Xn=(e=!1)=>{const{assistantMessage:{allowSpeak:t=!0}={}}=$(),r=oe(n=>n.capabilities.speech);return t&&(!e||r)},Bo=(e=!1)=>{const{assistantMessage:{allowReload:t=!0}={}}=$(),r=oe(n=>n.capabilities.reload);return t&&(!e||r)},$o=(e=!1)=>{const{assistantMessage:{allowFeedbackPositive:t=!0}={}}=$(),r=oe(n=>n.capabilities.feedback);return t&&(!e||r)},Fo=(e=!1)=>{const{assistantMessage:{allowFeedbackNegative:t=!0}={}}=$(),r=oe(n=>n.capabilities.feedback);return t&&(!e||r)},Zo=()=>{const e=ev(!0),t=Bo(!0),r=Xn(!0),n=$o(!0),s=Fo(!0);return!e&&!t&&!r&&!n&&!s?null:d.jsxs(Qn,{hideWhenRunning:!0,autohide:"not-last",autohideFloat:"single-branch",children:[r&&d.jsx(Uo,{}),e&&d.jsx(es,{}),t&&d.jsx(ns,{}),n&&d.jsx(ss,{}),s&&d.jsx(as,{})]})};Zo.displayName="AssistantActionBar";var Qn=D(kn,{className:"aui-assistant-action-bar-root"});Qn.displayName="AssistantActionBarRoot";var es=l.forwardRef(({copiedDuration:e,...t},r)=>{const{strings:{assistantMessage:{copy:{tooltip:n="Copy"}={}}={}}={}}=$();return d.jsx(Ya,{copiedDuration:e,asChild:!0,children:d.jsx(ce,{tooltip:n,...t,ref:r,children:t.children??d.jsxs(d.Fragment,{children:[d.jsx(qe,{copied:!0,children:d.jsx(Zg,{})}),d.jsx(qe,{copied:!1,children:d.jsx(Hg,{})})]})})})});es.displayName="AssistantActionBarCopy";var Uo=()=>d.jsxs(d.Fragment,{children:[d.jsx(qe,{speaking:!1,children:d.jsx(ts,{})}),d.jsx(qe,{speaking:!0,children:d.jsx(rs,{})})]}),ts=l.forwardRef((e,t)=>{const{strings:{assistantMessage:{speak:{tooltip:r="Read aloud"}={}}={}}={}}=$(),n=Xn();return d.jsx(Mu,{disabled:!n,asChild:!0,children:d.jsx(ce,{tooltip:r,...e,ref:t,children:e.children??d.jsx(Fg,{})})})});ts.displayName="AssistantActionBarSpeak";var rs=l.forwardRef((e,t)=>{const{strings:{assistantMessage:{speak:{stop:{tooltip:r="Stop"}={}}={}}={}}={}}=$(),n=Xn();return d.jsx(Ja,{disabled:!n,asChild:!0,children:d.jsx(ce,{tooltip:r,...e,ref:t,children:e.children??d.jsx(Wg,{})})})});rs.displayName="AssistantActionBarStopSpeaking";var ns=l.forwardRef((e,t)=>{const{strings:{assistantMessage:{reload:{tooltip:r="Refresh"}={}}={}}={}}=$(),n=Bo();return d.jsx(Au,{disabled:!n,asChild:!0,children:d.jsx(ce,{tooltip:r,...e,ref:t,children:e.children??d.jsx(Gg,{})})})});ns.displayName="AssistantActionBarReload";var ss=l.forwardRef((e,t)=>{const{strings:{assistantMessage:{feedback:{positive:{tooltip:r="Good response"}={}}={}}={}}={}}=$(),n=$o();return d.jsx(Ga,{disabled:!n,className:"aui-assistant-action-bar-feedback-positive",asChild:!0,children:d.jsx(ce,{tooltip:r,...e,ref:t,children:e.children??d.jsx(Qg,{})})})});ss.displayName="AssistantActionBarFeedbackPositive";var as=l.forwardRef((e,t)=>{const{strings:{assistantMessage:{feedback:{negative:{tooltip:r="Bad response"}={}}={}}={}}={}}=$(),n=Fo();return d.jsx(Ka,{disabled:!n,className:"aui-assistant-action-bar-feedback-negative",asChild:!0,children:d.jsx(ce,{tooltip:r,...e,ref:t,children:e.children??d.jsx(Xg,{})})})});as.displayName="AssistantActionBarFeedbackNegative";var tv={Root:Qn,Reload:ns,Copy:es,Speak:ts,StopSpeaking:rs,SpeechControl:Uo,FeedbackPositive:ss,FeedbackNegative:as},rv=Object.assign(Zo,tv),is=(e=!1)=>{const{branchPicker:{allowBranchPicker:t=!0}={}}=$(),r=oe(n=>n.capabilities.edit);return t&&(!e||r)},zo=()=>is(!0)?d.jsxs(os,{hideWhenSingleBranch:!0,children:[d.jsx(cs,{}),d.jsx(Wo,{}),d.jsx(us,{})]}):null;zo.displayName="BranchPicker";var os=D(Yi,{className:"aui-branch-picker-root"});os.displayName="BranchPickerRoot";var cs=l.forwardRef((e,t)=>{const{strings:{branchPicker:{previous:{tooltip:r="Previous"}={}}={}}={}}=$(),n=is();return d.jsx(uh,{disabled:!n,asChild:!0,children:d.jsx(ce,{tooltip:r,...e,ref:t,children:e.children??d.jsx(Ug,{})})})});cs.displayName="BranchPickerPrevious";var nv=D("span",{className:"aui-branch-picker-state"}),Wo=l.forwardRef((e,t)=>d.jsxs(nv,{...e,ref:t,children:[d.jsx(ji,{})," / ",d.jsx(Oi,{})]}));Wo.displayName="BranchPickerState";var us=l.forwardRef((e,t)=>{const{strings:{branchPicker:{next:{tooltip:r="Next"}={}}={}}={}}=$(),n=is();return d.jsx(oh,{disabled:!n,asChild:!0,children:d.jsx(ce,{tooltip:r,...e,ref:t,children:e.children??d.jsx(zg,{})})})});us.displayName="BranchPickerNext";var sv={Root:os,Previous:cs,Next:us},Vo=Object.assign(zo,sv),ls="Avatar",[av,Sy]=Rn(ls),[iv,Ho]=av(ls),qo=l.forwardRef((e,t)=>{const{__scopeAvatar:r,...n}=e,[s,a]=l.useState("idle");return d.jsx(iv,{scope:r,imageLoadingStatus:s,onImageLoadingStatusChange:a,children:d.jsx(B.span,{...n,ref:t})})});qo.displayName=ls;var Yo="AvatarImage",Jo=l.forwardRef((e,t)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:s=()=>{},...a}=e,i=Ho(Yo,r),o=ov(n,a.referrerPolicy),u=ve(c=>{s(c),i.onImageLoadingStatusChange(c)});return Be(()=>{o!=="idle"&&u(o)},[o,u]),o==="loaded"?d.jsx(B.img,{...a,ref:t,src:n}):null});Jo.displayName=Yo;var Go="AvatarFallback",ds=l.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:n,...s}=e,a=Ho(Go,r),[i,o]=l.useState(n===void 0);return l.useEffect(()=>{if(n!==void 0){const u=window.setTimeout(()=>o(!0),n);return()=>window.clearTimeout(u)}},[n]),i&&a.imageLoadingStatus!=="loaded"?d.jsx(B.span,{...s,ref:t}):null});ds.displayName=Go;function ov(e,t){const[r,n]=l.useState("idle");return Be(()=>{if(!e){n("error");return}let s=!0;const a=new window.Image,i=o=>()=>{s&&n(o)};return n("loading"),a.onload=i("loaded"),a.onerror=i("error"),a.src=e,t&&(a.referrerPolicy=t),()=>{s=!1}},[e,t]),r}var cv=qo,uv=Jo,lv=ds,hs=({src:e,alt:t,fallback:r})=>e==null&&r==null?null:d.jsxs(fs,{children:[e!=null&&d.jsx(ps,{src:e,alt:t}),r!=null&&d.jsx(Ko,{children:r})]});hs.displayName="Avatar";var fs=D(cv,{className:"aui-avatar-root"});fs.displayName="AvatarRoot";var ps=D(uv,{className:"aui-avatar-image"});ps.displayName="AvatarImage";var Ko=D(lv,{className:"aui-avatar-fallback"});Ko.displayName="AvatarFallback";var dv=()=>{const e=xh();return d.jsx(Un,{className:Fr("aui-text",e.type==="running"&&"aui-text-running"),component:"p"})},hv={Text:bh(dv)},Xo=hv,Qo=()=>d.jsxs(ms,{children:[d.jsx(ec,{}),d.jsx(gs,{}),d.jsx(Vo,{}),d.jsx(rv,{})]});Qo.displayName="AssistantMessage";var ec=()=>{const{assistantAvatar:e={fallback:"A"}}=$();return d.jsx(hs,{...e})},ms=D(Zn,{className:"aui-assistant-message-root"});ms.displayName="AssistantMessageRoot";var fv=D("div",{className:"aui-assistant-message-content"}),gs=l.forwardRef(({components:e,...t},r)=>{const{tools:n,assistantMessage:{components:s={}}={}}=$(),a=l.useMemo(()=>({by_name:n?Object.fromEntries(n.map(i=>[i.unstable_tool.toolName,i.unstable_tool.render])):void 0,Fallback:s.ToolFallback}),[...n??[],s.ToolFallback]);return d.jsx(fv,{...t,ref:r,children:d.jsx(Wn,{components:{...e,Text:e?.Text??s.Text??Xo.Text,tools:a}})})});gs.displayName="AssistantMessageContent";var pv={Root:ms,Avatar:ec,Content:gs},mv=Object.assign(Qo,pv),tc=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",width:"16",height:"16",children:d.jsx("rect",{width:"10",height:"10",x:"3",y:"3",rx:"2"})});tc.displayName="CircleStopIcon";var vs="Dialog",[rc,Cy]=Rn(vs),[gv,ke]=rc(vs),nc=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:s,onOpenChange:a,modal:i=!0}=e,o=l.useRef(null),u=l.useRef(null),[c=!1,h]=Si({prop:n,defaultProp:s,onChange:a});return d.jsx(gv,{scope:t,triggerRef:o,contentRef:u,contentId:ar(),titleId:ar(),descriptionId:ar(),open:c,onOpenChange:h,onOpenToggle:l.useCallback(()=>h(f=>!f),[h]),modal:i,children:r})};nc.displayName=vs;var sc="DialogTrigger",ac=l.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=ke(sc,r),a=ae(t,s.triggerRef);return d.jsx(B.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":xs(s.open),...n,ref:a,onClick:z(e.onClick,s.onOpenToggle)})});ac.displayName=sc;var ys="DialogPortal",[vv,ic]=rc(ys,{forceMount:void 0}),oc=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:s}=e,a=ke(ys,t);return d.jsx(vv,{scope:t,forceMount:r,children:l.Children.map(n,i=>d.jsx(Yt,{present:r||a.open,children:d.jsx(wi,{asChild:!0,container:s,children:i})}))})};oc.displayName=ys;var Cr="DialogOverlay",cc=l.forwardRef((e,t)=>{const r=ic(Cr,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,a=ke(Cr,e.__scopeDialog);return a.modal?d.jsx(Yt,{present:n||a.open,children:d.jsx(yv,{...s,ref:t})}):null});cc.displayName=Cr;var yv=l.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=ke(Cr,r);return d.jsx(Mi,{as:Sn,allowPinchZoom:!0,shards:[s.contentRef],children:d.jsx(B.div,{"data-state":xs(s.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),at="DialogContent",uc=l.forwardRef((e,t)=>{const r=ic(at,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,a=ke(at,e.__scopeDialog);return d.jsx(Yt,{present:n||a.open,children:a.modal?d.jsx(bv,{...s,ref:t}):d.jsx(xv,{...s,ref:t})})});uc.displayName=at;var bv=l.forwardRef((e,t)=>{const r=ke(at,e.__scopeDialog),n=l.useRef(null),s=ae(t,r.contentRef,n);return l.useEffect(()=>{const a=n.current;if(a)return _d(a)},[]),d.jsx(lc,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:z(e.onCloseAutoFocus,a=>{a.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:z(e.onPointerDownOutside,a=>{const i=a.detail.originalEvent,o=i.button===0&&i.ctrlKey===!0;(i.button===2||o)&&a.preventDefault()}),onFocusOutside:z(e.onFocusOutside,a=>a.preventDefault())})}),xv=l.forwardRef((e,t)=>{const r=ke(at,e.__scopeDialog),n=l.useRef(!1),s=l.useRef(!1);return d.jsx(lc,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{e.onCloseAutoFocus?.(a),a.defaultPrevented||(n.current||r.triggerRef.current?.focus(),a.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:a=>{e.onInteractOutside?.(a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=a.target;r.triggerRef.current?.contains(i)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),lc=l.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:a,...i}=e,o=ke(at,r),u=l.useRef(null),c=ae(t,u);return Vu(),d.jsxs(d.Fragment,{children:[d.jsx(ei,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:a,children:d.jsx(Pn,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":xs(o.open),...i,ref:c,onDismiss:()=>o.onOpenChange(!1)})}),d.jsxs(d.Fragment,{children:[d.jsx(Sv,{titleId:o.titleId}),d.jsx(Tv,{contentRef:u,descriptionId:o.descriptionId})]})]})}),bs="DialogTitle",dc=l.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=ke(bs,r);return d.jsx(B.h2,{id:s.titleId,...n,ref:t})});dc.displayName=bs;var hc="DialogDescription",_v=l.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=ke(hc,r);return d.jsx(B.p,{id:s.descriptionId,...n,ref:t})});_v.displayName=hc;var fc="DialogClose",wv=l.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=ke(fc,r);return d.jsx(B.button,{type:"button",...n,ref:t,onClick:z(e.onClick,()=>s.onOpenChange(!1))})});wv.displayName=fc;function xs(e){return e?"open":"closed"}var pc="DialogTitleWarning",[Ty,mc]=Du(pc,{contentName:at,titleName:bs,docsSlug:"dialog"}),Sv=({titleId:e})=>{const t=mc(pc),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return l.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},Cv="DialogDescriptionWarning",Tv=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${mc(Cv).contentName}}.`;return l.useEffect(()=>{const s=e.current?.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},Ev=nc,kv=ac,Av=oc,gc=cc,vc=uc,Rv=Ev,Pv=kv,Nv=Av,yc=l.forwardRef(({className:e,...t},r)=>d.jsx(gc,{ref:r,className:Fr("aui-dialog-overlay",e),...t}));yc.displayName=gc.displayName;var bc=l.forwardRef(({className:e,children:t,...r},n)=>d.jsxs(Nv,{children:[d.jsx(yc,{}),d.jsx(vc,{ref:n,className:Fr("aui-dialog-content",e),...r,children:t})]}));bc.displayName=vc.displayName;const Oa=e=>Symbol.iterator in e,ja=e=>"entries"in e,Da=(e,t)=>{const r=e instanceof Map?e:new Map(e.entries()),n=t instanceof Map?t:new Map(t.entries());if(r.size!==n.size)return!1;for(const[s,a]of r)if(!Object.is(a,n.get(s)))return!1;return!0},Mv=(e,t)=>{const r=e[Symbol.iterator](),n=t[Symbol.iterator]();let s=r.next(),a=n.next();for(;!s.done&&!a.done;){if(!Object.is(s.value,a.value))return!1;s=r.next(),a=n.next()}return!!s.done&&!!a.done};function Iv(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:!Oa(e)||!Oa(t)?Da({entries:()=>Object.entries(e)},{entries:()=>Object.entries(t)}):ja(e)&&ja(t)?Da(e,t):Mv(e,t)}function Ov(e){const t=nn.useRef();return r=>{const n=e(r);return Iv(t.current,n)?t.current:t.current=n}}var _s=D(Ii,{className:"aui-attachment-root"});_s.displayName="AttachmentRoot";var jv=e=>{const[t,r]=l.useState(void 0);return l.useEffect(()=>{if(!e){r(void 0);return}const n=URL.createObjectURL(e);return r(n),()=>{URL.revokeObjectURL(n)}},[e]),t},xc=()=>{const{file:e,src:t}=Tt(Ov(r=>{if(r.type!=="image")return{};if(r.file)return{file:r.file};const n=r.content?.filter(s=>s.type==="image")[0]?.image;return n?{src:n}:{}}));return jv(e)??t},Dv=({src:e})=>{const[t,r]=l.useState(!1);return d.jsx("img",{src:e,style:{width:"auto",height:"auto",maxWidth:"75dvh",maxHeight:"75dvh",display:t?"block":"none",overflow:"clip"},onLoad:()=>r(!0),alt:"Image Preview"})},Lv=({children:e})=>{const t=xc();return t?d.jsxs(Rv,{children:[d.jsx(Pv,{className:"aui-attachment-preview-trigger",asChild:!0,children:e}),d.jsxs(bc,{children:[d.jsx(dc,{className:"aui-sr-only",children:"Image Attachment Preview"}),d.jsx(Dv,{src:t})]})]}):e},Bv=()=>{const e=Tt(r=>r.type==="image"),t=xc();return d.jsxs(fs,{className:"aui-attachment-thumb",children:[d.jsx(ds,{delayMs:e?200:0,children:d.jsx(qg,{})}),d.jsx(ps,{src:t})]})},_c=()=>{const e=Tt(r=>r.source!=="message"),t=Tt(r=>{const n=r.type;switch(n){case"image":return"Image";case"document":return"Document";case"file":return"File";default:const s=n;throw new Error(`Unknown attachment type: ${s}`)}});return d.jsxs(Gn,{children:[d.jsx(Lv,{children:d.jsx(Ao,{asChild:!0,children:d.jsxs(_s,{children:[d.jsx(Bv,{}),d.jsxs("div",{className:"aui-attachment-text",children:[d.jsx("p",{className:"aui-attachment-name",children:d.jsx(dn,{})}),d.jsx("p",{className:"aui-attachment-type",children:t})]}),e&&d.jsx(ws,{})]})})}),d.jsx(Kn,{side:"top",children:d.jsx(dn,{})})]})};_c.displayName="Attachment";var ws=l.forwardRef((e,t)=>{const{strings:{composer:{removeAttachment:{tooltip:r="Remove file"}={}}={}}={}}=$();return d.jsx(ah,{asChild:!0,children:d.jsx(ce,{tooltip:r,className:"aui-attachment-remove",side:"top",...e,ref:t,children:e.children??d.jsx(Vg,{})})})});ws.displayName="AttachmentRemove";var $v={Root:_s,Remove:ws},wc=Object.assign(_c,$v),Sc=(e=!1)=>{const{composer:{allowAttachments:t=!0}={}}=$(),r=oe(n=>n.capabilities.attachments);return t&&(!e||r)},Cc=()=>{const e=Sc(!0);return d.jsxs(Ss,{children:[e&&d.jsx(Tc,{}),e&&d.jsx(Ts,{}),d.jsx(Cs,{autoFocus:!0}),d.jsx(Es,{})]})};Cc.displayName="Composer";var Ss=D(Vn,{className:"aui-composer-root"});Ss.displayName="ComposerRoot";var Fv=D(Hn,{rows:1,autoFocus:!0,className:"aui-composer-input"}),Cs=l.forwardRef((e,t)=>{const{strings:{composer:{input:{placeholder:r="Write a message..."}={}}={}}={}}=$();return d.jsx(Fv,{placeholder:r,...e,ref:t})});Cs.displayName="ComposerInput";var Zv=D("div",{className:"aui-composer-attachments"}),Tc=({components:e})=>d.jsx(Zv,{children:d.jsx(eo,{components:{...e,Attachment:e?.Attachment??wc}})}),Uv=D(ce,{variant:"default",className:"aui-composer-attach"}),Ts=l.forwardRef((e,t)=>{const{strings:{composer:{addAttachment:{tooltip:r="Attach file"}={}}={}}={}}=$(),n=Sc();return d.jsx(uf,{disabled:!n,asChild:!0,children:d.jsx(Uv,{tooltip:r,variant:"ghost",...e,ref:t,children:e.children??d.jsx(Yg,{})})})});Ts.displayName="ComposerAddAttachment";var zv=()=>oe(t=>t.capabilities.cancel),Es=()=>zv()?d.jsxs(d.Fragment,{children:[d.jsx(At,{running:!1,children:d.jsx(Tr,{})}),d.jsx(At,{running:!0,children:d.jsx(ks,{})})]}):d.jsx(Tr,{});Es.displayName="ComposerAction";var Wv=D(ce,{variant:"default",className:"aui-composer-send"}),Tr=l.forwardRef((e,t)=>{const{strings:{composer:{send:{tooltip:r="Send"}={}}={}}={}}=$();return d.jsx(Xi,{asChild:!0,children:d.jsx(Wv,{tooltip:r,...e,ref:t,children:e.children??d.jsx(Kg,{})})})});Tr.displayName="ComposerSend";var Vv=D(ce,{variant:"default",className:"aui-composer-cancel"}),ks=l.forwardRef((e,t)=>{const{strings:{composer:{cancel:{tooltip:r="Cancel"}={}}={}}={}}=$();return d.jsx(Qi,{asChild:!0,children:d.jsx(Vv,{tooltip:r,...e,ref:t,children:e.children??d.jsx(tc,{})})})});ks.displayName="ComposerCancel";var Hv={Root:Ss,Input:Cs,Action:Es,Send:Tr,Cancel:ks,AddAttachment:Ts,Attachments:Tc},qv=Object.assign(Cc,Hv),Ec=()=>d.jsxs(As,{children:[d.jsxs(kc,{children:[d.jsx(Ac,{}),d.jsx(Rs,{})]}),d.jsx(Ps,{})]});Ec.displayName="ThreadWelcome";var Yv=D("div",{className:"aui-thread-welcome-root"}),kc=D("div",{className:"aui-thread-welcome-center"}),As=l.forwardRef((e,t)=>d.jsx(no,{children:d.jsx(Yv,{...e,ref:t})}));As.displayName="ThreadWelcomeRoot";var Ac=()=>{const{assistantAvatar:e={fallback:"A"}}=$();return d.jsx(hs,{...e})},Jv=D("p",{className:"aui-thread-welcome-message"}),Rs=l.forwardRef(({message:e,...t},r)=>{const{welcome:{message:n}={},strings:{welcome:{message:s="How can I help you today?"}={}}={}}=$();return d.jsx(Jv,{...t,ref:r,children:e??n??s})});Rs.displayName="ThreadWelcomeMessage";var Gv=D("div",{className:"aui-thread-welcome-suggestion-container"}),Kv=D(oo,{className:"aui-thread-welcome-suggestion"}),Rc=({suggestion:{text:e,prompt:t}})=>d.jsx(Kv,{prompt:t,method:"replace",autoSend:!0,children:d.jsx("span",{className:"aui-thread-welcome-suggestion-text",children:e??t})}),Ps=()=>{const e=oe(n=>n.suggestions),{welcome:{suggestions:t}={}}=$(),r=e.length?e:t;return d.jsx(Gv,{children:r?.map((n,s)=>{const a=`${n.prompt}-${s}`;return d.jsx(Rc,{suggestion:n},a)})})};Ps.displayName="ThreadWelcomeSuggestions";var Xv={Root:As,Center:kc,Avatar:Ac,Message:Rs,Suggestions:Ps,Suggestion:Rc},Qv=Object.assign(Ec,Xv),Pc=(e=!1)=>{const{userMessage:{allowEdit:t=!0}={}}=$(),r=oe(n=>n.capabilities.edit);return t&&(!e||r)},Nc=()=>Pc(!0)?d.jsx(Ns,{hideWhenRunning:!0,autohide:"not-last",children:d.jsx(Ms,{})}):null;Nc.displayName="UserActionBar";var Ns=D(kn,{className:"aui-user-action-bar-root"});Ns.displayName="UserActionBarRoot";var Ms=l.forwardRef((e,t)=>{const{strings:{userMessage:{edit:{tooltip:r="Edit"}={}}={}}={}}=$(),n=Pc();return d.jsx(Pu,{disabled:!n,asChild:!0,children:d.jsx(ce,{tooltip:r,...e,ref:t,children:e.children??d.jsx(Jg,{})})})});Ms.displayName="UserActionBarEdit";var ey={Root:Ns,Edit:Ms},ty=Object.assign(Nc,ey),Mc=()=>d.jsxs(Is,{children:[d.jsx(Ic,{}),d.jsxs(qe,{hasContent:!0,children:[d.jsx(ty,{}),d.jsx(Os,{})]}),d.jsx(Vo,{})]});Mc.displayName="UserMessage";var Is=D(Zn,{className:"aui-user-message-root"});Is.displayName="UserMessageRoot";var ry=D("div",{className:"aui-user-message-content"}),Os=l.forwardRef(({components:e,...t},r)=>d.jsx(ry,{...t,ref:r,children:d.jsx(Wn,{components:{...e,Text:e?.Text??Xo.Text}})}));Os.displayName="UserMessageContent";var ny=D("div",{className:"aui-user-message-attachments"}),Ic=({components:e})=>d.jsx(qe,{hasAttachments:!0,children:d.jsx(ny,{children:d.jsx(qi,{components:{...e,Attachment:e?.Attachment??wc}})})}),sy={Root:Is,Content:Os,Attachments:Ic},ay=Object.assign(Mc,sy),Oc=()=>d.jsxs(js,{children:[d.jsx(Ds,{}),d.jsxs(Ls,{children:[d.jsx(Bs,{}),d.jsx($s,{})]})]});Oc.displayName="EditComposer";var js=D(Vn,{className:"aui-edit-composer-root"});js.displayName="EditComposerRoot";var Ds=D(Hn,{className:"aui-edit-composer-input"});Ds.displayName="EditComposerInput";var Ls=D("div",{className:"aui-edit-composer-footer"});Ls.displayName="EditComposerFooter";var Bs=l.forwardRef((e,t)=>{const{strings:{editComposer:{cancel:{label:r="Cancel"}={}}={}}={}}=$();return d.jsx(Qi,{asChild:!0,children:d.jsx(Zr,{variant:"ghost",...e,ref:t,children:e.children??r})})});Bs.displayName="EditComposerCancel";var $s=l.forwardRef((e,t)=>{const{strings:{editComposer:{send:{label:r="Send"}={}}={}}={}}=$();return d.jsx(Xi,{asChild:!0,children:d.jsx(Zr,{...e,ref:t,children:e.children??r})})});$s.displayName="EditComposerSend";var iy={Root:js,Input:Ds,Footer:Ls,Cancel:Bs,Send:$s},oy=Object.assign(Oc,iy),cy=e=>{const{components:{Composer:t=qv,ThreadWelcome:r=Qv,...n}={}}=e;return d.jsx(Fs,{config:e,children:d.jsxs(Zs,{children:[d.jsx(r,{}),d.jsx(zs,{components:n}),d.jsx(jc,{}),d.jsxs(Us,{children:[d.jsx(Ws,{}),d.jsx(t,{})]})]})})},uy=D(to,{className:"aui-root aui-thread-root"}),Fs=l.forwardRef(({config:e,...t},r)=>d.jsx(Do,{config:e,children:d.jsx(uy,{...t,ref:r})}));Fs.displayName="ThreadRoot";var Zs=D(so,{className:"aui-thread-viewport"});Zs.displayName="ThreadViewport";var Us=D("div",{className:"aui-thread-viewport-footer"});Us.displayName="ThreadViewportFooter";var zs=({components:e,unstable_flexGrowDiv:t=!0,...r})=>d.jsxs(d.Fragment,{children:[d.jsx(Af,{components:{...e,UserMessage:e?.UserMessage??ay,AssistantMessage:e?.AssistantMessage??mv,EditComposer:e?.EditComposer??oy},...r}),t&&d.jsx(At,{empty:!1,children:d.jsx("div",{style:{flexGrow:1}})})]});zs.displayName="ThreadMessages";var jc=()=>{const e=oe(t=>t.suggestions);return d.jsx(At,{empty:!1,running:!1,children:d.jsx("div",{className:"aui-thread-followup-suggestions",children:e?.map((t,r)=>d.jsx(oo,{className:"aui-thread-followup-suggestion",prompt:t.prompt,method:"replace",autoSend:!0,children:t.prompt},r))})})},ly=D(ce,{variant:"outline",className:"aui-thread-scroll-to-bottom"}),Ws=l.forwardRef((e,t)=>{const{strings:{thread:{scrollToBottom:{tooltip:r="Scroll to bottom"}={}}={}}={}}=$();return d.jsx(Pf,{asChild:!0,children:d.jsx(ly,{tooltip:r,...e,ref:t,children:e.children??d.jsx($g,{})})})});Ws.displayName="ThreadScrollToBottom";var dy={Root:Fs,Viewport:Zs,Messages:zs,FollowupSuggestions:jc,ScrollToBottom:Ws,ViewportFooter:Us},Ey=Object.assign(cy,dy);export{ld as A,dd as C,Pn as D,ei as F,B as P,ud as R,Do as T,fi as a,Si as b,Rn as c,ar as d,z as e,Yt as f,wi as g,_d as h,Mi as i,Vu as j,hd as k,Xe as l,ue as m,$ as n,ce as o,Ey as t,wy as u,D as w};

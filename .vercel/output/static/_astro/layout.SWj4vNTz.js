let l=[],i=0;const u=4;let c=o=>{let r=[],e={get(){return e.lc||e.listen(()=>{})(),e.value},lc:0,listen(t){return e.lc=r.push(t),()=>{for(let s=i+u;s<l.length;)l[s]===t?l.splice(s,u):s+=u;let n=r.indexOf(t);~n&&(r.splice(n,1),--e.lc||e.off())}},notify(t,n){let s=!l.length;for(let f of r)l.push(f,e.value,t,n);if(s){for(i=0;i<l.length;i+=u)l[i](l[i+1],l[i+2],l[i+3]);l.length=0}},off(){},set(t){let n=e.value;n!==t&&(e.value=t,e.notify(n))},subscribe(t){let n=e.listen(t);return t(e.value),n},value:o};return e};const d=c("sidebar");function a(o){d.set(o),window.innerWidth>=768&&localStorage.setItem("layoutPreference",o),document.documentElement.setAttribute("data-layout",o)}function h(){if(window.innerWidth<768){a("header");return}const r=localStorage.getItem("layoutPreference");a(r||"sidebar")}export{h as i,d as l,a as s};
